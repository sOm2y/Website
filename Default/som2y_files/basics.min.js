!function(){var a=window.editorModel&&window.editorModel.mode||window.rendererModel&&window.rendererModel.debugMode;if("unit_test"!=a){var b={com:!0,org:!0,net:!0,edu:!0,gov:!0,mil:!0,info:!0,co:!0,ac:!0},c=document.domain.split(".");if(c.length>2){var d=c[c.length-2];c=b[d]?c[c.length-3]+"."+c[c.length-2]+"."+c[c.length-1]:c[c.length-2]+"."+c[c.length-1]}try{document.domain=c}catch(e){}}}(),define.resource("experimentDescriptors.addbionclosingdialog",{createTime:"2000-01-01T03:05:00",owner:"LeoniJ",description:"Add BI event when user closes some dialog",tags:["editor"]}),define.resource("experimentDescriptors.addpagedata_17_6_2013",{createTime:"2000-01-01T02:52:00",owner:"LeoniJ",description:"new add page data"}),define.resource("experimentDescriptors.addpageinadddialog",{createTime:"2000-01-01T00:33:00",owner:"Roni",description:"ability to add a page from the add menu"}),define.resource("experimentDescriptors.adduseragents",{createTime:"2000-01-01T02:46:00",owner:"Sivan",description:"Add user agents to mobile recognition.",tags:["viewer","editor"]}),define.resource("experimentDescriptors.additionalinfo",{createTime:"2000-01-01T01:53:00",owner:"Leonid",description:"Pages Panel - sub pages indication"}),define.resource("experimentDescriptors.advancedstylingcancel",{createTime:"2000-01-01T00:51:00",owner:"tombigel",description:"Added a cancel action to Advanced Styling Dialog",constraints:{StylePerComponent:"required"},tags:["viewer","editor"]}),define.resource("experimentDescriptors.advancedstylingundo",{createTime:"2000-01-01T00:52:00",owner:"tombigel",description:"Added an undo action to Advanced Styling Dialog",constraints:{StylePerComponent:"required",AdvancedStylingCancel:"required"},tags:["viewer","editor"]}),define.resource("experimentDescriptors.appbuildercopypaste",{createTime:"2000-01-01T00:20:00",owner:"mimran",description:"Wix Apps - App Builder Copy Paste"}),define.resource("experimentDescriptors.appbuilderdeleteappfix",{createTime:"2000-01-01T00:22:00",owner:"mimran",description:"Wix Apps - Delete application BI messages + apps in container"}),define.resource("experimentDescriptors.appbuilderlinks",{createTime:"2000-01-01T00:17:00",owner:"kfirg",description:"Wix Apps - App Builder Links"}),define.resource("experimentDescriptors.appbuilderlistsettings2",{createTime:"2000-01-01T00:23:00",owner:"amitk",description:"Wix Apps - App Builder new list settings panel"}),define.resource("experimentDescriptors.appbuilderloadinganim",{createTime:"2000-01-01T00:21:00",owner:"mimran",description:"Wix Apps - App Builder Loading animation"}),define.resource("experimentDescriptors.appbuildermandatorytitle",{createTime:"2000-01-01T00:18:00",owner:"kfirg",description:"Wix Apps - App Builder Mandatory Title"}),define.resource("experimentDescriptors.appbuilderpage",{createTime:"2000-01-01T00:19:00",owner:"amirm",description:"Wix Apps - App Builder Page",constraints:{WixAppsPage:"required"}}),define.resource("experimentDescriptors.appsdispose",{createTime:"2000-01-01T00:31:00",owner:"Kfir",description:"call dispose on editor proxies"}),define.resource("experimentDescriptors.appsopenappmarket",{createTime:"2000-01-01T00:00:00",owner:"Mayah",description:"Apps to open app market",constraints:{AddPageInAddDialog:"conflicts"},tags:["editor"]}),define.resource("experimentDescriptors.autoplayfix",{createTime:"2000-01-01T01:57:00",owner:"LeoniJ",description:"WOH-297"}),define.resource("experimentDescriptors.autoresizeevent",{createTime:"2000-01-01T01:49:00",owner:"Jiri",description:"Fixes component resize event int wixapps/ResizableProxy"}),define.resource("experimentDescriptors.backtoeditor",{createTime:"2000-01-01T01:39:00",owner:"guyr",description:"new skin and locations for the preview mode state bar",tags:["editor"]}),define.resource("experimentDescriptors.backgroundsrz",{createTime:"2000-01-01T02:27:00",owner:"Sivan (for NirY)",description:"change backgrounds to srz instead of crp",tags:["viewer","editor"]}),define.resource("experimentDescriptors.betterprefetch",{createTime:"2000-01-01T02:12:00",owner:"Dromy",description:"start prefetching 12s after site is loaded, only prefetch first 5 pages, and time between page prefetch is now 10s",constraints:{JITPageLoader:"required"}}),define.resource("experimentDescriptors.bgimagestrip",{createTime:"2000-01-01T02:56:00",owner:"Michael",description:"new comp - strip with background image"}),define.resource("experimentDescriptors.blog",{createTime:"2000-01-01T01:46:00",owner:"Nadav A, Tomer G",description:"Blog functionality added to editor",constraints:{WixAppsPage:"required"}}),define.resource("experimentDescriptors.callonnextrender",{createTime:"2000-01-01T00:13:00",owner:"Roni",description:"use CallOnNextRender function to sync rendering with browser natural rendering"}),define.resource("experimentDescriptors.custompreviewbehavior",{createTime:"2000-01-01T02:37:00",owner:"Eitan Rousso",description:"new trait to specify behavior which is specific to preview mode (non-public mode)"}),define.resource("experimentDescriptors.customsitewidth",{createTime:"2000-01-01T02:49:00",owner:"Lichtash",description:"#WOH-1885 | Customizes Site Width from the Settings Panel"}),define.resource("experimentDescriptors.denisskinpack",{createTime:"2000-01-01T02:55:00",owner:"Denis H",description:"Skin pack with 13 skins added"}),define.resource("experimentDescriptors.dev",{createTime:"2000-01-01T00:03:00",owner:"Gil",description:"You are looking at it now!"}),define.resource("experimentDescriptors.documentmedia",{createTime:"2000-01-01T02:58:00",owner:"galiak",description:"Shortcut for Link -> Document, with document icon upload and document title display",tags:["viewer","editor"]}),define.resource("experimentDescriptors.draggableareachanges",{createTime:"2000-01-01T01:34:00",owner:"Leonid",description:"Pages panel - Change draggable area icon on mouse hover"}),define.resource("experimentDescriptors.dummyexp1",{createTime:"2000-01-01T00:58:00",owner:"Leonid",description:"Dummy Experiment"}),define.resource("experimentDescriptors.dummyexp10",{createTime:"2000-01-01T01:07:00",owner:"Leonid",description:"Dummy Experiment"}),define.resource("experimentDescriptors.dummyexp2",{createTime:"2000-01-01T00:59:00",owner:"Leonid",description:"Dummy Experiment"}),define.resource("experimentDescriptors.dummyexp3",{createTime:"2000-01-01T01:00:00",owner:"Leonid",description:"Dummy Experiment"}),define.resource("experimentDescriptors.dummyexp4",{createTime:"2000-01-01T01:01:00",owner:"Leonid",description:"Dummy Experiment"}),define.resource("experimentDescriptors.dummyexp5",{createTime:"2000-01-01T01:02:00",owner:"Leonid",description:"Dummy Experiment"}),define.resource("experimentDescriptors.dummyexp6",{createTime:"2000-01-01T01:03:00",owner:"Leonid",description:"Dummy Experiment"}),define.resource("experimentDescriptors.dummyexp7",{createTime:"2000-01-01T01:04:00",owner:"Leonid",description:"Dummy Experiment"}),define.resource("experimentDescriptors.dummyexp8",{createTime:"2000-01-01T01:05:00",owner:"Leonid",description:"Dummy Experiment"}),define.resource("experimentDescriptors.dummyexp9",{createTime:"2000-01-01T01:06:00",owner:"Leonid",description:"Dummy Experiment"}),define.resource("experimentDescriptors.ecomexp1",{createTime:"2000-01-01T02:20:00",owner:"Tanya",description:"ecom experiment"}),define.resource("experimentDescriptors.ecomexp2",{createTime:"2000-01-01T02:21:00",owner:"Tanya",description:"ecom experiment"}),define.resource("experimentDescriptors.ecomexp3",{createTime:"2000-01-01T02:22:00",owner:"Tanya",description:"ecom experiment"}),define.resource("experimentDescriptors.ecomexp4",{createTime:"2000-01-01T02:23:00",owner:"Tanya",description:"ecom experiment"}),define.resource("experimentDescriptors.ecomexp5",{createTime:"2000-01-01T02:24:00",owner:"Tanya",description:"ecom experiment"}),define.resource("experimentDescriptors.ecompicsonlygallery",{createTime:"2000-01-01T02:01:00",owner:"Tanya",description:"adds new gallery view",constraints:{WixAppsLayoutFixes:"required"}}),define.resource("experimentDescriptors.ecompremium",{createTime:"2000-01-01T01:45:00",owner:"Tanya",description:"Tell users that eCom is a premium feature"}),define.resource("experimentDescriptors.ecomrepo",{createTime:"2000-01-01T01:33:00",owner:"Tanya",description:"Separate ecommerce repository from WixApps"}),define.resource("experimentDescriptors.ecomsocial",{createTime:"2000-01-01T01:21:00",owner:"Tanya",description:"adds social buttons to product page"}),define.resource("experimentDescriptors.ecomtax",{createTime:"2000-01-01T01:36:00",owner:"Tanya",description:"Tax support in shopping cart"}),define.resource("experimentDescriptors.editorrendersitefromjson",{createTime:"2000-01-01T01:44:00",owner:"Roman",description:"render the structure as JSON in editor preview",tags:["editor","viewer"]}),define.resource("experimentDescriptors.editorrulers",{createTime:"2000-01-01T01:25:00",owner:"u",description:"Add Rulers.",constraints:{GridLines:"conflicts"},tags:["editor"]}),define.resource("experimentDescriptors.editorrulersdefaulton",{createTime:"2000-01-01T01:26:00",owner:"u",description:"Rulers are turned on by default. Since there's a message when turning the rulers on now, this is frozen for product reasons for now.",constraints:{EditorRulers:"required",GridLines:"conflicts"},tags:["editor"]}),define.resource("experimentDescriptors.editorscripting",{createTime:"2000-01-01T01:43:00",owner:"Roman",description:"Add Scripting for editor components",tags:["editor","viewer"]}),define.resource("experimentDescriptors.errorlogonfooterfucks",{createTime:"2000-01-01T00:56:00",owner:"Roni",description:"throws an error log when the footer is deleted"}),define.resource("experimentDescriptors.escapedata",{createTime:"2000-01-01T00:39:00",owner:"Ido",description:"escape/html-encode characters from inputs to prevent data corruption"}),define.resource("experimentDescriptors.fcommentonallpages",{createTime:"2000-01-01T02:31:00",owner:"Noamsi",description:"Fix who-145, allow facebook comment to be shown on all pages.",tags:["viewer","editor"]}),define.resource("experimentDescriptors.facebookcommentfix",{createTime:"2000-01-01T00:55:00",owner:"Roni",description:"#WOH-1278 - fb warning appears when the y of fbComment is bigger than 10000"}),define.resource("experimentDescriptors.facebookshare",{createTime:"2000-01-01T01:47:00",owner:"Eitan & Galia",description:"FacebookShare component - share a wix website to facebook",constraints:{CustomPreviewBehavior:"required"},tags:["viewer","editor"]}),define.resource("experimentDescriptors.firstsave",{createTime:"2000-01-01T00:36:00",owner:"Tom",description:"Wait 20 minutes before popping the Save Dialog "}),define.resource("experimentDescriptors.firsttimevisitoreditoruipreview",{createTime:"2000-01-01T02:32:00",owner:"Tomer Lichtash",description:"Adding a FirstTimeVisitor state for EditorUI"}),define.resource("experimentDescriptors.fixmissingskins",{createTime:"2000-01-01T01:24:00",owner:"tombigel",description:"Fixes missing skins in site structure by filling in with a default skin from the SKINS data item.",tags:["viewer","editor"]}),define.resource("experimentDescriptors.fixtouchsupportbug",{createTime:"2000-01-01T01:20:00",owner:"Sivan",description:"fix the mobile recognition in the slider gallery to use modernizer",tags:["viewer","editor"]}),define.resource("experimentDescriptors.fixviewport",{createTime:"2000-01-01T02:53:00",owner:"Sivan",description:"disable scaling until page loads",constraints:{AddUserAgents:"required"},tags:["viewer","editor"]}),define.resource("experimentDescriptors.fontsproject",{createTime:"2000-01-01T00:01:00",owner:"Leeron",description:"Add more google fonts, character sets and fun!"}),define.resource("experimentDescriptors.footerheadertracking",{createTime:"2000-01-01T00:44:00",owner:"Denis",description:"Check Serialized data and report if there is no Header of Footer"}),define.resource("experimentDescriptors.gskinbutcher00",{createTime:"2000-01-01T02:35:00",owner:"Gush",description:"New skins: DoubleBorderScreen (WOH-1763), IronScreen (WOH-1532)",tags:["editor"]}),define.resource("experimentDescriptors.gskinbutcher01",{createTime:"2000-01-01T02:59:00",owner:"Gush",description:"New skins: GrangeFramePhoto (WOH-1760), ScotchTapeButton (WOH-1742)",tags:["editor"]}),define.resource("experimentDescriptors.galleryflick",{createTime:"2000-01-01T02:43:00",owner:"Noamsi",description:"Fix Slide Show Gallery Filckering issue",tags:["viewer"]}),define.resource("experimentDescriptors.getlikeurl",{createTime:"2000-01-01T01:48:00",owner:"Leonid",description:"Preview site from dashboard was not worked when site had contain facebook-like component."}),define.resource("experimentDescriptors.googlemapembedded",{createTime:"2000-01-01T02:29:00",owner:"galiak",description:"Google Map with embedded iframe",tags:["viewer","editor"]}),define.resource("experimentDescriptors.gridlines",{createTime:"2000-01-01T00:11:00",owner:"Roni",description:"grid lines which control the height and y of site segments"}),define.resource("experimentDescriptors.gridlines2",{createTime:"2000-01-01T00:12:00",owner:"Roni",description:"grid lines - Nadavs version"}),define.resource("experimentDescriptors.hidedraghandlefrompagecontainer",{createTime:"2000-01-01T03:07:00",owner:"LeoniJ",description:"Hide drag handle from the page container",tags:["editor"]}),define.resource("experimentDescriptors.highlightcomppanel",{createTime:"2000-01-01T02:06:00",owner:"Tom B.",description:"Highlight component panel when clicking on Settings in FPP."}),define.resource("experimentDescriptors.htmlparastorage",{createTime:"2000-01-01T00:46:00",owner:"Ido",description:"string replace static.wix.com to static.parastorage.com in html component"}),define.resource("experimentDescriptors.imageloadperformance",{createTime:"2000-01-01T02:39:00",owner:"Noamsi",description:"Collect and Report Images loading performance",tags:["viewer"]}),define.resource("experimentDescriptors.imageuploadbi",{createTime:"2000-01-01T02:16:00",owner:"Noamsi",description:"Add BI event for the Image upload flow",tags:["editor"]}),define.resource("experimentDescriptors.imagesfromtopology",{createTime:"2000-01-01T01:23:00",owner:"Ido, Denis",description:"Fixes flow for TopologyUrl appliance to get images from custom url"}),define.resource("experimentDescriptors.innerstylesfix",{createTime:"2000-01-01T00:28:00",owner:"alissav",description:"make style groups and styleId for skin parts work work",tags:["viewer","editor"]}),define.resource("experimentDescriptors.introvideodialog",{createTime:"2000-01-01T01:40:00",owner:"guyr",description:"New intro html instead of current help video",tags:["editor"]}),define.resource("experimentDescriptors.lazymasterpage",{createTime:"2000-01-01T02:11:00",owner:"Noam",description:"Load lazy the Footer and Header without blocking the pages load"}),define.resource("experimentDescriptors.lazypagebi",{createTime:"2000-01-01T02:47:00",owner:"Dromy",description:"Send different BI event on failure of Lazy page load"}),define.resource("experimentDescriptors.lazyshare",{createTime:"2000-01-01T00:14:00",owner:"Lichtash",description:""}),define.resource("experimentDescriptors.limitrecursiveddm",{createTime:"2000-01-01T01:19:00",owner:"Roy",description:"Fix WOH-1330: Too many blocking recursive calls in DropDownMenu and HorizontalMenu cause slow loading of some sites"}),define.resource("experimentDescriptors.linkrefdata",{createTime:"2000-01-01T02:30:00",owner:"Nir Moav",description:"New links experiment using only Reference Data.",tags:["editor"]}),define.resource("experimentDescriptors.linkedinfollow",{createTime:"2000-01-01T02:08:00",owner:"Mayah",description:"TPA Linkedin Follow",tags:["viewer","editor"]}),define.resource("experimentDescriptors.lockcomponent",{createTime:"2000-01-01T02:50:00",owner:"LeoniJ",description:"Lock elements in editor from changes"}),define.resource("experimentDescriptors.mcm",{createTime:"2000-01-01T00:08:00",owner:"Roni",description:"refactor - moving the component modification logic from ComponentEditBox to MouseComponentModifier "}),define.resource("experimentDescriptors.mainpagehash",{createTime:"2000-01-01T01:38:00",owner:"guyr",description:"No hash for the main page of the site"}),define.resource("experimentDescriptors.maximumcomponentheight",{createTime:"2000-01-01T02:15:00",owner:"leonid",description:"Maximum default Component height changed to 5000",tags:["viewer","editor"]}),define.resource("experimentDescriptors.mediagalleryframe",{createTime:"2000-01-01T00:10:00",owner:"Lichtash",description:"IFrame API for external Media Gallery in the editor"}),define.resource("experimentDescriptors.memberloginandprotectpageupgradebutton",{createTime:"2000-01-01T00:45:00",owner:"Leonid",description:"Adding upgrade button to site members panel - login button and protect page panel"}),define.resource("experimentDescriptors.mergebacktitleinsidepanel",{createTime:"2000-01-01T02:33:00",owner:"LeoniJ",description:"Fix Japanese Language Keys."}),define.resource("experimentDescriptors.miniposts",{createTime:"2000-01-01T03:02:00",owner:"nadav, tomr",description:"Miniposts functionality added to editor",constraints:{Blog:"required"}}),define.resource("experimentDescriptors.mobilebackground",{createTime:"2000-01-01T01:29:00",owner:"Sivan",description:"Mobile Background manipulations - POC - dont open",tags:["viewer","editor"]}),define.resource("experimentDescriptors.mobilebackgroundsize",{createTime:"2000-01-01T02:28:00",owner:"Sivan (for NirY)",description:"set maximum size of bg on mobile and tablet to 1000",constraints:{BackgroundSRZ:"required"},tags:["viewer","editor"]}),define.resource("experimentDescriptors.mobileecomviews",{createTime:"2000-01-01T01:50:00",owner:"Tanya",description:"New mobile views for product page and shopping cart",constraints:{MobileZoom:"required"}}),define.resource("experimentDescriptors.mobileeditor1",{createTime:"2000-01-01T03:00:00",owner:"tombigel",description:"Mobile editor first phase"}),define.resource("experimentDescriptors.mobilefontspoc",{createTime:"2000-01-01T01:30:00",owner:"Sivan",description:"Mobile Background manipulations - POC - dont open",tags:["viewer","editor"]}),define.resource("experimentDescriptors.mobilequickactions",{createTime:"2000-01-01T01:22:00",owner:"Denis Wolf",description:"editor panels for mobile quick actions data"}),define.resource("experimentDescriptors.mobilesitewidth",{createTime:"2000-01-01T02:54:00",owner:"sivan",description:"support mobile site width adjustments",constraints:{FixViewport:"required",MobileZoom:"required"},tags:["viewer","editor"]}),define.resource("experimentDescriptors.mobileslidergallery",{createTime:"2000-01-01T00:54:00",owner:"sivan",description:"support mobile gestures in the slider gallery",tags:["viewer","editor"]}),define.resource("experimentDescriptors.mobileviewerquickactions",{createTime:"2000-01-01T01:54:00",owner:"Sivan & Noam",description:"handle mobile quick actions after editor loading - requires server featrue toggle isMobileViewport:true",tags:["viewer"]}),define.resource("experimentDescriptors.mobilezoom",{createTime:"2000-01-01T00:53:00",owner:"Roni",description:"Zoom mode for mobile devices"}),define.resource("experimentDescriptors.nbc_horizontalline",{createTime:"2000-01-01T01:15:00",owner:"Nir M",description:"New BaseComponent Horizontal(FiveGridLine) Line!",constraints:{SyncWixify:"required"}}),define.resource("experimentDescriptors.nbc_sitebutton",{createTime:"2000-01-01T01:12:00",owner:"Roy",description:"a SiteButton that uses new base component",constraints:{SyncWixify:"required"}}),define.resource("experimentDescriptors.nbc_slideshowgallery",{createTime:"2000-01-01T01:18:00",owner:"Erez",description:"convert SlideShowGallery to new base component",constraints:{SyncWixify:"required"}}),define.resource("experimentDescriptors.nbc_verticalline",{createTime:"2000-01-01T01:14:00",owner:"Nir M",description:"New BaseComponent Vertical Line!",constraints:{SyncWixify:"required"}}),define.resource("experimentDescriptors.nbc_wcd",{createTime:"2000-01-01T00:48:00",owner:"Dromy",description:"New version of WComponentDeserializer"}),define.resource("experimentDescriptors.nbc_wcd_gridlines",{createTime:"2000-01-01T00:49:00",owner:"Dromy",description:"replace the change of the GridLines experiment on the WComponentDeserializer with changes that relevant to the new WCD",constraints:{SyncWixify:"required",GridLines:"required",NBC_WCD:"required"}}),define.resource("experimentDescriptors.nbc_wphoto",{createTime:"2000-01-01T01:13:00",owner:"Ido",description:"changes the WPhoto component to use the new base component",constraints:{SyncWixify:"required"}}),define.resource("experimentDescriptors.nbc_wrichtext",{createTime:"2000-01-01T01:16:00",owner:"Erez",description:"convert richtext to new base component",constraints:{SyncWixify:"required"}}),define.resource("experimentDescriptors.nativeuploadbutton",{createTime:"2000-01-01T00:40:00",owner:"Barak",description:"html5 native uploader in the media dialog"}),define.resource("experimentDescriptors.nativeuploadbuttonreversetoflash",{createTime:"2000-01-01T00:41:00",owner:"Barak",description:"reverse to flash for users that has",constraints:{NativeUploadButton:"required"}}),define.resource("experimentDescriptors.newbasecompfivegridline",{createTime:"2000-01-01T00:57:00",owner:"Sivan",description:"convert horizontal line to new base component",constraints:{SyncWixify:"required"}}),define.resource("experimentDescriptors.newfetchpolicy",{createTime:"2000-01-01T00:15:00",owner:"Dromi&Barak",description:"using the new fetch policy in the scriptLoader"}),define.resource("experimentDescriptors.newskinbatch060513",{createTime:"2000-01-01T02:38:00",owner:"galiak",description:"Includes: Horizontal & Vertical Iron Line (WOH-1780); Vintage Photo Frame (WOH-927)",tags:["editor"]}),define.resource("experimentDescriptors.noanchorsfromserver",{createTime:"2000-01-01T01:28:00",owner:"Roy",description:"Remove anchors from server"}),define.resource("experimentDescriptors.noredirectonfirstsave",{createTime:"2000-01-01T01:51:00",owner:"Dany",description:"Avoid page redirect on first site save, (and Use new server api for first (full) save).",tags:["editor"]}),define.resource("experimentDescriptors.notificationdialog",{createTime:"2000-01-01T01:08:00",owner:"Leonid",description:"added new dialog type, that could contain icon, show again checkbox and link to help wizard"}),define.resource("experimentDescriptors.pageduplicatelinksfix",{createTime:"2000-01-01T02:45:00",owner:"Nir Moav",description:"A fix for duplicated pages with texts that have links, which change the original links. #WOH-1060.",tags:["editor"]}),define.resource("experimentDescriptors.pageheightfix",{createTime:"2000-01-01T03:04:00",owner:"Noamsi",description:"Fix page height to fit minimum height of last component without gaps",tags:["editor","viewer"]}),define.resource("experimentDescriptors.pageloadreport",{createTime:"2000-01-01T02:10:00",owner:"Ido&Nadav&Alissa&Laufer",description:"add a very ugly page loading info report and send to BI"}),define.resource("experimentDescriptors.partialcomponentpreview",{createTime:"2000-01-01T00:09:00",owner:"Lichtash",description:"Partially previews a component in Editing Mode (for clickthrough)"}),define.resource("experimentDescriptors.pinterestpincomponent",{createTime:"2000-01-01T01:32:00",owner:"Erez & Eitan",description:"New Pinterest pin button component",constraints:{CustomPreviewBehavior:"required"}}),define.resource("experimentDescriptors.postmediaload",{createTime:"2000-01-01T03:03:00",owner:"idoro",description:"Loads the private/public media in the editor at post deploy instead of init",tags:["editor"]}),define.resource("experimentDescriptors.postsignupurlparam",{createTime:"2000-01-01T01:41:00",owner:"guyr",description:"Add context url param to post signup links from Wix landing pages"}),define.resource("experimentDescriptors.premiumwixads",{createTime:"2000-01-01T00:37:00",owner:"Tom",description:"Monetize WixAds in Preview Mode, ASK OMER!!! "}),define.resource("experimentDescriptors.previewrefactor",{createTime:"2000-01-01T02:41:00",owner:"Alissa",description:"enable multiple privews"}),define.resource("experimentDescriptors.publishmarketingbanner.sale",{createTime:"2000-01-01T00:42:00",owner:"xxxx",description:"in publish dialog show the sale marketing banner"}),define.resource("experimentDescriptors.quickactionshidesubpagesofhiddenparent",{createTime:"2000-01-01T02:40:00",owner:"Sivan",description:"If parent page is  hidden its sub pages should not be in the quick actions menu either",constraints:{MobileViewerQuickActions:"required"},tags:["viewer"]}),define.resource("experimentDescriptors.quickactionsmenus",{createTime:"2000-01-01T02:48:00",owner:"D. Wolf",description:"Build pages menu in a new way, as list, not select",constraints:{MobileViewerQuickActions:"required",QuickActionsHideSubPagesOfHiddenParent:"required"}}),define.resource("experimentDescriptors.rtblanktext",{createTime:"2000-01-01T00:29:00",owner:"noamsi",description:"add try catch around open/close of RT",constraints:{RichText2:"required"},tags:["editor"]}),define.resource("experimentDescriptors.refreshframeontransition",{createTime:"2000-01-01T01:55:00",owner:"Lichtash",description:"Refresh HTMLComponent Iframe on page transition"}),define.resource("experimentDescriptors.removepromotiontocreatefacebookpage",{createTime:"2000-01-01T01:35:00",owner:"Leonid (LeoniJJ for you)",description:"Remove the promotion to create a facebook page in the post-publish panel, for premium users"}),define.resource("experimentDescriptors.removetwitterfeed",{createTime:"2000-01-01T02:44:00",owner:"Tagger",description:"Since Twitter deprecated the API we're working with, first of all, remove their feed"}),define.resource("experimentDescriptors.renamepages",{createTime:"2000-01-01T00:07:00",owner:"Mayah",description:"Add Rename Pages action to the menu component FPP",constraints:{PartialComponentPreview:"conflicts"}}),define.resource("experimentDescriptors.renderperf",{createTime:"2000-01-01T01:56:00",owner:"Jiri",description:"Improves performance of wixapps content rendering"}),define.resource("experimentDescriptors.responsive1",{createTime:"2000-01-01T02:42:00",owner:"Roni",description:"Basic responsive algorithm, for conversion of sites to mobile sites"}),define.resource("experimentDescriptors.richtext2",{createTime:"2000-01-01T00:27:00",owner:"alissav",description:"style values in drop downs as default + refactor",tags:["viewer","editor"]}),define.resource("experimentDescriptors.richtextmigrationstudio",{createTime:"2000-01-01T00:32:00",owner:"Alissa",description:"text component migration for Studio use",tags:[]}),define.resource("experimentDescriptors.richtextpresets",{createTime:"2000-01-01T00:26:00",owner:"alissav",description:"add line height presets",tags:["viewer","editor"]}),define.resource("experimentDescriptors.richtexttoolbar",{createTime:"2000-01-01T00:30:00",owner:"Alissa",description:"writable drop downs + default color",constraints:{RichText2:"required",InnerStylesFix:"required"},tags:["viewer","editor"]}),define.resource("experimentDescriptors.seoescape",{createTime:"2000-01-01T03:06:00",owner:"Noamsi",description:"Allow escape charecters in the SEO Panel",tags:["editor","viewer"]}),define.resource("experimentDescriptors.smforgot_password",{createTime:"2000-01-01T02:04:00",owner:"Nir",description:"Forgotten password reset on Site Members login.",constraints:{SiteMembersCommon:"required"},tags:["viewer"]}),define.resource("experimentDescriptors.smmemberaccesslimit",{createTime:"2000-01-01T01:52:00",owner:"Nir Moav",description:"Limits the access to members that logged-in in the past, and access rights have changed in the meantime.",tags:["viewer"]}),define.resource("experimentDescriptors.smownerlogoutfix",{createTime:"2000-01-01T01:58:00",owner:"Nir Moav",description:"SiteMemberManager Site Owner Logout Action fix #WOH-2108",tags:["viewer"]}),define.resource("experimentDescriptors.smpasswordpoundcharfix",{createTime:"2000-01-01T02:03:00",owner:"Nir Moav",description:"SiteMemberManager validation for Non-Ascii characters in password.",constraints:{SiteMembersCommon:"required"},tags:["viewer"]}),define.resource("experimentDescriptors.savesuccessdialoghide2",{createTime:"2000-01-01T01:09:00",owner:"Leonid",description:"added dont show again checkbox using new notification dialog",constraints:{NotificationDialog:"required"}}),define.resource("experimentDescriptors.settingsmenuselectionfix",{createTime:"2000-01-01T02:25:00",owner:"Nir Moav",description:"Fix for WOH-2424 selection of items in the settings menu when switching and closing.",tags:["editor"]}),define.resource("experimentDescriptors.showonemnmessage",{createTime:"2000-01-01T00:43:00",owner:"xxxx",description:"in publish dialog show one mn message in case the site revision has not been updated on all servers"}),define.resource("experimentDescriptors.siteadressopenhelp",{createTime:"2000-01-01T02:19:00",owner:"LeoniJ",description:"SiteAdressOpenHelp"}),define.resource("experimentDescriptors.sitejumpfix",{createTime:"2000-01-01T02:09:00",owner:"Nir Moav",description:"A fix for the sites jumping 1px after loading. WOH-2638.",tags:["viewer"]}),define.resource("experimentDescriptors.sitememberscommon",{createTime:"2000-01-01T02:02:00",owner:"Nir Moav",description:"Common code for Site Members features.",tags:["viewer"]}),define.resource("experimentDescriptors.siteversion",{createTime:"2000-01-01T01:31:00",owner:"Leeron",description:"Use site version when loading, saving, publishing, restoring local changes, etc."}),define.resource("experimentDescriptors.sliderautoplay",{createTime:"2000-01-01T00:35:00",owner:"xxxx",description:""}),define.resource("experimentDescriptors.spanishpromotion",{createTime:"2000-01-01T02:05:00",owner:"Leonij",description:"SEO Wizard link in Spanish editor."}),define.resource("experimentDescriptors.staff.wix",{createTime:"2000-01-01T00:02:00",owner:"xxxx",description:"For Studio use only"}),define.resource("experimentDescriptors.staticbloburl",{createTime:"2000-01-01T02:26:00",owner:"Noamsi",description:"Change the wix blob url to use the service topology blobUrl param",tags:["viewer","editor"]}),define.resource("experimentDescriptors.storemanagerpopupwidth",{createTime:"2000-01-01T01:59:00",owner:"Tanya",description:"changes the store manager window width"}),define.resource("experimentDescriptors.stylepercomponent",{createTime:"2000-01-01T00:50:00",owner:"tombigel",description:"Style per Component step 1: Refactor style selection button",tags:["viewer","editor"]}),define.resource("experimentDescriptors.svgshapecomponent",{createTime:"2000-01-01T02:36:00",owner:"EitanR",description:"New SVG Shape component to support various shapes and figures"}),define.resource("experimentDescriptors.syncwixify",{createTime:"2000-01-01T00:38:00",owner:"Sivan & Ido",description:"Make wixify work sync - part of the base component refactor",constraints:{NBC_WCD:"required"}}),define.resource("experimentDescriptors.tpa3dgallery",{createTime:"2000-01-01T02:17:00",owner:"Barak",description:"TPA 3D Gallery",tags:["viewer","editor"]}),define.resource("experimentDescriptors.tpaartifact",{createTime:"2000-01-01T02:18:00",owner:"Barak",description:"Move the TPA to new Artifact",tags:["viewer","editor"]}),define.resource("experimentDescriptors.tpaextensions",{createTime:"2000-01-01T00:05:00",owner:"Mayah",description:"App extensions - allow app to have few parts",tags:["editor","viewer"]}),define.resource("experimentDescriptors.tpaglued",{createTime:"2000-01-01T01:27:00",owner:"Gil O.",description:"Glued widgets for TPA",tags:["viewer","editor"]}),define.resource("experimentDescriptors.tpanewsettings",{createTime:"2000-01-01T00:04:00",owner:"Mayah",description:"New setting panel layout",tags:["editor"]}),define.resource("experimentDescriptors.tpapremium.picker",{createTime:"2000-01-01T00:06:00",owner:"Mayah",description:"package picker for apps",tags:["editor"]}),define.resource("experimentDescriptors.tpascript",{createTime:"2000-01-01T01:42:00",owner:"Roman",description:"Add Scripting for tpa",tags:["viewer","editor"]}),define.resource("experimentDescriptors.tinymenu",{createTime:"2000-01-01T03:01:00",owner:"denisw",description:"Mobile viewer pages menu"}),define.resource("experimentDescriptors.twitterapipatch",{createTime:"2000-01-01T01:17:00",owner:"Leonid",description:"override twitterFeed with new twitter API"}),define.resource("experimentDescriptors.urm5",{createTime:"2000-01-01T00:24:00",owner:"Shahar",description:"undo for wixapps (including ecommerce)"}),define.resource("experimentDescriptors.vkshare",{createTime:"2000-01-01T01:37:00",owner:"Roman, Guy",description:"New component for VK Share button",constraints:{CustomPreviewBehavior:"required"},tags:["editor","viewer"]}),define.resource("experimentDescriptors.walkme",{createTime:"2000-01-01T00:34:00",owner:"Sivan",description:"WalkMe Button in the top bar",tags:["editor"]}),define.resource("experimentDescriptors.warningoutofgrid",{createTime:"2000-01-01T01:10:00",owner:"Leonid",description:"Add popup message about placing elements outside the Grid",constraints:{NotificationDialog:"required"}}),define.resource("experimentDescriptors.wixappsapplicationdata",{createTime:"2000-01-01T02:51:00",owner:"Tanya",description:"Application variables - persistent data per application"}),define.resource("experimentDescriptors.wixappscontentresize",{createTime:"2000-01-01T02:57:00",owner:"Jiri",description:"Fixes incorrect resize of the AppPart comp WIXAPPS-1264"}),define.resource("experimentDescriptors.wixappsdirection",{createTime:"2000-01-01T00:25:00",owner:"Amit K",description:"Supporting direction (RTL) for App Parts"}),define.resource("experimentDescriptors.wixappslayoutfixes",{createTime:"2000-01-01T02:00:00",owner:"Jiri",description:"Several fixes of the layout (the infamous flexbox)"}),define.resource("experimentDescriptors.wixappspage",{createTime:"2000-01-01T00:16:00",owner:"Mimran",description:"Wix Apps (AKA Lists) Application Page"}),define.resource("experimentDescriptors.wixcheckoutpage.popup",{createTime:"2000-01-01T02:14:00",owner:"Tanya",description:"proof-of-concept for the checkout page"}),define.resource("experimentDescriptors.wixcheckoutpage",{createTime:"2000-01-01T02:13:00",owner:"Tanya",description:"proof-of-concept for the checkout page"}),define.resource("experimentDescriptors.bionfirstsaveprovision",{createTime:"2000-01-01T02:07:00",owner:"LeoniJ",description:"added provision start/end events"}),define.resource("experimentDescriptors.it.run",{createTime:"2000-01-01T02:34:00",owner:"Dany",description:"Enables Jasmine integration testing. (WOH-2715). [Permanent Experiment].",tags:["viewer","editor"]}),define.resource("experimentDescriptors.nopaddingbox",{createTime:"2000-01-01T01:11:00",owner:"Tom B",description:"Remove padding around ComponentEditBox",constraints:{GridLines:"conflicts"}}),define.resource("experimentDescriptors.safari5menufix",{createTime:"2000-01-01T03:08:00",owner:"shaik",description:"fix WOH-3061 : Menu buttons is not showing on older versions of Safari browser",tags:["viewer","editor"]}),define.Const("CoreClasses",{HIDDEN:"hidden"}),define.Const("CoreEvents",{CLICK:"click",KEY_DOWN:"keydown",KEY_UP:"keyup",KEY_PRESS:"keypress",COPY:"copy",CUT:"cut",BLUR:"blur",FOCUS:"focus",PASTE:"paste",MOUSE_OVER:"mouseover",MOUSE_OUT:"mouseout",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_MOVE:"mousemove",MOUSE_WHEEL:"mousewheel",CHANGE:"change",INPUT:"input",RESIZE:"resize",SCROLL:"scroll"}),define.Const("DisplayEvents",{ADDED_TO_DOM:"insertedToDOM",REMOVED_FROM_DOM:"removedFromDOM",DISPLAYED:"displayed!",COLLAPSED:"collapsed!",DISPLAY_CHANGED:"displayed?",MOVED_IN_DOM:"movedInDOM",SKIN_CHANGE:"skinChange"}),define.bootstrapClass("bootstrap.extendnative.Array",function(){return Array.implement({moveItem:function(a,b){var c=this[a];
0>b&&(b=0),b>this.length-1&&(b=this.length-1),this.splice(a,1),this.splice(b,0,c)},getIndexByField:function(a,b){for(var c=0,d=this.length;d>c;c++)if(this[c][a]==b)return c;return-1},getByField:function(a,b){var c=this.getIndexByField(a,b);return c>=0?this[c]:void 0},indexOfByPredicate:function(a){for(var b=0;b<this.length;b++)if(a(this[b]))return b;return-1},intersect:function(a,b){return this.filter(function(c){return a.some(function(a){return b?b(c,a):c===a})})},isIntersecting:function(a,b){return this.some(function(c){return a.some(function(a){return b?b(c,a):c===a})})},first:function(a){for(var b=null,c=0;!b&&c<this.length;c++)a(this[c])&&(b=this[c]);return b},eraseWithPredicate:function(a){var b=this.filter(a);return b.forEach(function(a){this.erase(a)},this),this},toMap:function(a){for(var b={},c=0;c<this.length;c++){var d=a(this[c],c,this);b[d]=this[c]}return b}}),Array.isArray||Array.implement({isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)}}),Array}),define.bootstrapClass("bootstrap.extendnative.Element",function(){return Element.implement({cleanup:function(){var a=$(this.parentNode);a&&a.removeEvents(Constants.DisplayEvents.ADDED_TO_DOM)},insertInto:function(a,b,c){if(!a)return LOG.reportError(wixErrors.CM_NULL_PARENT,"Element","insertInto"),this;if(!b&&this.getParent()===a)return this;var d=$(a);if(d.grab(this,b),("before"==b||"after"==b)&&(a=a.parentNode,null===a))return LOG.reportError(wixErrors.CM_NULL_PARENT,"Element","insertInto"),this;var e=Constants.DisplayEvents.ADDED_TO_DOM;return this.getLogic&&this.getLogic().getIsDisplayed()&&(e=Constants.DisplayEvents.MOVED_IN_DOM),c=c||e,this.isNodeDisplayed()&&this.fireEventRecursively(Constants.DisplayEvents.ADDED_TO_DOM,c),this},fireEventRecursively:function(a,b,c){this.fireEvent(a,b,c);for(var d=this.getChildren(),e=0;e<d.length;e++){var f=d[e];f.fireEventRecursively&&f.fireEventRecursively(a,b,c)}},removeFromDOM:function(){var a=this.isNodeDisplayed();if(this.parentNode){var b=$(this.parentNode);b&&b.removeEvent(Constants.DisplayEvents.ADDED_TO_DOM,this._insertedToDOMCB),this.dispose()}a&&this._onDisplayChangedEvent(Constants.DisplayEvents.REMOVED_FROM_DOM,0)},setCollapsed:function(a){a?this.collapse():this.uncollapse()},toggleCollapsed:function(){return this.hasClass(Constants.CoreClasses.HIDDEN)?this.uncollapse():this.collapse(),this},collapse:function(){return!1===this.hasClass(Constants.CoreClasses.HIDDEN)&&(this.addClass(Constants.CoreClasses.HIDDEN),this._onDisplayChangedEvent(Constants.DisplayEvents.COLLAPSED,0)),this},uncollapse:function(a){return this.hasClass(Constants.CoreClasses.HIDDEN)&&(this.removeClass(Constants.CoreClasses.HIDDEN),a&&this.addClass(a),this._onDisplayChangedEvent(Constants.DisplayEvents.DISPLAYED,0)),this},triggerDisplayChanged:function(){this._onDisplayChangedEvent(Constants.DisplayEvents.DISPLAY_CHANGED,0)},isConnectedToDOM:function(){for(var a=this,b=document.documentElement;a;){if(a.documentElement==b)return!0;a=a.parentNode}return!1},isCollapsed:function(){for(var a=document.documentElement,b=this;b;){if(a==b.documentElement)return!1;b.style;var c=b.getStyle("display");if("none"==c||b.hasClass("hidden"))return!0;b=b.parentNode}return!1},isNodeDisplayed:function(){var a=this;for(document.documentElement;a;){if("document"==typeOf(a))return!0;var b=$(a);if(!b)return!1;var c=b.getStyle("display");if("none"==c||b.hasClass("hidden"))return!1;a=a.parentNode}return!1},_onDisplayChangedEvent:function(a){var b,c,d,e;if(this.getElementsByTagName)if(b=this.getElementsByTagName("*")||[],Browser.ie)if(Array.slice)b=Array.slice(b);else{for(d=[],c=b.length-1;c>=0;--c)d[c]=b[c];b=d}else b=Array.prototype.slice.call(b);else b=this.getElements("*")||[];for(c=0,e=b.length;e>c;++c)try{d=b[c],d.fireEvent&&d.fireEvent(a,a)}catch(f){this._reportUnknownError(f)}try{this.fireEvent(a,a)}catch(g){this._reportUnknownError(g)}},_reportUnknownError:function(a){var b=this&&this.getLogic&&this.getLogic()&&this.getLogic()._editedComponent&&this.getLogic()._editedComponent.$className||"no component name",c=a&&a.message||"no message",d=wixErrors.UNKNOWN_ERROR;d.ignore=!0,LOG.reportError(d,"Element.js",b,c)},_insertedToDOM:function(a){this.fireEvent(Constants.DisplayEvents.ADDED_TO_DOM,a)},getContentRect:function(a){a=a||$$("body")[0];var b=this.getCoordinates(a);return this.getElements("div").forEach(function(c){if(c.isVisible()===!0&&c.isDisplayed()===!0){var d=c.getCoordinates(a);d.left<b.left&&(b.left=d.left),d.right>b.right&&(b.right=d.right),d.top<b.top&&(b.top=d.top),d.bottom>b.bottom&&(b.bottom=d.bottom)}}),b.width=b.right-b.left,b.height=b.bottom-b.top,b},_insertedToDOMCB:null}),Element.NativeEvents.cut=2,Element.NativeEvents.paste=2,Element.Events.paste={base:"paste",condition:function(a){return this.fireEvent(Constants.CoreEvents.PASTE,a,1),!1}},Element.Events.cut={base:"cut",condition:function(a){return this.fireEvent(Constants.CoreEvents.CUT,a,1),!1}},Element}),Object.isEquivalent=function(a,b){if(typeof a!=typeof b)return!1;if(a instanceof Array&&!(b instanceof Array))return!1;if("string"==typeof a||"number"==typeof a||"boolean"==typeof a||"function"==typeof b)return a===b;var c=0,d=a instanceof Array;if(d){var e=function(a,c){return Object.isEquivalent(a,b[c])};return a.length==b.length&&a.every(e,b)}for(var f in a){if(a.hasOwnProperty(f)&&!b.hasOwnProperty(f))return!1;++c}for(f in b)b.hasOwnProperty(f)&&c--;if(0!==c)return!1;for(f in a)if(a.hasOwnProperty(f)&&!Object.isEquivalent(a[f],b[f]))return!1;return!0},define.Class("bootstrap.managers.BaseManager",function(a){var b=a;b.inherits("bootstrap.utils.Events"),b.methods({isReady:function(){return!0},clone:function(a){var b,c=this.$className;if(a.getResourceFetcher().getResourceValue("W.Classes",function(a){a.getClass(c,function(a){b=new a})}),!b)throw new Error("clone failed: "+c);return b}})}),define.Class("bootstrap.managers.InputBindings",function(a){var b=a;b.inherits("bootstrap.managers.BaseManager"),b.binds(["isStopCallback"]),b.methods({initialize:function(){this._listener=Mousetrap;try{this._listener.unpause()}catch(a){console.error("throw new Error('Mousetrap not loaded');")}},isReady:function(){return!0},clone:function(){return new this.$class},addBinding:function(a,b,c){if(b=b||{},a){var d=c?"bindGlobal":"bind",e=b.keypressType,f=b.command,g=b.commandParameter;!f&&b.commandName&&(f=W.Commands.getCommand(b.commandName)),this._listener[d](a,function(a,b){return f&&f.isEnabled()&&(a.combo=b,f.execute(g,a)),a.preventDefault(),a.stopPropagation(),!1},e)}},removeBinding:function(a,b){this._listener.unbind(a,b)},setKeysEnabled:function(a){a?this._listener.unpause():this._listener.pause()},getKeysEnabled:function(){return this._listener.isEnabled()},isStopCallback:function(a,b,c,d){return this._listener.stopCallback(a,b,c,d)}})}),define.bootstrapClass("bootstrap.managers.classmanager.ClassDefinition",function(){"use strict";function a(){this.$constructor=a,this._extends_=void 0,this._binds_=void 0,this._traits_=void 0,this._statics_=void 0,this._fields_={},this._methods_={},this._imports_=void 0,this._resources_=void 0,this._onClassReadyFunc_=void 0,this._inheritStrategy_=new b}var b=this.define.getBootstrapClass("bootstrap.managers.classmanager.InheritStrategy");return a.extendPrototype({InheritStrategy:b,inherits:function(a){this._extends_=a},binds:function(a){this._binds_=a},traits:function(a){this._traits_=a},statics:function(a){"function"==typeof a&&LOG.reportError(wixErrors.INVALID_STATICS_PARAM,"classDefinition","statics"),this._statics_=a},fields:function(a){"function"==typeof a&&LOG.reportError(wixErrors.INVALID_FIELDS_PARAM,"classDefinition","fields"),this._fields_=a},methods:function(a){"function"==typeof a&&LOG.reportError(wixErrors.INVALID_METHODS_PARAM,"classDefinition","methods"),this._methods_=a},resources:function(a){this._resources_=a},utilize:function(a){this._imports_=a},onClassReady:function(a){this._onClassReadyFunc_=a}}),a}),define.bootstrapClass("bootstrap.managers.classmanager.ClassManager",function(){function a(){}return a.extendPrototype({init:function(){var a=this;return resource.getResources(["scriptLoader","W.Experiments"],function(b){var c=b.scriptLoader;a._experimentManager=b.W.Experiments;var d=a.define.getBootstrapClass("bootstrap.managers.classmanager.ClassDefinition");a._classRepo=a.define.createBootstrapClassInstance("bootstrap.managers.classmanager.ClassRepository").init(c,a),a._classParser=a.define.createBootstrapClassInstance("bootstrap.managers.classmanager.ClassParser").init(a._classRepo,d,a._experimentManager),a.define.Class.definitionModifier=a._onClassDefineCallBack.bind(a)}),this},addClassNamespaceHook:function(a){this._classRepo.classNamespacesHooks.push(a)},addClassReadyHandler:function(a){this._classRepo.classReadyHandlers.push(a)},loadMissingClasses:function(){this._classRepo.loadMissingClasses()},getClass:function(a,b){var c=this._classRepo.getClassStatus(a);if("ready"==c){var d=this._classRepo.getClass(a);return b&&b(d),d}this._getNotReadyClass(a,c,b)},_getNotReadyClass:function(a,b,c){switch(this._classRepo.addToWaitingForReady(a,c),b){case"loaded":var d=this.define.getDefinition("Class"),e=nsUtil.getNameSpace(d,a),f=this._classParser.registerNewClass(a,e);f&&f.length>0&&this._getClassDependencies(f);break;case"missing":this._classRepo.addClassesToScriptLoadingQueue([a])}},_getClassDependencies:function(a){for(var b=0;b<a.length;b++){var c=this._classRepo.getClassStatus(a[b]);"ready"!=c&&this.getClass(a[b])}},registerClassDefinition:function(a,b){var c=this._classParser.registerClassDefinition(a,b);c&&c.length>0&&this._getClassDependencies(c)},get:function(a,b){return this.getClass(a,b)},_onClassDefineCallBack:function(a,b){return this._classRepo.isClassWaitingForReady(a)&&this._classParser.registerNewClass(a,b),b},override:function(a,b){this._classRepo.override(a,b)},overrideDependency:function(a,b){return this._classParser.override(a,b)},getClassStatus:function(a){return this._classRepo.getClassStatus(a)},getClassStatusDetails:function(a){return this._classRepo.getClassStatusDetails(a)},newClass:function(a){return this._classRepo.getClass(a.name)?(LOG.reportError(wixErrors.CLASS_ALREADY_EXIST,this.className,"newClass",a.name),void 0):(this._classParser.registerClass(Object.clone(a)),this.getClass(a.name))},newTrait:function(a){a.Class=a.trait,delete a.trait,this.newClass(a)},newClasses:function(a){Object.forEach(a,this.newClass.bind(this))},_getClassDataErrorCode:function(a){this._classParser._getClassDataErrorCode(a)},removeClass:function(a){this._classRepo.deleteClass(a)},isReady:function(){return this._classRepo&&this._classRepo.isReady()},clone:function(a){var b=a.createBootstrapClassInstance("bootstrap.managers.classmanager.ClassManager",[]),c=a.getBootstrapClass("bootstrap.managers.classmanager.ClassDefinition");return b._classRepo=this._classRepo.clone(a),a.getResourceFetcher().getResourceValue("W.Experiments",function(d){b._experimentManager=d,b._classParser=a.createBootstrapClassInstance("bootstrap.managers.classmanager.ClassParser",[b._classRepo,c,b._experimentManager])}),b}}),a}),define.bootstrapClass("bootstrap.managers.classmanager.ClassParser",function(){function a(){this.registerClass=this.registerClass.bind(this)}return a.extendPrototype({init:function(a,b,c){return this._repository=a,this._overrides={},this.ClassDefinition=b,this._experimentManager=c,this},override:function(a,b){this._overrides[a]=this._overrides[a]||[];var c=this._overrides[a].length?this._overrides[a].getLast():a;return this._overrides[a].push(b),c},registerNewClass:function(a,b){var c=new this.ClassDefinition;return b(c,c._inheritStrategy_),c=this._experimentManager.applyExperiments(a,c),this.registerClassDefinition(a,c)},registerClassDefinition:function(a,b){var c=this._transformClassDefToClassData(a,b);return c._classDef_=b,this.registerClass(c)},registerClass:function(a){if(!this._checkClassRegistraionErrors(a)){var b=this._getItemDependencies(a);this._registerDependencies(b);var c=this._repository.areClassesReady(b);if(!c)return this._repository.registerDependentClass(b,this.registerClass,a),b;this._prepClassData(a);var d=this._prepResources(a);if(d&&d.length){var e=this;a.Class.Resources=d,resource.getResources(d,function(b){a.Class.$Resources=b,e._createAndRegisterWClass(a)})}else this._createAndRegisterWClass(a)}},_createAndRegisterWClass:function(a){var b=new WClass(a.Class,a.name);b._classDef_=a._classDef_,a.Class.Extends&&this._overrideClassObjectFields(b.prototype.Extends.prototype,b.prototype),this._repository.registerClass(b),a.onClassReady&&a.onClassReady(b)},_checkClassRegistraionErrors:function(a){var b=this._getClassDataErrorCode(a);return b?(LOG.reportError(wixErrors.CLASS_INVALID_PENDING_OBJECT,a&&a.name||"Unknown class","class data validation",b),!0):void 0},_registerDependencies:function(a){for(var b=this.define.getDefinition("Class"),c=0;c<a.length;++c){var d=a[c];if("loaded"===this._repository.getClassStatus(d)){var e=nsUtil.getNameSpace(b,d);this.registerNewClass(d,e)}}},_getFullNotReadyDependencyList:function(a,b,c){for(var c=c||{},d=0;d<b.length;d++){var e=b[d];if(e!==a&&!c[e]){var f=this._repository.getClassWaitingDependencies(e);if(f){for(var g=[],h=0;h<f.length;h++)this._repository.isClassReady(f[h])||g.push(f[h]);g.length>0&&(c[e]=g,this._getFullNotReadyDependencyList(a,g,c))}return c}}},_checkReadyRamificationsOnDependencies:function(a,b){for(var c in b)for(var d=b[c],e=0;e<d.length;e++){var f=d[e];if(!b[f]&&a!==f)return!1}return!0},_transformClassDefToClassData:function(a,b){var c={name:a,traits:b._traits_,imports:b._imports_,onClassReady:b._onClassReadyFunc_,Class:{Resources:b._resources_,Extends:b._extends_,Binds:b._binds_,Static:b._statics_}};for(var d in b._methods_){var e=b._methods_[d];c.Class[d]=e}for(var f in b._fields_){var g=b._fields_[f];c.Class[f]=g}return c},_overrideClassObjectFields:function(a,b){for(var c in b)if(b.hasOwnProperty(c)){var d,e=b[c];if(e instanceof Function&&e.mergeFlag){if(e=e(),"object"==typeOf(e)){d=Object.clone(a[c]);for(var f in e)e.hasOwnProperty(f)&&(void 0===e[f]?delete d[f]:d[f]=e[f])}else"array"==typeOf(e)&&(d=a[c].clone(),d.combine(e));b[c]=d}else if(e&&e.cloneFlag){var g=a[c];"object"==typeOf(g)?d=Object.clone(a[c]):"array"==typeOf(g)?d=a[c].clone():"string"==typeOf(g)&&(d=a[c]),b[c]=d}else e&&e.beforeFlag?function(){var d=a[c],f=e();b[c]=function(){f.apply(this,arguments),d.apply(this,arguments)}}():e&&e.aroundFlag?function(){var d=c,f=a[c],g=e();b[c]=function(){var a=this,c=Array.prototype.splice.call(arguments,0),e=!1;c.splice(0,0,function(){return e=!0,f.apply(a,c.slice(1))});var h=g.apply(this,c);return e||LOG.reportError(wixErrors.EXPERIMENT_INVALID_MODIFY+" - Original method was not called",b.className,d,c.slice(1)),h}}():e&&e.afterFlag&&function(){var d=a[c],f=e();b[c]=function(){d.apply(this,arguments),f.apply(this,arguments)}}()}},_getItemDependencies:function(a){var b=[];return a.Class&&a.Class.Extends&&b.combine(this._extractStringsOnlyArray(a.Class.Extends)),a.imports&&b.combine(this._extractStringsOnlyArray(a.imports)),a.traits&&b.combine(this._extractStringsOnlyArray(a.traits)),b=this._replaceDependenciesWithOverrides(a.name,b)},_replaceDependenciesWithOverrides:function(a,b){return Object.keys(this._overrides).length&&Array.each(b,function(c,d){if(this._overrides[c]){var e=this._overrides[c].length-1,f=this._overrides[c].indexOf(a);f>=0&&(e=f?f-1:0),this._overrides[c][e]!=a&&(b[d]=this._overrides[c][e])}}.bind(this)),b},_extractStringsOnlyArray:function(a){return"string"==typeOf(a)?[a]:"array"==typeOf(a)?a.filter(this._isString):[]},_isString:function(a){return"string"==typeOf(a)},_prepClassData:function(a){a=this._prepClassExtends(a),a=this._prepClassTraits(a),a=this._prepClassImports(a);var b=window.W;return a.Class.injects=function(){return b},a.Class.define=this.define,a.Class.resource=this.resource,a},_prepClassExtends:function(a){return a.Class.Extends&&"string"==typeOf(a.Class.Extends)&&(a.Class.Extends=this._repository.getClass(a.Class.Extends)),a},_prepClassTraits:function(a){if(a.traits){a.Class.Implements=[];for(var b=0;b<a.traits.length;b++){var c=a.traits[b];a.Class.Implements.push(this._repository.getClass(c))}}return a},_prepClassImports:function(a){var b,c=a.Class.Extends,d=c&&c.prototype&&c.prototype.imports;if(b=d?Object.clone(c.prototype.imports):{},a.imports)for(var e=0;e<a.imports.length;e++){var f=a.imports[e],g=f.split(".").getLast();b[g]?b[f]=this._repository.getClass(f):b[g]=this._repository.getClass(f)}if(a.Class.imports=b,a.Class.Implements)for(var h=0;h<a.Class.Implements.length;++h){if(!a.Class.Implements[h])return a;var i=a.Class.Implements[h].prototype;i&&i.imports&&(a.Class.imports||(a.Class.imports=[]),Object.merge(a.Class.imports,i.imports))}return a},_prepResources:function(a){var b=a.Class.Resources||[],c=a.Class.Extends,d=c&&c.prototype&&c.prototype.Resources;if(d=d?Array.clone(c.prototype.Resources):[],b=Array.combine(b,d),a.Class.Implements)for(var e=0;e<a.Class.Implements.length;++e){var f=a.Class.Implements[e].prototype;f&&f.Resources&&(b=Array.combine(b,f.Resources))}return b},_getClassDataErrorCode:function(a){return a&&"object"===typeOf(a.Class)?a.name&&instanceOf(a.name,String)?this._isValidClassName(a.name)?a.Extends&&"string"!=typeOf(a.Extends)?"Extends must be a string":a.imports&&!this._isStringArray(a.imports)?"Invalid imports array":a.traits&&!this._isStringArray(a.traits)?"Invalid traits array":!1:"Invalid class name: "+a.name:"No class name":"No class data was found"},_isValidClassName:function(a){for(var b=a.split("."),c=b.length-1,d=0;c>d;d++){if(0===b[d].length)return!1;if(!b[d].test(/^[a-z][a-z0-9_]*$/))return!1}return b[c].test(/^[A-Z][A-Za-z0-9_]*$/)?!0:!1},_isStringArray:function(a){return"array"!=typeOf(a)?!1:a.every(function(a){return"string"==typeOf(a)})}}),a}),define.bootstrapClass("bootstrap.managers.classmanager.ClassRepository",function(){function a(){this.loadMissingClasses=this.loadMissingClasses.bind(this)}return a.extendPrototype({init:function(a,b){return this._readyClasses={},this._waitingForDependencies={},this._waitingForClassReady={},this._scriptLoadingQueue=[],this._scriptLoader=a,this._loadingMissingClassesStarted=!!b,this._loadingMissingClassesTimer=null,this.classNamespacesHooks=[],this.classReadyHandlers=[],this},getClass:function(a){return this._readyClasses[a]||null},getClassWhenReady:function(a,b){return this.isClassReady(a)?(b&&b(this.getClass(a)),this.getClass(a)):(this.isClassLoaded(a)||this.addClassesToScriptLoadingQueue([a]),this._waitingForClassReady[a]||(this._waitingForClassReady[a]=[]),b&&this._waitingForClassReady[a].push(b),void 0)},addToWaitingForReady:function(a,b){this._waitingForClassReady[a]||(this._waitingForClassReady[a]=[]),b&&this._waitingForClassReady[a].push(b)},getClassStatus:function(a){return this.isClassReady(a)?"ready":this.isClassWaitingForDependencies(a)?"pending":this.isClassLoaded(a)?"loaded":"missing"},getClassStatusDetails:function(a,b){b||(b=1);var c=this.getClassStatus(a);if("ready"===c)return"ready";if("missing"===c)return"missing";for(var d="pending:\n",e=this._waitingForDependencies[a].dependenciesArray,f=0;f<e.length;f++){var g=this.getClassStatusDetails(e[f],b+1);"ready"!=g&&(d+=this._addTabs(b)+"class :"+e[f]+":"+g)}return d},_addTabs:function(a){for(var b="",c=0;a>c;c++)b+="	";return b},registerClass:function(a){var b=a.prototype.$className;for(this._readyClasses[b]=a,c=0;c<this.classReadyHandlers.length;++c)this.classReadyHandlers[c](b,a);if(this._waitingForClassReady[b]){for(var c=0;c<this._waitingForClassReady[b].length;c++)this._waitingForClassReady[b][c](a);delete this._waitingForClassReady[b]}for(var d in this._waitingForDependencies){var e=this._waitingForDependencies[d];this.areClassesReady(e.dependenciesArray)&&(delete this._waitingForDependencies[d],e.callback(e.classData))}},isClassReady:function(a){return"undefined"!=typeof this._readyClasses[a]},deleteClass:function(a){delete this._readyClasses[a]},areClassesReady:function(a){var b,c,d=!0;for(b=0,c=a.length;c>b;b++)if(!this.isClassReady(a[b])){d=!1;break}return d},registerDependentClass:function(a,b,c){return this.areClassesReady(a)?(b(c),void 0):(this._waitingForDependencies[c.name]={dependenciesArray:a,callback:b,classData:c},this.addClassesToScriptLoadingQueue(a),void 0)},loadMissingClasses:function(){this._filterLoadedClassesFromList(this._scriptLoadingQueue),clearTimeout(this._loadingMissingClassesTimer),delete this._loadingMissingClassesTimer,this._loadingMissingClassesStarted=!0;for(var a=0;a<this._scriptLoadingQueue.length;++a){var b={url:this._scriptLoadingQueue[a]};this._scriptLoader.loadResource(b)}this._scriptLoadingQueue=[]},isClassLoaded:function(a){var b=this.define.getDefinition("Class");return nsUtil.getNameSpace(b,a)},isClassWaitingForDependencies:function(a){return this._waitingForDependencies[a]},getClassWaitingDependencies:function(a){return this.isClassWaitingForDependencies(a)?this._waitingForDependencies[a].dependenciesArray:null},isClassWaitingForReady:function(a){return this._waitingForClassReady[a]},isReady:function(){var a;for(a in this._waitingForDependencies)return!1;if(this._scriptLoadingQueue=this._filterLoadedClassesFromList(this._scriptLoadingQueue),this._scriptLoadingQueue.length)return!1;for(a in this._waitingForClassReady)return!1;return window.deployStatus&&!window.deployStatus.classRepoIsReadyTime&&(window.deployStatus.classRepoIsReadyTime=LOG&&LOG.getSessionTime()),!0},clone:function(a){return a.createBootstrapClassInstance("bootstrap.managers.classmanager.ClassRepository",[this._scriptLoader,this._loadingMissingClassesStarted])},addClassesToScriptLoadingQueue:function(a){var b=this._filterLoadedClassesFromList(a);this._loadClassesFromOtherNameSpaces(b),b=this._filterLoadedClassesFromList(b),this._scriptLoadingQueue.combine(b),this._loadingMissingClassesStarted&&!this._loadingMissingClassesTimer&&(this._loadingMissingClassesTimer=setTimeout(this.loadMissingClasses,10))},_loadClassesFromOtherNameSpaces:function(a){var b,c;for(b=0;b<a.length;b++)for(c=0;c<this.classNamespacesHooks.length;c++)"missing"===this.getClassStatus(a[b])&&this.classNamespacesHooks[c](a[b])},_filterLoadedClassesFromList:function(a){var b=this;return a.filter(function(a){return"missing"===b.getClassStatus(a)})},override:function(a,b){if(!a)throw new Error("Invalid class name for override");this._readyClasses[a]=b}}),a}),define.experimentPlugin("ExperimentClassPlugin",function(a){function b(a,b){var c=this.define.getBootstrapClass("bootstrap.managers.classmanager.ClassDefinition"),d=this.define.createBootstrapClassInstance("bootstrap.managers.experiments.ExperimentStrategy"),e=a;"function"==typeof a&&(e=new c,a(e));var f=new c;return b(f,d),e.inherits(f._extends_||e._extends_),e.resources(d._mergeField_(e._resources_,f._resources_)),e.binds(d._mergeField_(e._binds_,f._binds_)),e.traits(d._mergeField_(e._traits_,f._traits_)),e.utilize(d._mergeField_(e._imports_,f._imports_)),e.statics(d._mergeObjects_(e._statics_,f._statics_)),e.fields(d._mergeObjects_(e._fields_,f._fields_)),e.methods(d._mergeObjects_(e._methods_,f._methods_)),e}function c(a,b){define.Class(a,b)}var d=a;d.init("Class","newClass",b,c)}),define.bootstrapClass("bootstrap.managers.classmanager.InheritStrategy",function(){"use strict";function a(){}return a.extendPrototype({STRATEGIES:{INHERIT:"inherit",MERGE:"merge",OVERRIDE:"override"},inherit:function(){return{_strategy_:this.STRATEGIES.INHERIT}},merge:function(a,b){return{_strategy_:this.STRATEGIES.MERGE,include:a,exclude:b}},getInheritStrategy:function(a){return a?a._strategy_||this.STRATEGIES.OVERRIDE:this.STRATEGIES.OVERRIDE}}),a}),define.bootstrapClass("bootstrap.bootstrap.WClass",function(){function a(a,b){var c=this;if(a=a||{},a.className=b||a.className,c.validateScope(this,a.className),!c.validateClassData(a))return c.InvalidWClass;a.$className=a.className;var d=c.clonePrototype(a.Extends),e={};for(var f in d)e[f]=d[f];c.implementTraits(a.Implements,e);for(f in a)e[f]=a[f];var g=e.Static;delete e.Static,a.Extends||(e.toString=a.hasOwnProperty("toString")&&"function"==typeof a.toString?a.toString:this._$wclassToString,e.hasClassAncestor=this._hasClassAncestor),d.Implements instanceof Array&&e.Implements.combine(d.Implements),e.Binds=c.aggregateBinds(e.Binds,d.Binds,e.Implements),e.$parentPrototype=d,e.parent=function(){function a(){do{if(b=b?b.$parentPrototype:e,!b)return;for(d in b)if(b[d]===f)break}while(b[d]!==f);if(b&&b[d]&&b.$parentPrototype){for(var a=c.realParent(b);b[d]===a[d];)b=a,a=c.realParent(b);if(b=c.realParent(b),b&&b[d]&&"function"==typeof b[d])return b[d]}}for(var b,d,f=e.parent.caller||arguments.callee.caller||arguments.caller;f.$wrapperFunction;)f=f.$wrapperFunction;if(!f)throw new Error("no caller!");return f.$parent||(f.$parent=a()||1),1!==f.$parent?f.$parent.apply(this,arguments):void 0},e._super=function(a){function b(a,b,c){if(null==c)throw new Error('no method "'+b+'" in the prototype chain above "'+a+'"');var d=c[b];if(void 0===d)return findProtoWithMethodInChain(a,b,c.$parentPrototype);if("function"!=typeof d)throw new Error('member "'+b+'" in prototype "'+c+'" is not a function');return c}this.__super_scope=this.__super_scope||{},this.__super_scope[a]=this.__super_scope[a]||e;var c=b(e.$className,a,this.__super_scope[a].$parentPrototype);this.__super_scope[a]=c;var d=Array.prototype.slice.call(arguments,1),f=c[a],g=f.apply(this,d);return delete this.__super_scope[a],g};var h=function(){c.validateScope(this),c.bindMethods(e.Binds,this),c.initializeFieldsThatNeedToBeDeepCopied(this,this.fieldFactory()),e.initialize&&"function"==typeof e.initialize&&e.initialize.apply(this,arguments),c.initializeTraits(e.Implements,this,arguments)},i=new Function("_","return function "+a.className.split(".").pop()+" (){ return _.apply(this,arguments); };")(h),j={};return j[a.className]=i,c.copyStatic(i,e,g,a.Extends),e.fieldFactory=this.createFieldFactoryFunction(e,g),e.constructor=j[a.className],i.prototype=e,e.$class=i,a.$Resources&&(e.resources=a.$Resources),e.$class.$originalClassName=e.$className,e.getOriginalClassName=function(){return e.$class.$originalClassName||e.$className},a.$extendsName?(e.$class.$extendsName=a.$extendsName,delete a.$extendsName):delete e.$class.$extendsName,i}a.extendPrototype({constructor:window.WClass,realParent:function(a){for(var b=a.$parentPrototype;b&&b.$className&&a.$class.$extendsName&&a.$class.$extendsName!=b.$className;)b=b.$parentPrototype;return b},validateScope:function(a){a!==window&&a||LOG.reportError(wixErrors.WCLASS_CLASS_MUST_USE_NEW_OP,"WClass","validateScope")();for(var b in a)a.hasOwnProperty(b)&&LOG.reportError(wixErrors.WCLASS_CLASS_MUST_USE_NEW_OP,"WClass","validateScope")()},clonePrototype:function(a){if("function"!=typeof a)return{};var b={},c=a.prototype||{};if(c===Function.prototype||c===Function)return b;for(var d in c)(c.hasOwnProperty(d)||"toString"==d)&&(b[d]=c[d]);return b},validateClassData:function(a){var b;if("object"!=typeof a)return LOG.reportError(wixErrors.WCLASS_CLASS_DATA_INVALID,"WClass","validateClassData",b)();if("string"!=typeof a.className||0===a.className.length)return LOG.reportError(wixErrors.WCLASS_CLASS_EMPTY_STRING,"WClass","validateClassData")();for(b in a)if(-1!==this.reservedWords.indexOf(b))return LOG.reportError(wixErrors.WCLASS_CLASS_RESERVED,"WClass","validateClassData",b)();return!a.Implements||a.Implements instanceof Array?!a.Binds||a.Binds instanceof Array?!0:LOG.reportError(wixErrors.WCLASS_CLASS_DATA_INVALID,"WClass","validateClassData","Binds is not an array")():LOG.reportError(wixErrors.WCLASS_CLASS_DATA_INVALID,"WClass","validateClassData","Implements is not an array")()},reservedWordsForTraits:["initialize","parent","Extends","Implements","Binds","$parentPrototype","$className"],reservedWords:["parent","$parentPrototype","$className"],excludeFromClone:["define","Implements","Binds","Resources","imports","resource","resources","__super_scope","jsonOfFieldsThatNeedToBeDeepCopied"],bindMethods:function(a,b){var c,d,e;if(a instanceof Array)for(c=0,d=a.length;d>c;c++)e=a[c],"function"==typeof b[e]?b[e]=b[e].bind(b):LOG.reportError(wixErrors.WCLASS_INVALID_BIND,"WClass","bindMethods",e)},implementTraits:function(a,b){var c,d,e,f;if(b.Implements=[],a instanceof Array)for(c=0,d=a.length;d>c;c++){e=a[c],b.Implements.push(e),"function"==typeof e&&(e=e.prototype);for(f in e)f&&-1===this.reservedWordsForTraits.indexOf(f)&&(b[f]=e[f])}},initializeTraits:function(a,b,c){var d,e,f;if(a instanceof Array)for(d=0,e=a.length;e>d;d++){f=a[d],"function"==typeof f&&(f=f.prototype);var g=f.initialize;g&&"function"==typeof g&&g.apply(b,c)}},createFieldFactoryFunction:function(a,b){function c(a,c){return c&&"object"==typeof c&&"$"!==a.charAt(0)&&-1===d.excludeFromClone.indexOf(a)&&!b.hasOwnProperty(a)}var d=this;b=this.getStaticsAsObject(b);var e,f,g={};for(e in a)f=a[e],c(e,f)&&(g[e]=f);var h=JSON.stringify(g);return new Function("return "+h)},initializeFieldsThatNeedToBeDeepCopied:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},getStaticsAsObject:function(a){return a?(a instanceof Function&&(a=a()),a):{}},copyStatic:function(a,b,c,d){var e;if("function"==typeof d)for(e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);if(c){var f=c instanceof Function;c=f?c():c;for(e in c){if(b[e]&&!f)throw new Error("The property "+e+" conflicts with a static property");a[e]=b[e]=c[e]}}},aggregateBinds:function(a,b,c){var d=[];return a instanceof Array&&d.combine(a),b instanceof Array&&d.combine(b),c&&c.forEach(function(a){a.Binds instanceof Array?d.combine(a.Binds):a.prototype&&a.prototype.Binds instanceof Array&&d.combine(a.prototype.Binds)}),d},_findMethod:function(a,b){for(;a;){if(a.hasOwnProperty(b)){var c=a[b];if("function"==typeof c)return c}if(!a.Extends)return null;a=a.Extends.prototype}return null},_hasClassAncestor:function(a,b){var c=this;do{var d,e=c.className;if(b){var f=new RegExp("\\.?"+a+"(\\.|$)");d=e&&e.match(f)}else d=e==a;if(d)return!0;c=c.Extends&&c.Extends.prototype}while(c);return!1},_$wclassToString:function(){return"[wclass "+(this.className||"")+"]"},InvalidWClass:function(){throw new Error("invalid WClass")},isReady:function(){return!0}});var b,c=window.instanceOf,d=window;return d.instanceOf=b=function(e,f){if(f===a&&e&&"function"==typeof e&&e.prototype&&e.prototype.$className)return!0;if(e&&e.$className&&"function"==typeof f&&f.prototype&&f.prototype.$className)return e.getOriginalClassName()==f.prototype.getOriginalClassName()||instanceOf(e.$parentPrototype,f);d.instanceOf=c;var g=instanceOf(e,f);return d.instanceOf=b,g},a}),define.Class("bootstrap.managers.commands.Command",function(a){var b=a;b.methods({initialize:function(a){this._listeners=[],this._zombies=[],this._isEnabled=!0,this._name=a,this._numTimesExecuted=0,this._broadcasting=!1},getNumTimesExecuted:function(){return this._numTimesExecuted},registerListener:function(a,b,c){var d=this._findListenerIndex(a,b);0>d&&(this._listeners.push({listener:a,onExecute:b,onEnabledChanged:c}),c&&c.call(a,this))},unregisterListener:function(a){if(this._broadcasting)this._zombies.push(a);else for(var b;(b=this._findListenerIndex(a))>=0;)this._listeners.splice(b,1)},dispose:function(){this._listeners=[]},getName:function(){return this._name},execute:function(a,b){if(this._isEnabled){var c={command:this,source:b};this._numTimesExecuted++,this._broadcast("onExecute",[a,c])}},setState:function(a){this._setEnabled(!!a)},enable:function(){this._setEnabled(!0)},disable:function(){this._setEnabled(!1)},isEnabled:function(){return this._isEnabled},_broadcast:function(a,b){var c=this._listeners.length;this._broadcasting=!0;for(var d=0;c>d;++d)try{var e=this._listeners[d],f=e[a];f&&f.apply(e.listener,b)}catch(g){W.Utils.debugTrace("Exception whlile processing command",this._name,g,g.stack||"")}this._broadcasting=!1,this._cleanupZombies()},_setEnabled:function(a){a=!!a,a!=this._isEnabled&&(this._isEnabled=a,this._broadcastEnabledChanged())
},_broadcastEnabledChanged:function(){this._broadcast("onEnabledChanged",[this])},_cleanupZombies:function(){var a;if(!(0>=this._zombies.length)){for(var b=this._zombies.length-1;b>=0;--b)for(var c=this._zombies[b];(a=this._findListenerIndex(c))>=0;)this._listeners.splice(a,1);this._zombies=[]}},_findListenerIndex:function(a,b){for(var c=this._listeners,d=c.length-1;d>=0;--d)if(c[d].listener===a&&(void 0===b||c[d].onExecute===b))return d;return-1}})}),define.Class("bootstrap.managers.commands.Commands",function(a){var b=a;b.inherits("bootstrap.managers.BaseManager"),b.utilize(["bootstrap.managers.commands.Command"]),b.methods({initialize:function(){return this._commandMap={},this._pendingMap={},this.Command=this.imports.Command,this},isReady:function(){return!0},clone:function(a){return this.parent(a)},toString:function(){return"[Commands Manager]"},getCommand:function(a){var b=null;return a&&(b=a instanceof this.Command?a:this._commandMap[a]||null),b},registerCommand:function(a,b){var c=this._commandMap[a];if(c)return b||LOG.reportError(wixErrors.COMMAND_DUPLICATE,"Commands","registerCommand",a),c;c=this.createCommand(a),this._commandMap[a]=c;var d=this._pendingMap[a];if(d){for(var e=0;e<d.length;++e){var f=d[e];c.registerListener(f.listener,f.executeCB,f.changedCB)}delete this._pendingMap[a]}return c},registerCommandAndListener:function(a,b,c,d,e){var f=this.registerCommand(a,e);return f.registerListener(b,c,d),f},executeCommand:function(a,b,c){var d=typeof a;"string"==d&&(a=this.getCommand(a)),a&&a.execute(b,c)},registerCommandListenerByName:function(a,b,c,d){var e=this.getCommand(a);if(e)e.registerListener(b,c,d);else{var f=this._pendingMap[a]||[];f.push({listener:b,executeCB:c,changedCB:d}),this._pendingMap[a]=f}},createCommand:function(a){return new this.Command(a)},unregisterCommand:function(a){var b=this._commandMap[a];b&&(b.dispose(),delete this._commandMap[a])},unregisterListener:function(a){for(var b in this._commandMap){var c=this._commandMap[b];c.unregisterListener(a)}}})}),define.Class("bootstrap.managers.events.Command",function(a){var b=a;b.inherits("bootstrap.managers.events.EventDispatcher"),b.utilize(["bootstrap.managers.commands.Command"]),b.statics({EXECUTE_EVENT_NAME:"execute",STATE_CHANGED_EVENT_NAME:"stateChanged"}),b.methods({initialize:function(a){this._isEnabled=!0,this._name=a,this._numTimesExecuted=0,this._setEventSysId(a)},getNumTimesExecuted:function(){return this._numTimesExecuted},registerListener:function(a,b,c){b&&this.on(this.EXECUTE_EVENT_NAME,a,b),c&&this.on(this.STATE_CHANGED_EVENT_NAME,a,c)},unregisterListener:function(a){var b=this._getObjectId(a);this.injects().Events.removeEventsForListener(this.getEventsSysId(),b)},getName:function(){return this._name},execute:function(a,b){this._isEnabled&&(this._numTimesExecuted++,this.trigger(this.EXECUTE_EVENT_NAME,{passedData:a,source:b}))},enable:function(){this.setState(!0)},disable:function(){this.setState(!1)},setState:function(a){this._isEnabled!=a&&(this._isEnabled=a,this.trigger(this.STATE_CHANGED_EVENT_NAME,{currentState:this._isEnabled}))},isEnabled:function(){return this._isEnabled},isRemovingFromObjectsMapOnlyUponDeath:function(){return!0}})}),define.Class("bootstrap.managers.events.CommandsManager",function(a){var b=a;b.inherits("bootstrap.managers.BaseManager"),b.utilize(["bootstrap.managers.events.Command","bootstrap.managers.events.ElementEventDispatching"]),b.methods({initialize:function(){new this.imports.ElementEventDispatching},isReady:function(){return!0},getCommand:function(a){var b=null;return a&&(b=a instanceof this.imports.Command?a:this.injects().Events.getObjectById(a)||null),b},registerCommand:function(a){var b=this.injects().Events.getObjectById[a];return b?b:new this.imports.Command(a)},registerCommandListener:function(a,b,c,d){var e=this.registerCommand(a);return e.registerListener(b,c,d),e},registerCommandAndListener:function(a,b,c,d){var e=this.registerCommand(a);return e.registerListener(b,c,d),e},executeCommand:function(a,b,c){a=this.getCommand(a),a&&a.execute(b,c)},registerCommandListenerByName:function(a,b,c,d){this.registerCommandAndListener(a,b,c,d)},createCommand:function(a){return new this.Command(a)},unregisterCommand:function(a){var b=this.getCommand(a);b.exterminate()},unregisterListener:function(a){var b=this.injects().Events.getObjectId(a);b&&this.injects().Events.deleteObjectFromMaps(b)},isCommandInstance:function(a){return a instanceof this.imports.Command}})}),define.Class("bootstrap.managers.events.DispatcherToHandlersMap",function(a){var b=a;b.fields({_map:{}}),b.methods({addHandler:function(a,b,c,d,e){var f=this._getWithInitHandlerObjectsForEventType(a,b),g=new this.HandlerObject(c,d,e);return f.push(g),g},isHandlerRegistered:function(a,b,c,d){var e=this._getWithInitHandlerObjectsForEventType(a,b);return e.some(function(a){return a.listenerId==c&&a.handler==d})},HandlerObject:function(a,b,c){this.listenerId=a,this.handler=b,c&&(this.nativeHandler=c)},removeHandler:function(a,b,c,d){var e=this._map[a];if(!e||!e[b])return null;var f=e[b],g=null;return f.eraseWithPredicate(function(a){return a.listenerId===c&&a.handler===d?(g=a,!0):!1}),0===f.length&&delete e[b],0===Object.keys(e).length&&delete this._map[a],g},removeListenerHandlers:function(a,b){var c=this._map[a],d={};for(var e in c){d[e]=[];var f=c[e];f.eraseWithPredicate(function(a){return a.listenerId===b?(d[e].push(a),!0):!1}),0===f.length&&delete c[e]}return d},deleteEntry:function(a){var b=this._map[a];return delete this._map[a],b},getHandlerObjects:function(a,b){var c=this._map[a];return c&&c[b]?c[b]:[]},getAllHandlerObjectsForDispatcher:function(a){var b=this._map[a];if(!b)return[];var c=Object.values(b);return c.flatten()},getAllDispatcherIds:function(){return Object.keys(this._map)},_getWithInitHandlerObjectsForEventType:function(a,b){return this._map[a]||(this._map[a]={}),this._map[a][b]||(this._map[a][b]=[]),this._map[a][b]}})}),define.Class("bootstrap.managers.events.ElementEventDispatching",function(a){function b(a,b,c){var d=b;return c.condition&&(d=function(d){return c.condition.call(a,d)?b(d):!0}),d}function c(a,b,c){var d=null;return c&&(d=2==c?function(c){c=new Event(c,a.getWindow()),b(c)===!1&&c.stop()}:b),d}function d(){var a=W.Events.getAllDispatchingObjectIds().map(function(a){return this._objectsByIds.getObjectById(a)},this);return a.filter(function(a){return"element"==typeOf(a)})}var e=a;e.methods({initialize:function(){[Element,Window,Document].invoke("implement",{$alive:!0,getEventsSysId:function(){return this._getObjectId(this,!1)},_getObjectId:function(a,b){return void 0===a.$alive||a.$alive?W.Events._objectsByIds.getObjectId(a,b):null},on:function(a,d,e){var f=this._getObjectId(d,!0),g=this._getObjectId(this,!0),h=Element.Events[a],i=h&&h.base||a;if(W.Events.isHandlerRegistered(g,i,f,e))return this;var j=function(a){e.call(d,a)};h&&(h.onAdd&&h.onAdd.call(this,e),j=b(this,j,h));var k=Element.NativeEvents[i];return j=c(this,j,k),W.Events.addEventHandler(g,i,f,e,j),this},off:function(a,b,c){var d=this._getObjectId(b,!0),e=this._getObjectId(this,!0),f=Element.Events[a],g=f&&f.base||a;return W.Events.isHandlerRegistered(e,g,d,c)?(f&&f.onRemove&&f.onRemove.call(this,c),W.Events.removeEventHandler(e,g,d,c),this):this},trigger:function(a,b){var c=Element.Events[a],d=c&&c.base||a,e=Element.NativeEvents[d];if(e)this._triggerNativeEvent(d);else{var f=this._getObjectId(this,!0);W.Events.dispatchEvent(f,a,b)}},exterminate:function(){var a=this._getObjectId(this,!0);W.Events.deleteObjectFromMaps(a),this.destroy(),this.$alive=!1},isHandlingEventsWhenNotDisplayed:function(){return!1},addNativeListener:function(a,b){if("unload"==a){var c=b,d=this;b=function(){d.removeNativeListener("unload",b),c()}}return this.addEventListener?this.addEventListener(a,b,!1):this.attachEvent("on"+a,b),this},removeNativeListener:function(a,b){return this.removeEventListener?this.removeEventListener(a,b,!1):this.detachEvent("on"+a,b),this},_triggerNativeEvent:function(a){var b;return document.createEvent?(b=document.createEvent("HTMLEvents"),b.initEvent(a,!0,!0),!this.dispatchEvent(b)):(b=document.createEventObject(),this.fireEvent("on"+a,b))}}),window.attachEvent&&!window.addEventListener&&window.addNativeListener("unload",function(){d().each(function(a){a.exterminate()}),window.CollectGarbage&&window.CollectGarbage()})}})}),define.Class("bootstrap.managers.events.EventDispatcher",function(a){var b=a;b.traits(["bootstrap.managers.events.TimersHandler"]),b.fields({$alive:!0}),b.methods({initialize:function(){},getEventsSysId:function(){return this._getObjectId(this,!1)},_setEventSysId:function(a){this.injects().Events._objectsByIds.registerObjectId(this,a)},_getObjectId:function(a,b){return void 0===a.$alive||a.$alive?this.injects().Events._objectsByIds.getObjectId(a,b):null},on:function(a,b,c){var d=this._getObjectId(b,!0),e=this._getObjectId(this,!0);return this.injects().Events.addEventHandler(e,a,d,c),this},off:function(a,b,c){var d=this._getObjectId(b),e=this._getObjectId(this,!0);return this.injects().Events.removeEventHandler(e,a,d,c),this},trigger:function(a,b,c){var d=this._getObjectId(this,!0);return this.injects().Events.dispatchEvent(d,a,b,c)},exterminate:function(){this.trigger(Constants.EventDispatcher.Events.EXTERMINATING);var a=this._getObjectId(this,!0);this.injects().Events.deleteObjectFromMaps(a),this.$alive=!1},isHandlingEventsWhenNotDisplayed:function(){return!1},isRemovingFromObjectsMapOnlyUponDeath:function(){return!1}})}),define.Class("bootstrap.managers.events.EventsManager",function(a){var b=a;b.inherits("bootstrap.managers.BaseManager"),b.utilize(["bootstrap.managers.events.DispatcherToHandlersMap","bootstrap.managers.events.ListenerToDispatchersMap","bootstrap.managers.events.ObjectsByIds"]),b.methods({initialize:function(){this._listenersMapping=new this.imports.ListenerToDispatchersMap,this._dispatchersMapping=new this.imports.DispatcherToHandlersMap,this._objectsByIds=new this.imports.ObjectsByIds},isReady:function(){return!0},addEventHandler:function(a,b,c,d,e){if(this._isValidObjectId(a)&&this._isValidObjectId(c)&&!this.isHandlerRegistered(a,b,c,d)){var f=this._dispatchersMapping.addHandler(a,b,c,d,e);return this._addNativeEvent(a,b,e),this._listenersMapping.addHandler(c,a),f}},removeEventHandler:function(a,b,c,d){var e=this._dispatchersMapping.removeHandler(a,b,c,d);return this._listenersMapping.removeHandler(c,a),this._removeNativeEvent(a,b,e.nativeHandler),this._deleteObjectIfPossible(c),this._deleteObjectIfPossible(a),e},removeEventsForListener:function(a,b){var c=this._dispatchersMapping.removeListenerHandlers(a,b);c&&this._removeNativeEvents({dispatcherId:c}),this._listenersMapping.removeListenerHandlers(b,a),this._deleteObjectIfPossible(b),this._deleteObjectIfPossible(a)},isHandlerRegistered:function(a,b,c,d){return this._dispatchersMapping.isHandlerRegistered(a,b,c,d)},dispatchEvent:function(a,b,c,d){var e=this._dispatchersMapping.getHandlerObjects(a,b);e=this._filterInactiveHandlers(e);var f={type:b,data:c,returnedValues:d?[]:void 0,target:this.getObjectById(a),isCustomEvent:!0};return e.forEach(function(a){var b=this.getObjectById(a.listenerId),c=a.handler.call(b,f);d&&void 0!==c&&f.returnedValues.push(c)},this),f},_filterInactiveHandlers:function(a){return a},deleteObjectFromMaps:function(a){var b=this._listenersMapping.getAllDispatcherIdsForListener(a),c={};b.forEach(function(b){c[b]=this._dispatchersMapping.removeListenerHandlers(b,a),this._deleteObjectIfPossible(b)},this);var d=this._dispatchersMapping.getAllHandlerObjectsForDispatcher(a);d.forEach(function(b){this._listenersMapping.removeHandler(b.listenerId,a),this._deleteObjectIfPossible(b.listenerId)},this),c[a]=this._dispatchersMapping.deleteEntry(a),this._listenersMapping.deleteEntry(a),c&&this._removeNativeEvents(c),this._deleteObjectIfPossible(a,!0)},isObjectListensOrDispatchesAnyEvents:function(a){var b=this._listenersMapping.getAllDispatcherIdsForListener(a);if(b&&b.length>0)return!0;var c=this._dispatchersMapping.getAllHandlerObjectsForDispatcher(a);return c&&c.length>0},getAllDispatchingObjectIds:function(){return this._dispatchersMapping.getAllDispatcherIds()},_deleteObjectIfPossible:function(a,b){var c=this.getObjectById(a);if(c){var d=b||!c.isRemovingFromObjectsMapOnlyUponDeath||!c.isRemovingFromObjectsMapOnlyUponDeath();d&&!this.isObjectListensOrDispatchesAnyEvents(a)&&(this._listenersMapping.deleteEntry(a),this._dispatchersMapping.deleteEntry(a),this._deleteObjectFromMap(a))}},_deleteObjectFromMap:function(a){this._objectsByIds.removeObjectById(a)},getObjectById:function(a){return this._objectsByIds.getObjectById(a,!0)},getObjectId:function(a){return this._objectsByIds.getObjectId(a,!1)},_isValidObjectId:function(){return!0},_addNativeEvent:function(a,b,c){if(c){var d=this.getObjectById(a);d.addNativeListener&&d.addNativeListener(b,c)}},_removeNativeEvent:function(a,b,c){if(c){var d=this.getObjectById(a);d.removeNativeListener&&d.removeNativeListener(b,c)}},_removeNativeEvents:function(a){for(var b in a)for(var c in a[b]){var d=a[b][c];d.each(function(a){this._removeNativeEvent(b,c,a.nativeHandler)},this)}}})}),define.Class("bootstrap.managers.events.ListenerToDispatchersMap",function(a){var b=a;b.fields({_map:{}}),b.methods({addHandler:function(a,b){this._map[a]||(this._map[a]={});var c=this._map[a];c[b]?c[b]++:c[b]=1},removeHandler:function(a,b){var c=this._map[a];c&&c[b]&&(c[b]--,0===c[b]&&delete c[b],0===Object.keys(c).length&&delete this._map[a])},removeListenerHandlers:function(a,b){this._map[a]&&delete this._map[a][b]},deleteEntry:function(a){this._map[a]&&delete this._map[a]},getAllDispatcherIdsForListener:function(a){return this._map[a]?Object.keys(this._map[a]):[]}})}),define.Class("bootstrap.managers.events.ObjectsByIds",function(a){var b=a;b.fields({_objectIdsMap:{},_OBJECT_ID_PROPERTY:"$id"}),b.methods({initialize:function(){},getObjectId:function(a,b){var c=a[this._OBJECT_ID_PROPERTY];return c||(c=this.injects().Utils.getGUID(),a[this._OBJECT_ID_PROPERTY]=c),!this.getObjectById(c)&&b&&(this._objectIdsMap[c]=a),c},registerObjectId:function(a,b){return a[this._OBJECT_ID_PROPERTY]=b,this._objectIdsMap[b]=a,a},getObjectById:function(a){return this._objectIdsMap[a]},removeObjectById:function(a){this._objectIdsMap[a]&&delete this._objectIdsMap[a]}})}),define.Class("bootstrap.managers.events.TimersHandler",function(a){var b=a;b.fields({_timerTypes:{timeout:1,interval:2},_timers:{}}),b.methods({initialize:function(){this.on("exterminating",this,this._clearAllTimers)},setTimeout:function(a,b){var c=b||0,d=this._getExecutingFunction(a,this._timerTypes.timeout),e=window.setTimeout(d,c);return d.timerId=e,this._timers[e]={type:this._timerTypes.timeout,isActive:!0},e},setInterval:function(a,b){var c=this._getExecutingFunction(a,this._timerTypes.interval),d=window.setInterval(c,b);return c.timerId=d,this._timers[d]={type:this._timerTypes.interval,isActive:!0},d},isActiveTimer:function(a){return this._timers[a]&&this._timers[a].isActive},_getExecutingFunction:function(a,b){var c=this;return function(){var d=arguments.callee&&arguments.callee.timerId;d&&b==c._timerTypes.timeout&&c._timers[d]&&(c._timers[d].isActive=!1),a.call(c)}},_clearAllTimers:function(){Object.each(this._timers,function(a,b){b=Number(b),a.type==this._timerTypes.timeout?window.clearTimeout(b):a.type==this._timerTypes.interval&&window.clearInterval(b)},this)}})}),define.Const("EventDispatcher",{Events:{EXTERMINATING:"exterminating"}}),define.experimentPlugin("ExperimentConstantsPlugin",function(a){function b(a,b){var c=this.define.createBootstrapClassInstance("bootstrap.managers.experiments.ExperimentStrategy");b[c.STRATEGY_FLAG]=c.MERGE;var d=c._mergeField_(a,b);return d}function c(a,b){define.Const(a,b)}var d=a;d.init("Const","newConst",b,c)}),define.bootstrapClass("bootstrap.managers.experiments.ExperimentPlugin",function(){function a(){}return a.extendPrototype({init:function(a,b,c,d){return this._modifyNamespace=a,this._newNamespace=b,this._mergeSingleExperiment=c,this.convertNew=d,this},setRunningExperimentsOrder:function(a){this._runningExperiments=a,this._runningExperimentsObj={};for(var b=0;b<this._runningExperiments.length;b++){var c=this._runningExperiments[b];this._runningExperimentsObj[c.id]=c}var d=this.define.getDefinition("experiment",this._newNamespace);d&&nsUtil.forEachLeaf(d,function(a,b){this._experimentDefined(b,a)}.bind(this)),this.define.experiment[this._newNamespace].definitionModifier=this._experimentDefined.bind(this),this.define.experiment[this._newNamespace].nameModifier=this._experimentNameDefined.bind(this),this.define.experiment[this._modifyNamespace].nameModifier=this._experimentNameDefined.bind(this)},_experimentNameDefined:function(a){var b=this._getExperimentInfo(a);return b.definitionName+"."+b.experimentName+"."+b.group},_experimentDefined:function(a,b){var c=this._getExperimentInfo(a),d=c.experimentName.toLowerCase();return this._runningExperimentsObj[d]&&this._runningExperimentsObj[d].group===c.group&&this.convertNew(c.definitionName,b),b},convertNew:function(){throw new Error("Invalid ExperimentPlugin: convertNew method not set. Use init to override it",this)},_mergeSingleExperiment:function(){throw new Error("Invalid ExperimentPlugin: runExperiment method not set. Use init to override it",this)},applyExperiments:function(a,b){var c=this._modifyNamespace+"."+a,d=this.define.getDefinition("experiment",c);if(d=this.loadedExperimentsToLower(d))for(var e=0;e<this._runningExperiments.length;++e){var f=this._runningExperiments[e];if(d[f.id]&&d[f.id][f.group]){var g=d[f.id][f.group];b=this._mergeSingleExperiment(b,g)}}return b},loadedExperimentsToLower:function(a){var b={};for(var c in a){var d=c.toLowerCase();b[d]={};for(var e in a[c]){var f=e.toLowerCase(),g=a[c][e];b[d][f]=g}}return b},_getExperimentInfo:function(a){var b=a.split("."),c=b.pop(),d=b.pop(),e=b.join(".");return{group:c.toLowerCase(),experimentName:d.toLowerCase(),definitionName:e}}}),a}),define.bootstrapClass("bootstrap.managers.experiments.ExperimentStrategy",function(){function a(){}return a.extendPrototype({init:function(){return this},STRATEGY_FLAG:"experimentStrategy",BEFORE:"before",AFTER:"after",AROUND:"around",MERGE:"merge",DELETE:"delete",CUSTOM:"customField",before:function(a){if("function"!=typeof a)throw new Error("before must be on a method");return a[this.STRATEGY_FLAG]=this.BEFORE,a},after:function(a){if("function"!=typeof a)throw new Error("after must be on a method");return a[this.STRATEGY_FLAG]=this.AFTER,a},around:function(a){if("function"!=typeof a)throw new Error("around must be on a method");return a[this.STRATEGY_FLAG]=this.AROUND,a},merge:function(a){var b=function(){return a};return b[this.STRATEGY_FLAG]=this.MERGE,b},remove:function(a){var b=function(){return a};return b[this.STRATEGY_FLAG]=this.DELETE,b},customizeField:function(a){if("function"!=typeof a)throw new Error("custom must be on a method");return a[this.STRATEGY_FLAG]=this.CUSTOM,a},_mergeObjects_:function(a,b){a=a||{};var c=Object.clone(a);for(var d in b){var e=b[d],f=a[d];c[d]=this._mergeSingleObject(e,f),this._isDeleteFieldObj(c[d])&&delete c[d]}return c},_mergeSingleObject:function(a,b){var c;return c="function"==typeof a&&this._isMethodStrategy(a)?this._resolveMethod(b,a):"function"==typeof a&&this._isFieldStrategy(a)?this._mergeField_(b,a):a},_isMethodStrategy:function(a){var b=a[this.STRATEGY_FLAG];return b&&(b===this.AFTER||b===this.BEFORE||b===this.AROUND)},_isFieldStrategy:function(a){var b=a[this.STRATEGY_FLAG];return b&&(b===this.MERGE||b===this.DELETE||b===this.CUSTOM)},_resolveMethod:function(a,b){var c;if(!a){if(b[this.STRATEGY_FLAG])throw new Error("cannot "+b[this.STRATEGY_FLAG]+" if original method is not defined");return b}switch(b[this.STRATEGY_FLAG]){case this.BEFORE:c=function(){return b.apply(this,arguments),a.apply(this,arguments)};break;case this.AFTER:c=function(){var c=a.apply(this,arguments);return b.apply(this,arguments),c};break;case this.AROUND:c=function(){var c,d=!1,e=this,f=Array.prototype.splice.call(arguments,0);f.splice(0,0,function(){return d=!0,a.apply(e,f.slice(1))});var c=b.apply(this,f);return d||LOG.reportError(wixErrors.EXPERIMENT_INVALID_MODIFY,b.toString(),"",f.slice(1)),c};break;default:c=b}return a.$wrapperFunction=c,c},_mergeField_:function(a,b){if(this._isEmpty(a))return"function"==typeof b?b():b;if(this._isEmpty(b))return a;var c=b[this.STRATEGY_FLAG]==this.MERGE||!1,d=b[this.STRATEGY_FLAG]==this.DELETE||!1,e=b[this.STRATEGY_FLAG]==this.CUSTOM||!1;return e?(delete b[this.STRATEGY_FLAG],b=b(a)):"function"==typeof b&&(b=b()),c?(delete b[this.STRATEGY_FLAG],this._combine(a,b)):d?this._getFieldDeleteObj():b},_getFieldDeleteObj:function(){return{_delete_:!0}},_isDeleteFieldObj:function(a){return a&&a._delete_===!0},_isEmpty:function(a){return a?a instanceof Array&&0===a.length?!0:"object"==typeof a&&0===Object.getLength(a)?!0:!1:!0},_combine:function(a,b){if(a instanceof Array&&b instanceof Array)for(var c=0;c<b.length;++c){var d=b[c];this._elementExistsInArray(d,a)||a.push(d)}else if("object"==typeof a&&"object"==typeof b)for(var e in b)a[e]="object"==typeof a[e]&&"object"==typeof b[e]||a[e]instanceof Array&&b[e]instanceof Array?this._combine(a[e],b[e]):b[e];return a},_elementExistsInArray:function(a,b){for(var c=0;c<b.length;c++)if(this._areEqual(b[c],a))return!0;return!1},_areEqual:function(a,b){return"object"==typeof a&&"object"==typeof b?this._areObjectsEqual(a,b):a instanceof Array&&b instanceof Array?this._areArraysEqual(a,b):a!==b?!1:!0},_areObjectsEqual:function(a,b){var c;for(var d in a)if(c=this._areEqual(a[d],b[d]),!c)return!1;return!0},_areArraysEqual:function(a,b){var c;if(a.length!==b.length)return!1;for(var d=0;d<a.length;d++)if(c=this._areEqual(a[d],b[d]),!c)return!1;return!0}}),a}),resource.getResources(["experimentsOrder","ExperimentsList"],function(a){define.bootstrapClass("bootstrap.managers.experiments.Experiments",function(){function b(){this._plugins=[],this._pluginsMap={}}var c=this.define,d=function(a,b){var b=b||a.id;b||(console.error("no id for descriptor: "+JSON.stringify(a)),b="***NO_ID***");var c={id:b,group:"New",owner:a.owner,description:a.description},d=a.constraints||{},e=Object.keys(d);return c.dependencies=e.filter(function(a){return/^required/.test(d[a])}),c.conflicts=e.filter(function(a){return"conflicts"==d[a]}),c};return b.extendPrototype({init:function(b,c){return this._experimentsOrder=c,b?this._finishInit(b):a.ExperimentsList.getExperimentsList(this._finishInit.bind(this)),this},_finishInit:function(a){this._runningExperiments=a;var b="new"==a.experimentdescriptors;this._experimentsOrder=b?this._getExperimentsOrderFromDescriptors(a):this._getExperimentsOrder(this._experimentsOrder),this.normalizeExperimentLists(),this._runningExperimentsOrder=this.getOrderedRunningExperiments(),this._buildModelForApps();var c=this.define.getDefinition("experimentPlugin");for(var d in c)this._addPlugin(d,c[d]);this.define.experimentPlugin.definitionModifier=this._onExperimentPluginDefined.bind(this)},_getExperimentsOrderFromDescriptors:function(a){var b=[];return Object.keys(a).forEach(function(e){if("new"==a[e]){var f=c.getDefinition("resource.experimentDescriptors."+e.toLowerCase());if(f){var g=d(f.value,e);b.push(g)}}}),b},_getExperimentsOrder:function(b){return b||a.experimentsOrder},getOrderedRunningExperiments:function(){for(var a=[],b=0;b<this._experimentsOrder.length;++b){var c=Object.clone(this._experimentsOrder[b]);this._isExperimentRunningAndValid(c)&&a.push(c)}return a},normalizeExperimentLists:function(){var a,b,c,d,e,f,g,h={};for(var i in this._runningExperiments)a=i.toLowerCase(),b=this._runningExperiments[i].toLowerCase(),h[a]=b;for(var j=[],k=0;k<this._experimentsOrder.length;k++){g=this._experimentsOrder[k],a=g.id.toLowerCase(),b=g.group.toLowerCase(),c=g.description,f=g.owner,d=[];for(var l=0;l<g.dependencies.length;l++)d.push(g.dependencies[l].toLowerCase());e=[];for(var m=0;m<g.conflicts.length;m++)e.push(g.conflicts[m].toLowerCase());j.push({id:a,group:b,description:c,dependencies:d,conflicts:e,owner:f})}this._runningExperiments=h,this._experimentsOrder=j},_buildModelForApps:function(){var a={},b=this._isInEditor()?editorModel:rendererModel;for(var c in this._runningExperiments)this._isAppsExperiment(c)&&(a[c]=this._runningExperiments[c],delete b.runningExperiments[c]);b.runningApps=a},_isAppsExperiment:function(a){var b=/^App~\w{1,}~\w{8}-\w{4}-\w{4}-\w{4}-\w{12}/i;return b.test(a)},_isLanguageExperiment:function(a){var b=/^Lang_[a-z]{2,}/i;return b.test(a)||"MultiLang"==a},_isFlagExperiment:function(a){var b=/^FLAG_/i;return b.test(a)},_isInEditor:function(){return"editor"===viewMode},applyExperiments:function(a,b){for(var c=0;c<this._plugins.length;++c)b=this._plugins[c].applyExperiments(a,b);return b},_onExperimentPluginDefined:function(a,b){this._addPlugin(a,b)},_addPlugin:function(a,b){var c=this.define.createBootstrapClassInstance("bootstrap.managers.experiments.ExperimentPlugin");b(c),c.setRunningExperimentsOrder(this._runningExperimentsOrder),this._pluginsMap[a]=c,this._plugins.push(c)},_isExperimentRunningAndValid:function(a){var b=a.id,c=a.dependencies,d=a.conflicts,e=this._runningExperiments[b];if(e&&a.group===e){for(var f=0;f<c.length;f++){var g=c[f];if(!this._runningExperiments[g])return LOG.reportError(wixErrors.EXPERIMENT_MISSING_DEPENDENCY,"dependency: "+g+" is missing (for experiment: "+b+")"),!1}for(var h=0;h<d.length;h++){var i=d[h];if(this._runningExperiments[i])return LOG.reportError(wixErrors.EXPERIMENT_IN_CONFLICT,"in conflict with: "+i+" (for experiment: "+b+")"),!1}return!0}return!1},isReady:function(){return void 0==this._runningExperimentsOrder?!1:(window.deployStatus&&!window.deployStatus.experimentsIsReadyTime&&(window.deployStatus.experimentsIsReadyTime=LOG&&LOG.getSessionTime()),!0)},isDeployed:function(a){var b,c=!1;for(b in a){var d=a[b].toLowerCase();if(b=b.toLowerCase(),!this._runningExperiments.hasOwnProperty(b)||this._runningExperiments[b]!==d){c=!1;break}c=!0}return c},_getExperimentsOrder_:function(){return this._experimentsOrder},_getExperimentInfo_:function(a){if(!this.experimentInfoObj){this.experimentInfoObj={};for(var b=0;b<this._experimentsOrder.length;b++){var c=this._experimentsOrder[b];this.experimentInfoObj[c.id]||(this.experimentInfoObj[c.id]={}),this.experimentInfoObj[c.id][c.group]={description:c.description,dependencies:c.dependencies,conflicts:c.conflicts,owner:c.owner}}}return this.experimentInfoObj[a]},_getRunningExperimentsOrder_:function(){return this._runningExperimentsOrder},clone:function(a){var b=a.createBootstrapClassInstance("bootstrap.managers.experiments.Experiments",[this._runningExperiments,this._experimentsOrder]);return b},isExperimentOpen:function(a,b){var c=this._getRunningExperimentsOrder_();b=b||"new";for(var d=0;d<c.length;d++){var e=c[d];if(e.id===a.toLowerCase()&&e.group===b.toLowerCase())return!0}return!1}}),b})}),define.bootstrapClass("bootstrap.managers.experiments.ExperimentsOrganizer",function(){"use strict";function a(){}function b(a,b){return a>b?1:b>a?-1:0}function c(a,b,c){return c=c||"0",a+="",a.length>=b?a:new Array(b-a.length+1).join(c)+a}function d(a,b){var c=null!=wixErrors?wixErrors[a]:null;null!=c&&null!=LOG&&"function"==typeof LOG.reportError&&LOG.reportError(c,b)}var e=/^[0-9]{4}-[01][0-9]-[0-3][0-9]T[0-2][0-9]:[0-5][0-9]:[0-5][0-9](\.[0-9]{1,9})?$/,f=a.prototype,g=/^(conflicts)|(((required)|(optional))(-((before)|(after)))?)$/;a._normalizeDescriptors=function(a,b){b=b||function(){};var c=function(a,b,c,d){if(!g.test(d))throw{name:"EXPERIMENT_INVALID_DEFINITION",message:'Invalid constraint "'+d+'" for experiment "'+c+'" in descriptor "'+a+'": Valid constraints are: ["conflicts", "required", "optional", "required-before", "optional-before", "required-after", "optional-after"]'};return d},d=function(a,b){var d={id:a};if(null==b.createTime)throw{name:"EXPERIMENT_INVALID_DEFINITION",message:'Missing createTime in descriptor "'+a+'"'};if(!e.test(b.createTime))throw{name:"EXPERIMENT_INVALID_DEFINITION",message:'Invalid createTime "'+b.createTime+'" in descriptor "'+a+'". Valid format: "YYYY-MM-DDThh:mm:ss[.fff]", eg, "2013-06-20T13:45:12"'};return d.createTime=b.createTime,Object.forEach(b.constraints||{},function(e,f){var g=f.toLowerCase();if(d.constraints=d.constraints||{},d.constraints.hasOwnProperty(g))throw{name:"EXPERIMENT_INVALID_DEFINITION",message:'There is more than one constraint with the lower-case name "'+g+'"'+' in experiment "'+a+'"'};d.constraints[g]=c(a,b,f,e)}),d},f={};return Object.forEach(a,function(a,c){var e=c.toLowerCase();if(f.hasOwnProperty(e))b(c,{name:"DUPLICATE_EXPERIMENT_NAME_WITH_DIFFERENT_CASING",message:'There is more than one experiment with the lower-case name "'+e+'"'});else try{f[e]=d(e,a)}catch(g){if("EXPERIMENT_INVALID_DEFINITION"!=g.name)throw g;b(e,g)}}),f},a._getDescriptorsInOrder=function(a,b){return a.map(function(a){return b[a]})},a._getFilteredConstrainsInOrder=function(a,b,c){var d=[];return this._getDescriptorsInOrder(a,b).forEach(function(a){Object.forEach(a.constraints,function(b,e){c(b,e)&&d.push({targetId:e,sourceId:a.id})})}),d};var h=function(a){var b={};return a.forEach(function(a,c){b[a]=c+1}),b},i=function(a){var b={};return Object.each(a,function(a,c){b[c]=a}),b};return a._applyBinaryConstraints=function(a,b,c){c=c||function(){};var d=h(a),e=function(a,c,f){if(void 0!==c[a])return c;var g=function(b){return c[a]=b,c};f.push(a);var h=b[a];if(!h)return g({name:"EXPERIMENT_UNKNOWN",message:'Could not find a descriptor for experiment "'+a+'"'+(f.length>1?". Require chain: "+JSON.stringify(f):"")});var j=h.constraints;if(!j)return g(!0);var k=i(c);k[a]=!0;for(var l,m,n=Object.keys(j).sort(function(a,b){return(d[a]||-1)-(d[b]||-1)}),o=0;o<n.length;o++)if(l=n[o],m=j[l],0==m.indexOf("required")){if(!d[l])return g({name:"EXPERIMENT_MISSING_DEPENDENCY",message:'Experiment "'+a+'" requires experiment "'+l+'" which is not running'+(f.length>1?". Require chain: "+JSON.stringify(f):"")});if(k=e(l,k,f),k[l]!==!0)return g(k[l])}else if("conflicts"==m){if(k[l]===!0)return g({name:"EXPERIMENT_IN_CONFLICT",message:'Experiment "'+a+'" is conflicted with running experiment "'+l+'"'+(f.length>1?". Require chain: "+JSON.stringify(f):"")});d[l]&&void 0===k[l]&&(k[l]={name:"EXPERIMENT_IN_CONFLICT",message:'Running experiment "'+a+'" is conflicted with experiment "'+l+'"'+(f.length>1?". Require chain: "+JSON.stringify(f):"")})}return k},f={};return a.forEach(function(a){f=e(a,f,[])}),a.filter(function(a){var b=f[a];return b!==!0&&c(a,b),b===!0})},f.getRemovalLog=function(){return this._removalLog},f.init=function(b){return this._logger=b||d,this._removalLog=[],this._removalLogger=a._defaultRemovalLogger.bind(this),this},a._defaultRemovalLogger=function(a,b){var c={};c[a]=b,this._removalLog.push(c),this._logger(b.name,b.message)},a._toposort=function(a){function b(a){var b={};return a.forEach(function(a){b[a[0]]=!0,b[a[1]]=!0}),Object.keys(b)}function c(b,g){if(g.indexOf(b)>=0)throw{name:"EXPERIMENT_CYCLIC_DEPENDENCY",message:JSON.stringify(g.concat(b)),cycleInNode:b};var h=d.indexOf(b);if(!(0>h)){d.splice(h,1);var i=a.filter(function(a){return a[0]===b});if(h=i.length){var j=g.concat(b);do c(i[--h][1],j);while(h)}f[--e]=b}}for(var d=b(a),e=d.length,f=new Array(e);e;)c(d[0],[]);return f},a._sortByOrder=function(a,b){return a.sort(function(a,c){return(b[a]||-1)-(b[c]||-1)})},a._applyOrderConstraints=function(b,c){b=b.slice(0);var d,e=[];d=h(b),b.forEach(function(b){var f=c[b].constraints;if(f){var g=a._sortByOrder(Object.keys(f),d);g.forEach(function(a){var c=f[a];if(/^(required)|(optional)/.test(c)){if(!d[a])return;/-before$/.test(c)?e.push([b,a]):/-after$/.test(c)&&e.push([a,b])}})}});var f=a._toposort(e).reverse(),g=h(f);return b.sort(function(a,b){var c=g[a]||-1,e=g[b]||-1;return c!==e?c-e:d[a]-d[b]}),b},a._applyConstraints=function(b,c,d){for(;b.length>0;)try{return b=a._applyBinaryConstraints(b,c,d),a._applyOrderConstraints(b,c,d)
}catch(e){if("EXPERIMENT_CYCLIC_DEPENDENCY"!=e.name)throw e;d(e.cycleInNode,e),b.splice(b.indexOf(e.cycleInNode),1)}return[]},f.organize=function(c,d){return d=a._normalizeDescriptors(d,this._removalLogger),c.sort(function(a,c){return b(d[a]?d[a].createTime:"",d[c]?d[c].createTime:"")}),a._applyConstraints(c,d,this._removalLogger)},a.dateToCreateTimeString=function(a){return a=a||new Date,a.getFullYear()+"-"+c(a.getMonth()+1,2)+"-"+c(a.getDate(),2)+"T"+c(a.getHours(),2)+":"+c(a.getMinutes(),2)+":"+c(a.getSeconds(),2)+"."+(a.getMilliseconds()?c(a.getMilliseconds(),3):"")},a}),define.Class("bootstrap.utils.BufferFunction",function(a){var b=a;b.binds(["_wrapperFunction"]),b.methods({initialize:function(a,b){this._isFirstCallDelayed=!1,this._bufferTime=1e3,this._lastCallArguments,this._replaceFunctionAndSaveOriginal(a,b),this._clearBuffer()},setBufferTime:function(a){this._bufferTime=a},getBufferTime:function(){return this._bufferTime},setIsFirstCallDelayed:function(a){this._isFirstCallDelayed=a},getIsFirstCallDelayed:function(){return this._isFirstCallDelayed},_replaceFunctionAndSaveOriginal:function(a,b){this._scope=a,this._originalFunction=a[b],a[b]=this._wrapperFunction},_wrapperFunction:function(){this._lastCallArguments=arguments,this._tryCallingFunction()},_tryCallingFunction:function(){this.isReadyToCall()?(this.callOriginalFunction(),this._delayCall(this._clearBuffer)):this._delayCall(this._clearBufferAndTryCallingFunction)},callOriginalFunction:function(){this._originalFunction.apply(this._scope,this._lastCallArguments)},isReadyToCall:function(){return!this._callTimerId&&this._isFirstCallDelayed===!1},_clearBuffer:function(){this._callTimerId=void 0},_clearBufferAndTryCallingFunction:function(){this._clearBuffer(),this._tryCallingFunction()},_delayCall:function(a){this.injects().Utils.clearCallLater(this._callTimerId),this._callTimerId=this.injects().Utils.callLater(a,[],this,this._bufferTime)}})}),define.Class("bootstrap.utils.Events",function(a){var b=a;b.methods({addEvent:function(a,b){return a=this._removeOn(a),this.$events=this.$events||{},this.$events[a]=(this.$events[a]||[]).include(b),this},addEvents:function(a){for(var b in a)this.addEvent(b,a[b]);return this},fireEvent:function(a,b,c){if(this.$events){a=this._removeOn(a);var d=this.$events[a];if(!d)return this;b=Array.from(b);var e=d.clone();e.each(function(a){a&&(c?a.delay(c,this,b):a.apply(this,b))},this)}return this},removeEvent:function(a,b){if(this.$events){a=this._removeOn(a);var c=this.$events[a];if(c)if(b){var d=c.indexOf(b);-1!=d&&(c.splice(d,1),0===c.length&&delete this.$events[a])}else delete this.$events[a]}return this},removeEvents:function(a){var b;if("object"==typeOf(a)){for(b in a)this.removeEvent(b,a[b]);return this}a&&(a=this._removeOn(a));for(b in this.$events)if(!a||a==b)for(var c=this.$events[b],d=c.length;d--;)this.removeEvent(b,c[d]);return this},_removeOn:function(a){return a.replace(/^on([A-Z])/,function(a,b){return b.toLowerCase()})},removeAllEvents:function(){this.$events={}}})}),define.Class("bootstrap.utils.LinkUtils",function(a){var b=a;b.resources(["W.Commands"]),b.statics({linkType:{SMS:"SMS",CALL:"CALL",SKYPE:"SKYPE",MAP:"MAP",EMAIL:"EMAIL",FACEBOOK:"FACEBOOK",FLICKR:"FLICKR",BLOGGER:"BLOGGER",MYSPACE:"MYSPACE",LINKEDIN:"LINKEDIN",TWITTER:"TWITTER",TUMBLR:"TUMBLR",YOUTUBE:"YOUTUBE",VIMEO:"VIMEO",PAGE:"PAGE",FREE_LINK:"FREE_LINK",TEXT:"TEXT",DELICIOUS:"DELICIOUS",WEBSITE:"WEBSITE",DOCUMENT:"DOCUMENT",LOGIN:"LOGIN"},linkTarget:{SAME_WINDOW:"_self",NEW_WINDOW:"_blank"}}),b.methods({linkifyElement:function(a,b,c,d){this._fixTargetBug(c);var e=c.get("href"),f=c.get("target"),g=c.get("linkType");if(e&&f||"LOGIN"===g||"ADMIN_LOGIN"===g){if(this._createLink(a,b,g,e,f),this._setLinkState(a),d===!0&&this._disableLinkClickPropagation(b),"LOGIN"===g||"ADMIN_LOGIN"===g){var h=a._highlightedDisplayer.getLogic();this._handleSpecialCases(h,g,b)}}else this._removeLinkstate(a),b.set("href",""),b.setStyle("cursor","default"),b.set("target",""),b.removeEvents("click")},_createLink:function(a,b,c,d,e){var f="PREVIEW"==W.Viewer.getEditorMode(),g="_self"===e&&"WEBSITE"===c;f&&g?this._bindPageLeaveWarningToLink(a,b):(b.set("href",d),b.setStyle("cursor","pointer"),b.set("target",e),b.removeEvents("click"))},_setLinkState:function(a){a.hasState("noLink","linkableComponent")&&a.removeState("noLink","linkableComponent")},_removeLinkstate:function(a){a.hasState("noLink","linkableComponent")&&a.setState("noLink","linkableComponent")},_fixTargetBug:function(a){var b=a.get("target");("same"==b||"self"==b)&&(b="_self",a.set("target","_self"))},_disableLinkClickPropagation:function(a){a.addEvent("click",function(a){a.stopPropagation()})},_bindPageLeaveWarningToLink:function(a,b){b.erase("href"),b.erase("target"),b.addEvent("click",function(b){b.preventDefault(),this._showNavigationDisabledTooltip(a)}.bind(this))},_showNavigationDisabledTooltip:function(a){var b={component:a};this.resources.W.Commands.executeCommand("linkableComponent.navigateSameWindow",b,a)},_handleSpecialCases:function(a,b,c){switch(c.removeEvents("click"),b){case this.linkType.LOGIN:c.addEvent("click",function(){if(window.animateForm){var a=this.getDataItem(),b=a.get("text");if(b){b=JSON.parse(b);var c=b.postLoginUrl,d=b.postSignupUrl,e=b.type,f="HTML",g=window.userApi?window.userApi.isSessionValid():!1;g?c&&(window.location.href=c):window.animateForm.callOnContent([d,c,e,f])}}}.bind(a));break;case this.linkType.ADMIN_LOGIN:c.setStyle("cursor","pointer"),c.addEvent("click",function(){this.resources.W.Commands.executeCommand("WViewerCommands.AdminLogin.Open")}.bind(a))}}})}),define.utils("LocalStorageUtils",function(){var a=window.localStorage;return{clear:function(){a.clear()},getLength:function(){return a.length},getItem:function(b){if(!b)throw"LocalStorageUtils:: Invalid key provided.";var c=a.getItem(b);return JSON.parse(c)},setItem:function(b,c){if(!b)throw"LocalStorageUtils:: Invalid key provided.";var d=JSON.stringify(c);a.setItem(b,d)},removeItem:function(b){if(!b)throw"LocalStorageUtils:: Invalid key provided.";a.removeItem(b)}}}),define.Class("bootstrap.utils.Que",function(a){"use strict";a.binds(["_next"]),a.methods({initialize:function(a){a=a||{},this.processContext=a.processContext||this,this.active=!1,this.timeoutTicket=null,this.items=a.items||[],this.outputRate=a.outputRate||100,this.outputChunkSize=a.outputChunkSize||1,this.onprocess=null,this.setProcess(a.onprocess)},_next:function(){for(var a=Math.min(this.outputChunkSize,this.size()),b=0;a>b;b++)this.onprocess.call(this.processContext,this.items.shift(),b);this.size()?this.timeoutTicket=setTimeout(this._next,this.outputRate):this.stop()},size:function(){return this.items.length},start:function(){this.active||(this.stop(),this.active=!0,this.timeoutTicket=setTimeout(this._next,this.outputRate))},stop:function(){this.active&&(this.active=!1,clearTimeout(this.timeoutTicket))},clear:function(){this.stop(),this.items.length=0},add:function(){var a=this.items.push;a.apply(this.items,arguments),this.start()},silentAdd:function(){var a=this.items.push;a.apply(this.items,arguments)},addArray:function(){},setProcess:function(a){this.onprocess=a||function(){}}})}),define.Class("bootstrap.utils.Queue",function(a){var b=a;b.methods({initialize:function(){this.map={}},add:function(a,b){this.map[a]=this.map[a]||[],this.map[a].push(b)},addUnique:function(a,b){this.map[a]=this.map[a]||[];for(var c=!0,d=0;d<this.map[a].length;d++)if(this.map[a][d]===b){c=!1;break}c&&this.map[a].push(b)},remove:function(a,b){this.map[a]&&this.map[a].erase(b)},removeKey:function(a){delete this.map[a]},removeAll:function(){this.map={}},getQueue:function(a){return this.map[a]||[]},getQueueKeys:function(){return Object.keys(this.map)},hasQueue:function(a){return a?Object.some(this.map,function(b,c){return c===a})||!1:Object.some(this.map,function(){return!0})},popQueue:function(a){var b=this.getQueue(a);return this.removeKey(a),b},isReady:function(){return!0},clone:function(){return this}})}),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),define.oldClass({name:"bootstrap.utils.Tween",Class:{Static:{_activeTweens:[],killAll:function(){for(;this._activeTweens.length>0;)this.killTween(this._activeTweens[0])},killTweensOf:function(a){var b=[];this._activeTweens.forEach(function(c){c._target===a&&b.push(c)}),b.forEach(function(a){"function"==typeof this.killTween&&this.killTween(a)})},killTween:function(a){var b;a.dispose(),b=this._activeTweens.indexOf(a),-1!=b&&this._activeTweens.splice(b,1)},_startTween:function(){this.killTweensOf(this._target),this._activeTweens.push(this),this._t0=this._getCurrentTime(),window.requestAnimFrame(this._render.bind(this))},debugMode:!1,log:function(){},to:function(a,b,c){var d=this;new d(a,b,c)},execute:function(a,b,c,d){d.myProp=b;var e=this;new e({myProp:a},c,d)}},initialize:function(a,b,c){var d,e;this._target=a,this._duration=Math.floor(1e3*b),this._easeParams=[],this._t=0,this._tStep=null,this._isAlive=!0;var f="element"==typeOf(a);this._setValueFunc=f?this._setStyle:this._setTargetProperty,this._easeFunc=this.linear;var g=this._parseParameter(c,"ease","linear");void 0!==this[g]&&"function"==typeOf(this[g])&&(this._easeFunc=this[g]),this._onCompleteCallback=this._parseParameter(c,"onComplete",null),this._onUpdateCallback=this._parseParameter(c,"onUpdate",null);var h=this._parseParameter(c,"delay",0);for(var i in c)(f||void 0!==a[i])&&(d={},d.propName=i,f?(e=a.getStyle(i),d.origValue=parseFloat(e),d.unit=this._parseUnit(e),isNaN(d.origValue)&&(d.origValue=0,d.unit="px")):d.origValue=parseFloat(a[i]),d.targetValue=parseFloat(c[i]),this._easeParams.push(d));0===h?this._startTween():(h=parseInt(1e3*h,10),setTimeout(this._startTween.bind(this),h))},_parseUnit:function(a){var b=/[^0-9-]+$/;return b.test(a)===!0?String(String(a).match(b)[0]):""},_parseParameter:function(a,b,c){var d;return void 0!==a[b]?(d=a[b],delete a[b]):d=c,d},_render:function(){var a,b;if(this._isAlive){var c=this._getCurrentTime();this._tStep=c-this._t0,this._t0=c,this._t+=this._tStep;for(var d=0;d<this._easeParams.length;d++)a=this._easeParams[d],b=this._t<this._duration?this._easeFunc(this._t,0,1,this._duration)*(a.targetValue-a.origValue)+a.origValue:a.targetValue,this.debugMode===!0&&this.log(this._tStep,this._t,b),a.unit&&"px"==a.unit&&(b=Math.round(b)),this._setValueFunc(a.propName,b,a.unit),null!==this._onUpdateCallback&&this._onUpdateCallback(b,this._target,a.propName);this._t<this._duration?window.requestAnimFrame(this._render.bind(this)):(null!==this._onCompleteCallback&&this._onCompleteCallback(this),this.killTween(this))}},_getCurrentTime:function(){return(new Date).getTime()},_setStyle:function(a,b,c){this._target.setStyle(a,String(b)+c)},_setTargetProperty:function(a,b){this._target[a]=b},dispose:function(){this._isAlive=!1,this._target=null,this._onCompleteCallback=null,this._onUpdateCallback=null},linear:function(a,b,c,d){return c*a/d+b},strong_easeIn:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},strong_easeOut:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},strong_easeInOut:function(a,b,c,d){return(a/=.5*d)<1?.5*c*a*a*a*a*a+b:.5*c*((a-=2)*a*a*a*a+2)+b},swing:function(a,b,c,d){return-Math.cos(this.linear(a,b,c,d)*Math.PI)/2+.5}}}),define.bootstrapClass("bootstrap.utils.Utils",function(){function a(){}return a.extendPrototype({init:function(){var a=this;this._mergeDefinitions(),this.define.utils.definitionModifier=function(b,c){a._mergeDefinition(b,c)},this._prefixCounterMap={}},_mergeDefinitions:function(){var a=this.define.getDefinition("utils");for(var b in a)this._mergeDefinition(b,a[b])},_mergeDefinition:function(b,c){"this"===b.split(":").pop()?a.extendPrototype(c()):this._mergeToUtils(b,c)},_mergeToUtils:function(b,c){var d=c(),e={};e[b]=d,a.extendPrototype(e)},clone:function(){return this},isReady:function(){return!0}}),a}),define.bootstrapClass("bootstrap.utils.async.Async",function(){var a=define.getBootstrapClass("bootstrap.bootstrap.WClass"),b=new a({className:"Async",initialize:function(){}});return b.Bulk=new a({className:"Async.Bulk",Implements:[Options,Events],Binds:["run"],options:{completeEvent:"complete",errorEvent:"error",completeCallback:null,errorCallback:null,parallel:!0,specialTargets:[{target:null,method:null,completeEvent:null,errorEvent:null}],executeDelay:!1,keepAlive:!1,stopOnErrors:!0,timeout:0},_method:null,_pending:[],_running:!1,_error:[],_complete:[],_done:[],initialize:function(a,b,c){if(!a||void 0===a.length)return LOG.reportError(wixErrors.BULK_INVALID_TARGET,"Async.Bulk","initialize",a)(),this;this.$events={},this.setOptions(c),this._targets=a,this._method=b;var d=this,e=window;this.options.timeout>0&&(this._timeoutInterval=e.setTimeout(this._bulkOperationTimeout.bind(this),this.options.timeout)),this._onTargetComplete=function(){this.removeEvent(d._getTargetDetails(this).completeEvent,d._onTargetComplete),d._pending.erase(this),d._complete.push(this),d._done.push(this),d._checkProgress()},this._onTargetFailed=function(){this.removeEvent(d._getTargetDetails(this).errorEvent,d._onTargetFailed),d._pending.erase(this),d._error.push(this),d._done.push(this),d._checkProgress()},this.options.executeDelay?instanceOf(this.options.executeDelay,Number)&&this.options.executeDelay>0&&e.setTimeout(this.run,this.options.executeDelay):this.run()},_bulkOperationTimeout:function(){LOG.reportError(wixErrors.BULK_TIMEOUT,"Async.Bulk","_bulkOperationTimeout",String(this.options.timeout)+" ms | Pending Operations:"+this._pending)()},run:function(){return void 0!==this._targets.length&&null!==this._targets.length&&0===this._targets.length?(this._clearInterval(),this._handleBulkComplete(),void 0):(this._targets.each(function(a,b){this._addToQue(a,b)},this),this.options.parallel?this._targets.each(this._runMethodOnTarget,this):this._runNextTarget(),void 0)},_runNextTarget:function(){var a=this._targets.length-this._pending.length,b=this._targets[a];this._runMethodOnTarget.apply(this,[b])},_clearInterval:function(){this._timeoutInterval&&(clearInterval(this._timeoutInterval),delete this._timeoutInterval)},_runMethodOnTarget:function(a){instanceOf(this._method,Function)&&this._method.call(a),instanceOf(this._method,String)&&(instanceOf(a[this._method],Function)?a[this._method].call(a):LOG.reportError(wixErrors.BULK_NO_METHOD,"Async.Bulk","_runMethodOnTarget",a)())},stop:function(){},destroy:function(){this._targets&&this._targets.each(function(a){a.removeEvent(this._getTargetDetails(this).completeEvent,this._onTargetComplete),a.removeEvent(this._getTargetDetails(this).errorEvent,this._onTargetFailed)},this),this._targets=null},progress:function(){return{complete:this._complete.slice(),error:this._error.slice(),total:this._targets.slice()}},_addToQue:function(a,b){var c=this._getTargetDetails(a);this._pending[b]=a,a.addEvent(c.completeEvent,this._onTargetComplete),a.addEvent(c.errorEvent,this._onTargetFailed)},_onTargetComplete:void 0,_onTargetFailed:void 0,_getTargetDetails:function(a){var b,c,d={method:this._method,completeEvent:this.options.completeEvent,errorEvent:this.options.errorEvent};for(b=0,c=this.options.specialTargets.length;c>b;b++)if(this.options.specialTargets[b].target===a)return this.options.specialTargets[b].target.implement(d);return d},_checkProgress:function(){this._pending.length>0?this.options.parallel||this._runNextTarget():(this.options.stopOnErrors&&this._error.length>0?this._handleBulkError():this._handleBulkComplete(),this._clearInterval(),this.options.keepAlive||this.destroy())},_handleBulkError:function(a){a?(this.fireEvent("error",[this._complete,this._error]),instanceOf(this.options.errorCallback,Function)&&this.options.errorCallback(this._complete,this._error)):window.setTimeout(this._handleBulkError.bind(this,!0),1)},_handleBulkComplete:function(a){a?(this.fireEvent("complete",[this._complete,this._error]),instanceOf(this.options.completeCallback,Function)&&this.options.completeCallback(this._complete,this._error)):window.setTimeout(this._handleBulkComplete.bind(this,!0),1)}}),b}),define.utils("analytics:this",function(){return{_sendURLtoGoogleAnalytics:function(a,b){a._trackPageview(b)},_getGoogleAnalyticsTracker:function(a){return window._gat?(pageTracker=_gat._getTracker(a),pageTracker._initData(),pageTracker):void 0},reportSiteAnalytics:function(a,b){var c="UA-2117194-25",d="site",e=d+"/"+a;b&&(e=e+"/"+b),this.sendToGoogleAnalytics(e,c)},reportEditorAnalytics:function(a,b){var c="UA-2117194-23",d="editor",e=d+"/"+a;b&&(e=e+"/"+b),window.siteHeader&&(window.siteHeader.username&&(e=e+"/"+siteHeader.username),window.siteHeader.siteName&&(e=e+"/"+siteHeader.siteName)),this.sendToGoogleAnalytics(e,c)},sendToGoogleAnalytics:function(a,b){try{if(window._gat){var c=this._getGoogleAnalyticsTracker(b);return this._sendURLtoGoogleAnalytics(c,a,b),void 0}var d="https:"==document.location.protocol?"https://ssl.":"http://www.",e=new Element("script",{id:"googleAnalyticsScript"}),f=document.getElementsByTagName("script")[0];e.type="text/javascript",f.parentNode.insertBefore(e,f),e.src=d+"google-analytics.com/ga.js",this.gaCheck(a,b)}catch(g){}},gaCheck:function(a,b){try{if(window._gat){var c=this._getGoogleAnalyticsTracker(b);this._sendURLtoGoogleAnalytics(c,a)}else setTimeout(this.gaCheck.bind(this,a,b),1e3)}catch(d){}}}}),define.utils("browser:this",function(){return{show:function(a){$(a).uncollapse()},hide:function(a){$(a).collapse()},setChildIndex:function(a,b,c){var d=a.getChildren(),e=d[b],f=d[c];e==f&&e.fireEvent(Constants.DisplayEvents.MOVED_IN_DOM,Constants.DisplayEvents.MOVED_IN_DOM),e&&f&&(e.inject(f,b>c?"before":"after"),e.fireEvent(Constants.DisplayEvents.MOVED_IN_DOM,Constants.DisplayEvents.MOVED_IN_DOM),f.fireEvent(Constants.DisplayEvents.MOVED_IN_DOM,Constants.DisplayEvents.MOVED_IN_DOM))},waitForElement:function(a,b,c,d){var e=0,f=c/b,g=setInterval(function(){e++,e>f&&(clearInterval(g),d(!1));var b=$$(a).length;b>0&&(clearInterval(g),d(!0))},b)},getComputedStyle:function(a){return window.getComputedStyle?window.getComputedStyle(a,null):a.currentStyle},_htmlTextReplacements:[["<","&lt;"],[">","&gt;"]],convertToHtmlText:function(a){a=a.toString();for(var b=0;b<this._htmlTextReplacements.length;++b)for(var c=this._htmlTextReplacements[b][0],d=this._htmlTextReplacements[b][1];-1!=a.indexOf(c);)a=a.replace(c,d);return a},convertFromHtmlText:function(a){for(var b=0;b<this._htmlTextReplacements.length;++b)for(var c=this._htmlTextReplacements[b][0],d=this._htmlTextReplacements[b][1];-1!=a.indexOf(d);)a=a.replace(d,c);return a},getWindowSize:function(){var a,b;if("undefined"!=typeof window.innerWidth)a=window.innerWidth,b=window.innerHeight;else if("undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth)a=document.documentElement.clientWidth,b=document.documentElement.clientHeight;else{var c=document.getElementsByTagName("body")[0];a=c.clientWidth,b=c.clientHeight}return{width:a,height:b}},getPositionRelativeToWindow:function(a){if(!$$(a).length)return{x:0,y:0};var b=$$(a)[0],c=b.getPosition(),d=window.getScroll();return c.x-=d.x,c.y-=d.y,c},getMidPos:function(a,b,c){var d,e,f,g,h=window.getSize(),i=h.x,j=h.y;c.page?(d=c.page.x,e=c.page.y,f=c.client.x+a,g=c.client.y+b):(d=c.pageX,e=c.pageY,f=c.clientX+a,g=c.clientY+b);var k=f>=i?d-(f-i):d,l=g>=j?e-(g-j):e;return{x:k,y:l}},getCSSBrowserFeature:function(a){var b=Modernizr.prefixed(a.camelCase());return b?b.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()}).replace(/^ms-/,"-ms-"):!1},getIsSibling:function(a,b){return a&&b&&a.getParent()===b.getParent()},iframeCallback:0,prepareIFrameForWrite:function(a,b){try{var c=a.contentWindow.document||a.contentWindow.document;b(a,c)}catch(d){var e="tmp"+this.iframeCallback++;W[e]=function(){var c=a.contentDocument||a.contentWindow.document;b(a,c)},a.src=W.Config.getServiceTopologyProperty("scriptsRoot")+"/html/sameDomainIFrame.html?d="+encodeURIComponent(document.domain)+"&c="+encodeURIComponent(e)}},forceBrowserRepaint:function(a,b,c){c=c||["safari"];var d=!1,e=0;for(e;e<c.length;e++)if(Browser[c[e]]){d=!0;break}d&&(a=a||$$("body"),b=b||150,a.setStyle("opacity",.99),setTimeout(function(){a.setStyle("opacity",1)},b))},forceBrowserRepaintOnScroll:function(a){Browser.safari&&(a=a||$$("body"),this._op=1===this._op?.99:1,a.setStyle("opacity",this._op))},stopMouseWheelPropagation:function(a){a=a||{};var b=this.getSize().y;(this.scrollTop===this.scrollHeight-b&&a.wheel<0||0===this.scrollTop&&a.wheel>0)&&a.preventDefault()},printNodesWithStyle:function(a,b){var c=this.getComputedStyle(a);if(c&&c[b]&&"auto"!=c[b]&&console.log(c[b],a),a.childNodes)for(var d=a.childNodes,e=0;e<d.length;e++)this.printNodesWithStyle(d[e],b)},requestAnimFrame:function(){},isInputKey:function(a){return a?48>a?13==a||32==a||8==a||46==a:a>=112&&145>=a?!1:a>90&&93>=a?!1:!0:!1},numberToPageId:function(a){var b=a.toString(36),c=b.length;return 3>c&&(b="0000".substr(0,3-c)+b),b},serverRequest:function(a,b,c,d,e){var f="",g=new Request.JSON({url:f+a,onSuccess:d,onFailure:e});"post"==b?g.post(c):g.get(c)},freezeScroll:function(a){if(!window.isScrollFrozen){var b=window.getScroll().y,c=document.onscroll;this.callLater(function(){document.onscroll=c,window.isScrollFrozen=!1},null,null,a||500),window.isScrollFrozen=!0,document.onscroll=function(a){var c=window.getScroll().y;return b!=c&&window.scrollTo(0,b),a.preventDefault(),!1}}}}}),function(){var a="undefined"!=typeof window?window:exports,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=function(){try{document.createElement("$")}catch(a){return a}}();a.btoa||(a.btoa=function(a){for(var d,e,f=0,g=b,h="";a.charAt(0|f)||(g="=")&&f%1;h+=g.charAt(63&d>>8-8*(f%1))){if(e=a.charCodeAt(f+=.75),e>255)throw c;d=d<<8|e}return h}),a.atob||(a.atob=function(a){if(a=a.replace(/=+$/,""),1==a.length%4)throw c;for(var d,e,f=0,g=0,h="";e=a.charAt(g++);~e&&(d=f%4?64*d+e:e,f++%4)?h+=String.fromCharCode(255&d>>(6&-2*f)):0)e=b.indexOf(e);return h})}(),define.utils("cookies",function(){"use strict";return{createCookie:function(a,b,c){var d="";if(c){var e=new Date;e.setTime(e.getTime()+c),d="; expires="+e.toGMTString()}document.cookie=a+"="+b+d+"; path=/"},deleteCookie:function(a){document.cookie=a+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/"},hasCookie:function(a){return null!==this.readCookie(a)},readCookie:function(a){var b=document.cookie.match(new RegExp("\\b"+a+"=(.*?)(;|$)"));return b?b[1]:null}}}),define.utils("debug:this",function(){return{getStackTrace:function(a){a=!isNaN(a)&&a>0?a:1;var b=new Error,c="(no stack)";b.stack?c=b.stack:window.opera&&b.message&&(c=b.message),c=c.split("[object Object]").join("{}"),c=c.split("[object Array]").join("[]"),c=c.replace(/at/g,""),c=c.split(window.serviceTopology.scriptsLocationMap.web+"/javascript/").join("");var d=c.split("\n");return"error"==d[0].toLowerCase()&&a++,d=d.splice(a),d.join("<<").replace(/\s{2,}/g," ")}}}),define.utils("Validation:this",function(){return{isObjectEmpty:function(a){return Object.some(a,function(){return!0})},isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isURLPartValid:function(a){return/[^a-z_0-9]/.test(a)===!1&&a.length>=4},convertToValidUrlPart:function(a){return a.replace(/[ ]/g,"-").replace(/[^A-Za-z0-9-]/g,"").toLowerCase()},isValidUrl:function(a){return 0===a.indexOf(".")&&(a=this._rel_to_abs(a)),this._RegEx.validUrlReg.test(a)},_rel_to_abs:function(a){if(/^(https?|file|ftps?|mailto|javascript|data:image\/[^;]{2,9};):/i.test(a))return a;var b=location.href.match(/^(.+)\/?(?:#.+)?$/)[0]+"/";if("//"==a.substring(0,2))return location.protocol+a;if("/"==a.charAt(0))return location.protocol+"//"+location.host+a;if("./"==a.substring(0,2))a="."+a;else{if(/^\s*$/.test(a))return"";a="../"+a}for(a=b+a;/\/\.\.\//.test(a=a.replace(/[^\/]+\/+\.\.\//g,"")););return a=a.replace(/\.$/,"").replace(/\/\./g,"").replace(/"/g,"%22").replace(/'/g,"%27").replace(/</g,"%3C").replace(/>/g,"%3E")},isValidUrlNoProtocol:function(a){return this._RegEx.validUrlNoProtocolReg.test(a)},isValidEmail:function(a){return this._RegEx.validEmailReg.test(a)},isValidTwitterUser:function(a){return this._RegEx.ValidTwitterUserReg.test(a)},validatePageTitle:function(a){var b=a;if(b=b.replace(/[^A-Za-z0-9_ ]/g,""),0===b.indexOf(" "))for(;0===b.indexOf(" ");)b=b.substr(1);if(b.indexOf("  ")>-1)for(;b.indexOf("  ")>-1;)b=b.replace("  "," ");return b=b.substr(0,Constants.Page.NAME_MAX_LENGTH),""===b&&(b="untitled"),b},isInputKey:function(a){return a?48>a?13==a||32==a||8==a||46==a:a>=112&&145>=a?!1:a>90&&93>=a?!1:!0:!1},isEquivalent:function(a,b){if(typeof a!=typeof b)return!1;if(a instanceof Array&&!(b instanceof Array))return!1;if("function"===(typeof a&&typeof b))return!0;if("string"==typeof a||"number"==typeof a||"boolean"==typeof a)return a===b;var c=0,d=a instanceof Array;if(d){var e=function(a,c){return W.Utils.isEquivalent(a,b[c])};return a.length==b.length&&a.every(e,b)}for(var f in a){if(a.hasOwnProperty(f)&&!b.hasOwnProperty(f))return!1;++c}for(f in b)b.hasOwnProperty(f)&&c--;if(0!==c)return!1;for(f in a)if(a.hasOwnProperty(f)&&!this.isEquivalent(a[f],b[f]))return!1;return!0},_RegEx:{validUrlReg:new RegExp("^(ftps|ftp|http|https):\\/\\/[\\w\\-_]+(\\.[\\w\\-_]+)+([\\w\\-\\.,@?^=%&*;:/~\\+#!|]*[\\w\\-\\@?^=%&*;/~\\+#!|])?$"),validUrlNoProtocolReg:new RegExp("^[\\w\\-_]+(\\.[\\w\\-_]+)+([\\w\\-\\.,@?^=%&*;:/~\\+#!|]*[\\w\\-\\@?^=%&*;/~\\+#!|])?$"),validEmailReg:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,ValidTwitterUserReg:/^@?[a-zA-Z0-9_%]+$/}}}),define.utils("editorUtils:this",function(){return{getAddPageTemplateFromMainPage:function(a,b,c){return this.getAddPageTemplateFromPage("mainPage",a,b,c)},getAddPageTemplateFromCurrentPage:function(a,b,c){return this.getAddPageTemplateFromPage(W.Preview.getPreviewManagers().Viewer.getCurrentPageId(),a,b,c)},getAddPageTemplateFromPage:function(a,b,c,d){c=c||"";var e=W.Preview.getHtmlElement(a).getLogic(),f="ADD_PAGE_"+b.toUpperCase()+"_GROUPNAME",g="ADD_PAGE_"+b.toUpperCase()+c+"_NAME",h="ADD_PAGE_"+b.toUpperCase()+c+"_DESCRIPTION",i=W.ClipBoard.copyComponent(e);i=this._handleWixAppsComponents(i);var j={group:f,name:g,applicationType:d||Constants.WEditManager.SITE_TYPE_WEB,previewPic:b.toLowerCase()+c+".png",pageDescription:h,serializedPageData:i},k=JSON.encode(j);return k=k.replace(/\\\"/g,"\\'")},_handleWixAppsComponents:function(a){var b=W.Preview.getPreviewManagers().Viewer.getAppDataHandler();return a.components&&a.components.each(function(a){if("wixapps.integration.components.AppPart"==a.componentType){var c=a.data,d=c.appInnerID,e=b.getAppData(d);c.appInnerID=e.appDefinitionId;var f=c.appLogicParams;f&&f.hasOwnProperty("categoryId")&&(f.categoryId.value="defaultCategory")}else a.hasOwnProperty("components")&&this._handleWixAppsComponents(a)}.bind(this)),a},openSidePanel:function(a,b){var c=window.$$('[comp="'+a+'"]')[0],d=c&&c.getLogic().getIsDisplayed();if(d)return!1;var e=W.Editor.getEditorUI(),f=e._history;return f.pop(),e._updateBreadcrumbState(),W.Commands.executeCommand(b),!0}}}),define.Class("bootstrap.utils.Hash",function(a){var b=a;b.inherits("bootstrap.utils.Events"),b.resources(["W.Utils","W.Experiments"]),b.fields({intervalId:0}),b.methods({initialize:function(){this._storedExtData="","onhashchange"in window&&!Browser.ie8?window.onhashchange=function(){this._onHashChange()}.bind(this):(this._storedObjectId=window.location.hash,clearInterval(this.intervalId),this.intervalId=window.setInterval(function(){this._onHashChange()}.bind(this),100))},fireHashChangeEvent:function(){Browser&&Browser.ie8?this._onHashChange("force change"):this._onHashChange()},_onHashChange:function(a){var b=this.getHashParts(),c=this._storedObjectId!=b.id;"force change"===a&&(c=!0);var d=this._storedExtData!=b.extData;if(c||d){this._storedObjectId=b.id,this._storedExtData=b.extData;var e=!1;this._silencedExtData&&this._silencedExtData==b.extData&&(delete this._silencedExtData,e=!0),this.fireEvent("change",{newHash:b.id,isForSureAfterChange:!0,extData:b.extData,isIdChanged:c,isExtDataChanged:d,silent:e})}this.resources.W.Experiments.isExperimentOpen("MainPageHash","New")||this._cleanHomePageURL()},getHash:function(){var a=window.location.hash;a=unescape(a);var b=this.getHashParts(a);return b.id},getHashParts:function(a){a=a||window.location.hash;var b="|",c="/",d="/",e=a,f="",g="";a.length>1&&"#!"==a.substr(0,2)?e=a.substr(2):"#"==a.charAt(0)&&(e=a.substr(1));var h=e.indexOf(c),i=e.indexOf(b),j=c;(-1!=i&&h>i||i>-1&&-1==h)&&(j=b);var k=e.indexOf(j);return k>-1&&(f=e.substr(0,k),e=e.substr(k+1)),k=e.indexOf(d),k>-1&&(g=e.substr(k+1),e=e.substr(0,k)),{id:e?e:"",title:f?f:"",extData:g?g:""}},getHashPartsString:function(a,b,c){var d="/",e="";return b&&(e=b.replace(/([^\s\w\d_-])/g,"").replace(/\s+/g,"-")),e+=d+a,c&&(e+=d+c),e},setHash:function(a,b,c,d){b=b||"untitled";var e=this.getHashPartsString(a,b,c),f=this._storedObjectId!==a,g=this._storedExtData!=c,h=this.resources.W.Experiments.isExperimentOpen("MainPageHash","New"),i=this.getHashParts(e).id===W.Viewer.getHomePageId();(f||g||i&&h)&&(d&&(this._silencedExtData=c),this.fireEvent("change",{newHash:a,isForSureAfterChange:!1,extData:c,isExtDataChanged:g,isIdChanged:f,silent:d===!0}),this.resources.W.Utils.callLater(function(){var a=window.location.hash;if(h&&i&&this._isHistoryApiAvailable())history.replaceState("",document.title,window.location.pathname+window.location.search);else{if(h&&i&&""===a)return;window.location.hash="!"+e}}.bind(this)))},setHashExtData:function(a){var b=this.getHashParts();this.setHash(b.id,b.title,a,!0)},_cleanHomePageURL:function(){var a,b,c=this.getHashParts(a);if(!c.extData&&W.Viewer.getHomePageId()===c.id)if(window.history&&window.history.replaceState){a=window.location.hash,b=window.location.href;var d=b.substr(0,b.length-a.length);window.history.replaceState(null,null,d)}else window.location.hash=""},_isHistoryApiAvailable:function(){return window.history&&window.history.replaceState}})}),define.utils("hashing",function(){return{SHA256:function(){function a(a){return h(q(g(a),8*a.length))}function b(a,b){var c=g(a);c.length>16&&(c=q(c,8*a.length));for(var d=[],e=[],f=0;16>f;f++)d[f]=909522486^c[f],e[f]=1549556828^c[f];var i=q(d.concat(g(b)),512+8*b.length);return h(q(e.concat(i),768))}function c(a){try{}catch(b){s=0}for(var c,d=s?"0123456789ABCDEF":"0123456789abcdef",e="",f=0;f<a.length;f++)c=a.charCodeAt(f),e+=d.charAt(15&c>>>4)+d.charAt(15&c);return e}function d(a){try{}catch(b){t=""}for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d="",e=a.length,f=0;e>f;f+=3)for(var g=a.charCodeAt(f)<<16|(e>f+1?a.charCodeAt(f+1)<<8:0)|(e>f+2?a.charCodeAt(f+2):0),h=0;4>h;h++)d+=8*f+6*h>8*a.length?t:c.charAt(63&g>>>6*(3-h));return d}function e(a,b){var c,d,e,f,g=b.length,h=[],i=[],j=Math.ceil(a.length/2);for(c=0;j>c;c++)i[c]=a.charCodeAt(2*c)<<8|a.charCodeAt(2*c+1);for(;i.length>0;){for(f=[],e=0,c=0;c<i.length;c++)e=(e<<16)+i[c],d=Math.floor(e/g),e-=d*g,(f.length>0||d>0)&&(f[f.length]=d);h[h.length]=e,i=f}var k="";for(c=h.length-1;c>=0;c--)k+=b.charAt(h[c]);var l=Math.ceil(8*a.length/(Math.log(b.length)/Math.log(2)));for(c=k.length;l>c;c++)k=b[0]+k;return k}function f(a){for(var b,c,d="",e=-1;++e<a.length;)b=a.charCodeAt(e),c=e+1<a.length?a.charCodeAt(e+1):0,b>=55296&&56319>=b&&c>=56320&&57343>=c&&(b=65536+((1023&b)<<10)+(1023&c),e++),127>=b?d+=String.fromCharCode(b):2047>=b?d+=String.fromCharCode(192|31&b>>>6,128|63&b):65535>=b?d+=String.fromCharCode(224|15&b>>>12,128|63&b>>>6,128|63&b):2097151>=b&&(d+=String.fromCharCode(240|7&b>>>18,128|63&b>>>12,128|63&b>>>6,128|63&b));return d}function g(a){for(var b=[],c=a.length>>2,d=0;c>d;d++)b[d]=0;for(var e=0;e<8*a.length;e+=8)b[e>>5]|=(255&a.charCodeAt(e/8))<<24-e%32;
return b}function h(a){for(var b="",c=0;c<32*a.length;c+=8)b+=String.fromCharCode(255&a[c>>5]>>>24-c%32);return b}function i(a,b){return a>>>b|a<<32-b}function j(a,b){return a>>>b}function k(a,b,c){return a&b^~a&c}function l(a,b,c){return a&b^a&c^b&c}function m(a){return i(a,2)^i(a,13)^i(a,22)}function n(a){return i(a,6)^i(a,11)^i(a,25)}function o(a){return i(a,7)^i(a,18)^j(a,3)}function p(a){return i(a,17)^i(a,19)^j(a,10)}function q(a,b){var c,d,e,f,g,h,i,j,q,s,t,v,w=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],x=[];for(a[b>>5]|=128<<24-b%32,a[(b+64>>9<<4)+15]=b,q=0;q<a.length;q+=16){for(c=w[0],d=w[1],e=w[2],f=w[3],g=w[4],h=w[5],i=w[6],j=w[7],s=0;64>s;s++)x[s]=16>s?a[s+q]:r(r(r(p(x[s-2]),x[s-7]),o(x[s-15])),x[s-16]),t=r(r(r(r(j,n(g)),k(g,h,i)),u[s]),x[s]),v=r(m(c),l(c,d,e)),j=i,i=h,h=g,g=r(f,t),f=e,e=d,d=c,c=r(t,v);w[0]=r(c,w[0]),w[1]=r(d,w[1]),w[2]=r(e,w[2]),w[3]=r(f,w[3]),w[4]=r(g,w[4]),w[5]=r(h,w[5]),w[6]=r(i,w[6]),w[7]=r(j,w[7])}return w}function r(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}var s=0,t="",u=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998];return{hex_sha256:function(b){return c(a(f(b)))},b64_sha256:function(b){return d(a(f(b)))},any_sha256:function(b,c){return e(a(f(b)),c)},hex_hmac_sha256:function(a,d){return c(b(f(a),f(d)))},b64_hmac_sha256:function(a,c){return d(b(f(a),f(c)))},any_hmac_sha256:function(a,c,d){return e(b(f(a),f(c)),d)}}}()}}),define.utils("helpers:this",function(){return{log:function(){},_fixPrefix:function(a){return a=a?a.replace(/[^A-Za-z0-9_-]/g,""):"",a.length>3&&(a=a?a.replace(/[aeiou]/gi,""):""),a=a?a:Constants.components.DEFAULT_PREFIX},_calcNewIndex:function(a){var b=this._prefixCounterMap;for(b[a]=void 0===b[a]?0:++b[a];$(a+b[a].toString(36));)b[a]++;var c=a+b[a].toString(36);return c+"-"+Math.floor(65535*Math.random()).toString(36)},getUniqueId:function(a){return a=this._fixPrefix(a),this._calcNewIndex(a)},getGUID:function(){var a=function(){return Math.floor(65536*Math.random()).toString(16)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},getAntiCacheSuffix:function(){var a,b=W.Utils.getQueryParam("nocache"),c=W.Utils;return"file:"===window.location.protocol||"false"==b?a="":(c._antiCacheSuffix||(c._antiCacheSuffix=(new Date).getTime().toString(36)),a="?noCache="+c._antiCacheSuffix),a},setUrlParam:function(a,b,c){var d=a.split("?"),e=[],f=!1;if(2==d.length){e=d[1].split("&");for(var g=0;g<e.length;g++)if(0===e[g].indexOf(b+"=")){e[g]=b+"="+String(c),f=!0;break}}return f||e.push(b+"="+String(c)),d[1]=e.join("&"),a=d.join("?")},getQueryStringAsObject:function(a){var b={},c=a?a:window.location.href;return c.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(a,c,d,e){b[c]=e}),b},getQueryStringParamsAsObject:function(a){var b={},c=a?a:window.location.search;return c.substr(c.indexOf("?")).replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(a,c,d,e){b[c]=e}),b},getMailFromMailtoURL:function(a){var b="mailto:",c=b.length;a.substr(0,c)==b&&(a=a.substr(c));var d="?subject=",e=a.indexOf(d);return e>-1&&(a=a.substr(0,e)),a},getQueryParam:function(a,b){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+a+"=([^&#]*)",d=new RegExp(c),e=b||window.location.href,f=d.exec(e);return null===f?"":f[1]},callLater:function(a,b,c,d){if(a&&"function"===typeOf(a)){b=b||[],c=c||window,d=d||1;var e="true"===this.getQueryParam("stack")?this.getStackTrace():"";return setTimeout(function(){a.callLaterStack=e,a.apply(c,b),delete a.callLaterStack},d)}},clearCallLater:function(a){clearTimeout(a)},callOnNextRender:function(a,b){b=b||60;var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,b)};return c(a)},clearOnNextRender:function(a){var b=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout;b(a)},objectSizeDelta:function(a){var b=0;for(var c in a)a.hasOwnProperty(c)&&b++;return b},getTimestamp:function(){var a=[W.Resources.get("EDITOR_LANGUAGE","DAY_SUNDAY"),W.Resources.get("EDITOR_LANGUAGE","DAY_MONDAY"),W.Resources.get("EDITOR_LANGUAGE","DAY_TUESDAY"),W.Resources.get("EDITOR_LANGUAGE","DAY_WEDNESDAY"),W.Resources.get("EDITOR_LANGUAGE","DAY_THURSDAY"),W.Resources.get("EDITOR_LANGUAGE","DAY_FRIDAY"),W.Resources.get("EDITOR_LANGUAGE","DAY_SATURDAY")],b=new Date,c=b.getDate(),d=b.getMonth()+1,e=W.Resources.get("EDITOR_LANGUAGE","MONTH_"+d),f=b.getHours();10>f&&(f="0"+f);var g=b.getMinutes();10>g&&(g="0"+g);var h=b.getDay(),i=b.getYear()+1900;return a[h]+", "+c+" "+e+" "+i+", "+f+":"+g},sanitizeUnicode:function(a){return"string"==typeof a?a.replace(/[\u2028\u2029]/g,"\n"):a},encodeUrl:function(a){return a?encodeURI(a):""},encodeValue:function(a){return null===a||void 0===a?"":encodeURIComponent(a)},getUniqueArray:function(a){for(var b=[],c=a.length,d=0;c>d;d++){for(var e=d+1;c>e;e++)a[d]===a[e]&&(e=++d);b.push(a[d])}return b},areArraysContainSameElements:function(a,b){var c=a.filter(function(a){return-1==b.indexOf(a)}),d=b.filter(function(b){return-1==a.indexOf(b)});return d&&d.length>0||c&&c.length>0?!1:!0},areObjectsEqual:function(a,b){var c;if(a&&!b||!a&&b)return!1;for(c in a)if(a.hasOwnProperty(c)&&"undefined"==typeof b[c]&&"undefined"!=typeof a[c])return!1;for(c in a)if(a.hasOwnProperty(c))if(a[c])switch(typeof a[c]){case"object":if(!this.areObjectsEqual(a[c],b[c]))return!1;break;case"function":if("undefined"==typeof b[c]||a[c].toString()!=b[c].toString())return!1;break;default:if(a[c]!=b[c])return!1}else if(b[c])return!1;for(c in b)if(b.hasOwnProperty(c)&&"undefined"==typeof a[c]&&"undefined"!=typeof b[c])return!1;return!0},stringToBoolean:function(a){return a?"true"==a.toLowerCase():!1},strEndsWith:function(a,b){return-1!==a.indexOf(b,a.length-b.length)},getParentByTagName:function(a,b){var c=a.parentNode;return c?c.tagName.toLowerCase()==b?c:this.getParentByTagName(c,b):!1},getComponentLogicFromDom:function(a){return this.getComponentLogicFromDomByAttribute("id",a)},getComponentLogicFromDomByAttribute:function(a,b){var c=W.Preview?W.Preview.getPreviewSite():window,d=c.$$("["+a+'="'+b+'"]')[0];return d?d.getLogic():null},moveItemInArray:function(a,b,c){if(c>=a.length)for(var d=c-a.length;d--+1;)a.push(void 0);return a.splice(c,0,a.splice(b,1)[0]),a},openPopupWindow:function(a,b,c){window.open(a,b,c)}}}),function(){var a,b,c,d,e,f,g,h;a=document.createElement("style"),a.id="testCss",document.getElementsByTagName("head")[0].appendChild(a),d=a.sheet?"sheet":"styleSheet",b=a[d],b||LOG.reportError(wixErrors.UTILS_STYLE_NOT_FOUND,"Styles","feature detection"),e=b.ownerNode?"ownerNode":"owningElement",g=b.deleteRule?"deleteRule":"removeRule",f=b.cssRules?"cssRules":"rules";var i,j=function(a){return a.replace(/[\s]+/g," ").replace(/'/g,'"').replace(/^\s+/,"").replace(/\s*$/,"")};i=b.insertRule?function(a,b){if(a=j(a),this._rulesMap[a])return LOG.reportError(wixErrors.UTILS_RULE_ALREADY_EXIST,"Styles","createRule",a+""),void 0;var c=this.insertRule(a+"{"+b+"}",this.cssRules.length),d=this.cssRules[c];return this._rulesMap[a]=d,this._browserSelectorMapping[a]=d.selectorText,d}:function(a,b){if(a=j(a),this._rulesMap[a])return LOG.reportError(wixErrors.UTILS_RULE_ALREADY_EXIST,"Styles","createRule",a+""),void 0;var c,d=this.addRule(a,b);if(-1!=d)c=this.rules[d];else for(var e=0;e<this.rules.length;++e)if(this.rules[e].selectorText==a){c=this.rules[e];break}return this._rulesMap[a]=c,this._browserSelectorMapping[a]=c.selectorText,c},b._rulesMap={},b._browserSelectorMapping={},c=i.apply(b,["#tempSelector","color:black;"]),h=c.cssText?"cssText":"no_support";var k,l=function(){return this[d]},m=function(){return this[f]},n=function(){this._rulesMap=void 0,this.styleNode.dispose()},o=function(){this._rulesMap=[];for(var a=this[f].length-1;a>=0;--a)this[g](a)},p=function(a){return a=j(a),this._rulesMap[a]?this._rulesMap[a]:null},q=function(a){a=j(a);var b=!1;if(this._rulesMap[a]){for(var c=this._browserSelectorMapping[a],d=this[f].length-1,e=d;e>=0;--e)this[f][e].selectorText==c&&(this[g](e),b=!0);delete this._rulesMap[a]}return b};k=b.cssRules?function(a,b){a=j(a);var c=this._rulesMap[a];return c?c.style[h]=b:(c=this.createRule(a,b),this._rulesMap[a]=c),c}:function(a,b){return a=j(a),this._rulesMap[a]&&(this.removeRuleBySelector(a),delete this._rulesMap[a]),this.createRule(a,b)},define.utils("createStyleSheet:this",function(){function a(a){var b=W.Utils.getUniqueId(a),c=new Element("style",{id:b}).inject(document.head),f=c[d];if(!f)for(var g=document.styleSheets,h=0;h<g.length;++h)if(g[h][e]===c){f=g[h];break}return f?(f._rulesMap={},f._browserSelectorMapping={},f.styleNode=c,f.getRuleList=m,f.removeStyleSheet=n,f.clearRules=o,f.getRuleBySelector=p,f.removeRuleBySelector=q,f.updateRule=k,f.createRule=i,c.getStyleSheet=l,f):(LOG.reportError(wixErrors.UTILS_ERR_CREATE_STYLE,"Styles","createStyleSheet",""),void 0)}return{createStyleSheet:function(a){return this._styles.createStyleSheet(a)},_styles:{createStyleSheet:a}}})}(),define.utils("testUtils:this",function(){return{instanceIndex:0,_$getUniqeId:function(a){var b=this.instanceIndex,c=Utils.getUniqueId(a);return this.instanceIndex=b,c}}});