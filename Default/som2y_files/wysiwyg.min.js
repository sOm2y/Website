define.Class.overrideName.multi({"mobile.core.components.BaseList":"core.components.BaseList","mobile.core.components.Container":"core.components.Container","mobile.core.components.Image":"core.components.Image","mobile.core.components.TwitterFollow":"core.components.TwitterFollow","mobile.core.components.MenuButton":"core.components.MenuButton","mobile.core.components.Page":"core.components.Page","mobile.core.components.ServiceItem":"core.components.ServiceItem","mobile.core.components.SimpleButton":"core.components.SimpleButton","mobile.core.components.SiteStructure":"core.components.SiteStructure"}),function(){function a(){function a(b){return a.plugins.forEach(function(a){b=a.exec(b)}),b}return a.plugins=[],a.plugins.push({exec:function(a){return a.document_data.THEME_DATA&&(a.theme_data.THEME_DATA||(a.theme_data.THEME_DATA=a.document_data.THEME_DATA),delete a.document_data.THEME_DATA),a}}),a.plugins.push({exec:function(a){return a}}),a}define.resource("dataFixer",{fix:a()})}(),define.Class.overrideName.multi({"mobile.core.skins.InlineSkin":"skins.core.InlineSkin","mobile.core.skins.TwitterTweetSkin":"skins.core.TwitterTweetSkin","mobile.core.skins.ButtonSkin":"skins.core.ButtonSkin","mobile.core.skins.ContactItemSkin":"skins.core.ContactItemSkin","mobile.core.skins.ContactListSkin":"skins.core.ContactListSkin","mobile.core.skins.FacebookCommentSkin":"skins.core.FacebookCommentSkin","mobile.core.skins.GlobalMenuSkin":"skins.core.GlobalMenuSkin","mobile.core.skins.GooglePlusOneSkin":"skins.core.GooglePlusOneSkin","mobile.core.skins.HeaderSkin":"skins.core.HeaderSkin","mobile.core.skins.HomeButtonSkin":"skins.core.HomeButtonSkin","mobile.core.skins.ImageNewSkin":"skins.core.ImageNewSkin","mobile.core.skins.ImageSkin":"skins.core.ImageSkin","mobile.core.skins.MenuButtonSkin":"skins.core.MenuButtonSkin","mobile.core.skins.NetworkItemSkin":"skins.core.NetworkItemSkin","mobile.core.skins.NetworkListSkin":"skins.core.NetworkListSkin","mobile.core.skins.PageTitleSkin":"skins.core.PageTitleSkin","mobile.core.skins.PhotoFullScreenSkin":"skins.core.PhotoFullScreenSkin","mobile.core.skins.PhotoGalleryFullScreenDefaultSkin":"skins.core.PhotoGalleryFullScreenDefaultSkin","mobile.core.skins.PhotoGalleryGridDefaultSkin":"skins.core.PhotoGalleryGridDefaultSkin","mobile.core.skins.PhotoSkin":"skins.core.PhotoSkin","mobile.core.skins.RichTextImageSkin":"skins.core.RichTextImageSkin","mobile.core.skins.RichTextSkin":"skins.core.RichTextSkin","mobile.core.skins.ServiceItemSkin":"skins.core.ServiceItemSkin","mobile.core.skins.ServiceListSkin":"skins.core.ServiceListSkin","mobile.core.skins.SimpleButtonSkin":"skins.core.SimpleButtonSkin","mobile.core.skins.SiteNavigationMenuSkin":"skins.core.SiteNavigationMenuSkin","mobile.core.skins.TwitterFollowSkin":"skins.core.TwitterFollowSkin","mobile.core.skins.FacebookLikeSkin":"skins.core.FacebookLikeSkin"}),define.resource("experimentsOrder",[{id:"AppsOpenAppMarket",group:"New",owner:"Mayah",description:"Apps to open app market",dependencies:[],conflicts:["AddPageInAddDialog"],tags:["editor"]},{id:"FontsProject",group:"New",owner:"Leeron",description:"Add more google fonts, character sets and fun!",dependencies:[],conflicts:[]},{id:"Staff",group:"Wix",owner:"xxxx",description:"For Studio use only",dependencies:[],conflicts:[]},{id:"Dev",group:"New",owner:"Gil",description:"You are looking at it now!",dependencies:[],conflicts:[]},{id:"TPANewSettings",group:"New",owner:"Mayah",description:"New setting panel layout",dependencies:[],conflicts:[],tags:["editor"]},{id:"TPAExtensions",group:"New",owner:"Mayah",description:"App extensions - allow app to have few parts",dependencies:[],conflicts:[],tags:["editor","viewer"]},{id:"TPAPremium",group:"Picker",owner:"Mayah",description:"package picker for apps",dependencies:[],conflicts:[],tags:["editor"]},{id:"RenamePages",group:"New",owner:"Mayah",description:"Add Rename Pages action to the menu component FPP",dependencies:[],conflicts:["PartialComponentPreview"]},{id:"MCM",group:"New",owner:"Roni",description:"refactor - moving the component modification logic from ComponentEditBox to MouseComponentModifier ",dependencies:[],conflicts:[]},{id:"PartialComponentPreview",group:"New",owner:"Lichtash",description:"Partially previews a component in Editing Mode (for clickthrough)",dependencies:[],conflicts:[]},{id:"MediaGalleryFrame",group:"New",owner:"Lichtash",description:"IFrame API for external Media Gallery in the editor",dependencies:[],conflicts:[]},{id:"GridLines",group:"New",owner:"Roni",description:"grid lines which control the height and y of site segments",dependencies:[],conflicts:[]},{id:"GridLines2",group:"New",owner:"Roni",description:"grid lines - Nadavs version",dependencies:[],conflicts:[]},{id:"CallOnNextRender",group:"New",owner:"Roni",description:"use CallOnNextRender function to sync rendering with browser natural rendering",dependencies:[],conflicts:[]},{id:"LazyShare",group:"New",owner:"Lichtash",description:"",dependencies:[],conflicts:[]},{id:"NewFetchPolicy",group:"New",owner:"Dromi&Barak",description:"using the new fetch policy in the scriptLoader",dependencies:[],conflicts:[]},{id:"WixAppsPage",group:"New",owner:"Mimran",description:"Wix Apps (AKA Lists) Application Page",dependencies:[],conflicts:[]},{id:"AppBuilderLinks",group:"New",owner:"kfirg",description:"Wix Apps - App Builder Links",dependencies:[],conflicts:[]},{id:"AppBuilderMandatoryTitle",group:"New",owner:"kfirg",description:"Wix Apps - App Builder Mandatory Title",dependencies:[],conflicts:[]},{id:"AppBuilderPage",group:"New",owner:"amirm",description:"Wix Apps - App Builder Page",dependencies:["WixAppsPage"],conflicts:[]},{id:"AppBuilderCopyPaste",group:"New",owner:"mimran",description:"Wix Apps - App Builder Copy Paste",dependencies:[],conflicts:[]},{id:"AppBuilderLoadingAnim",group:"New",owner:"mimran",description:"Wix Apps - App Builder Loading animation",dependencies:[],conflicts:[]},{id:"AppBuilderDeleteAppFix",group:"New",owner:"mimran",description:"Wix Apps - Delete application BI messages + apps in container",dependencies:[],conflicts:[]},{id:"AppBuilderListSettings2",group:"New",owner:"amitk",description:"Wix Apps - App Builder new list settings panel",dependencies:[],conflicts:[]},{id:"URM5",group:"New",owner:"Shahar",description:"undo for wixapps (including ecommerce)",dependencies:[],conflicts:[]},{id:"WixAppsDirection",group:"New",owner:"Amit K",description:"Supporting direction (RTL) for App Parts",dependencies:[],conflicts:[]},{id:"RichTextPresets",group:"New",owner:"alissav",description:"add line height presets",dependencies:[],conflicts:[],tags:["viewer","editor"]},{id:"RichText2",group:"New",owner:"alissav",description:"style values in drop downs as default + refactor",dependencies:[],conflicts:[],tags:["viewer","editor"]},{id:"InnerStylesFix",group:"New",owner:"alissav",description:"make style groups and styleId for skin parts work work",dependencies:[],conflicts:[],tags:["viewer","editor"]},{id:"RTBlankText",group:"New",owner:"noamsi",description:"add try catch around open/close of RT",dependencies:["RichText2"],conflicts:[],tags:["editor"]},{id:"RichTextToolbar",group:"New",owner:"Alissa",description:"writable drop downs + default color",dependencies:["RichText2","InnerStylesFix"],conflicts:[],tags:["viewer","editor"]},{id:"AppsDispose",group:"New",owner:"Kfir",description:"call dispose on editor proxies",dependencies:[],conflicts:[]},{id:"RichTextMigrationStudio",group:"New",owner:"Alissa",description:"text component migration for Studio use",dependencies:[],conflicts:[],tags:[]},{id:"AddPageInAddDialog",group:"New",owner:"Roni",description:"ability to add a page from the add menu",dependencies:[],conflicts:[]},{id:"WalkMe",group:"New",owner:"Sivan",description:"WalkMe Button in the top bar",dependencies:[],conflicts:[],tags:["editor"]},{id:"SliderAutoPlay",group:"New",owner:"xxxx",description:"",dependencies:[],conflicts:[]},{id:"FirstSave",group:"New",owner:"Tom",description:"Wait 20 minutes before popping the Save Dialog ",dependencies:[],conflicts:[]},{id:"PremiumWixAds",owner:"Tom",group:"New",description:"Monetize WixAds in Preview Mode, ASK OMER!!! ",dependencies:[],conflicts:[]},{id:"SyncWixify",group:"New",owner:"Sivan & Ido",description:"Make wixify work sync - part of the base component refactor",dependencies:["NBC_WCD"],conflicts:[]},{id:"EscapeData",group:"New",owner:"Ido",description:"escape/html-encode characters from inputs to prevent data corruption",dependencies:[],conflicts:[]},{id:"NativeUploadButton",group:"New",owner:"Barak",description:"html5 native uploader in the media dialog",dependencies:[],conflicts:[]},{id:"NativeUploadButtonReverseToFlash",group:"New",owner:"Barak",description:"reverse to flash for users that has",dependencies:["NativeUploadButton"],conflicts:[]},{id:"PublishMarketingBanner",group:"Sale",owner:"xxxx",description:"in publish dialog show the sale marketing banner",dependencies:[],conflicts:[]},{id:"ShowOneMnMessage",group:"New",owner:"xxxx",description:"in publish dialog show one mn message in case the site revision has not been updated on all servers",dependencies:[],conflicts:[]},{id:"FooterHeaderTracking",group:"New",owner:"Denis",description:"Check Serialized data and report if there is no Header of Footer",dependencies:[],conflicts:[]},{id:"MemberLoginAndProtectPageUpgradeButton",group:"New",owner:"Leonid",description:"Adding upgrade button to site members panel - login button and protect page panel",dependencies:[],conflicts:[]},{id:"HtmlParastorage",group:"New",owner:"Ido",description:"string replace static.wix.com to static.parastorage.com in html component",dependencies:[],conflicts:[]},{id:"NewBaseCompFiveGridLine",group:"New",owner:"Sivan",description:"convert horizontal line to new base component",dependencies:["SyncWixify"],conflicts:[]},{id:"NBC_WCD",group:"New",owner:"Dromy",description:"New version of WComponentDeserializer",dependencies:[],conflicts:[]},{id:"NBC_WCD_GridLines",group:"New",owner:"Dromy",description:"replace the change of the GridLines experiment on the WComponentDeserializer with changes that relevant to the new WCD",dependencies:["SyncWixify","GridLines","NBC_WCD"],conflicts:[]},{id:"StylePerComponent",group:"New",owner:"tombigel",description:"Style per Component step 1: Refactor style selection button",dependencies:[],conflicts:[],tags:["viewer","editor"]},{id:"AdvancedStylingCancel",group:"New",owner:"tombigel",description:"Added a cancel action to Advanced Styling Dialog",dependencies:["StylePerComponent"],conflicts:[],tags:["viewer","editor"]},{id:"AdvancedStylingUndo",group:"New",owner:"tombigel",description:"Added an undo action to Advanced Styling Dialog",dependencies:["StylePerComponent","AdvancedStylingCancel"],conflicts:[],tags:["viewer","editor"]},{id:"MobileZoom",group:"New",owner:"Roni",description:"Zoom mode for mobile devices",dependencies:[],conflicts:[]},{id:"MobileSliderGallery",group:"New",owner:"sivan",description:"support mobile gestures in the slider gallery",dependencies:[],conflicts:[],tags:["viewer","editor"]},{id:"FacebookCommentFix",group:"New",owner:"Roni",description:"#WOH-1278 - fb warning appears when the y of fbComment is bigger than 10000",dependencies:[],conflicts:[]},{id:"ErrorLogOnFooterFucks",group:"New",owner:"Roni",description:"throws an error log when the footer is deleted",dependencies:[],conflicts:[]},{id:"NewBaseCompFiveGridLine",group:"New",owner:"Sivan",description:"convert horizontal line to new base component",dependencies:["SyncWixify"],conflicts:[]},{id:"DummyExp1",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp2",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp3",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp4",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp5",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp6",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp7",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp8",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp9",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp10",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"NotificationDialog",group:"New",owner:"Leonid",description:"added new dialog type, that could contain icon, show again checkbox and link to help wizard",dependencies:[],conflicts:[]},{id:"SaveSuccessDialogHide2",group:"New",owner:"Leonid",description:"added dont show again checkbox using new notification dialog",dependencies:["NotificationDialog"],conflicts:[]},{id:"WarningOutOfGrid",group:"New",owner:"Leonid",description:"Add popup message about placing elements outside the Grid",dependencies:["NotificationDialog"],conflicts:[]},{id:"noPaddingBox",group:"New",owner:"Tom B",description:"Remove padding around ComponentEditBox",dependencies:[],conflicts:["GridLines"]},{id:"NBC_SiteButton",group:"New",owner:"Roy",description:"a SiteButton that uses new base component",dependencies:["SyncWixify"],conflicts:[]},{id:"NBC_WPhoto",group:"New",owner:"Ido",description:"changes the WPhoto component to use the new base component",dependencies:["SyncWixify"],conflicts:[]},{id:"NBC_VerticalLine",group:"New",owner:"Nir M",description:"New BaseComponent Vertical Line!",dependencies:["SyncWixify"],conflicts:[]},{id:"NBC_HorizontalLine",group:"New",owner:"Nir M",description:"New BaseComponent Horizontal(FiveGridLine) Line!",dependencies:["SyncWixify"],conflicts:[]},{id:"NBC_WRichText",group:"New",owner:"Erez",description:"convert richtext to new base component",dependencies:["SyncWixify"],conflicts:[]},{id:"TwitterAPIpatch",group:"New",owner:"Leonid",description:"override twitterFeed with new twitter API",dependencies:[],conflicts:[]},{id:"NBC_SlideShowGallery",group:"New",owner:"Erez",description:"convert SlideShowGallery to new base component",dependencies:["SyncWixify"],conflicts:[]},{id:"LimitRecursiveDDM",group:"New",owner:"Roy",description:"Fix WOH-1330: Too many blocking recursive calls in DropDownMenu and HorizontalMenu cause slow loading of some sites",dependencies:[],conflicts:[]},{id:"FixTouchSupportBug",group:"New",owner:"Sivan",description:"fix the mobile recognition in the slider gallery to use modernizer",dependencies:[],conflicts:[],tags:["viewer","editor"]},{id:"EcomSocial",group:"New",owner:"Tanya",description:"adds social buttons to product page",dependencies:[],conflicts:[]},{id:"MobileQuickActions",group:"New",owner:"Denis Wolf",description:"editor panels for mobile quick actions data",dependencies:[],conflicts:[]},{id:"ImagesFromTopology",group:"New",owner:"Ido, Denis",description:"Fixes flow for TopologyUrl appliance to get images from custom url",dependencies:[],conflicts:[]},{id:"FixMissingSkins",group:"New",owner:"tombigel",description:"Fixes missing skins in site structure by filling in with a default skin from the SKINS data item.",dependencies:[],conflicts:[],tags:["viewer","editor"]},{id:"EditorRulers",group:"New",owner:"u",description:"Add Rulers.",dependencies:[],conflicts:["GridLines"],tags:["editor"]},{id:"EditorRulersDefaultOn",group:"New",owner:"u",description:"Rulers are turned on by default. Since there's a message when turning the rulers on now, this is frozen for product reasons for now.",dependencies:["EditorRulers"],conflicts:["GridLines"],tags:["editor"]},{id:"TPAGlued",group:"New",owner:"Gil O.",description:"Glued widgets for TPA",dependencies:[],conflicts:[],tags:["viewer","editor"]},{id:"NoAnchorsFromServer",group:"New",owner:"Roy",description:"Remove anchors from server",dependencies:[],conflicts:[]},{id:"MobileBackground",group:"New",owner:"Sivan",description:"Mobile Background manipulations - POC - dont open",dependencies:[],conflicts:[],tags:["viewer","editor"]},{id:"MobileFontsPOC",group:"New",owner:"Sivan",description:"Mobile Background manipulations - POC - dont open",dependencies:[],conflicts:[],tags:["viewer","editor"]},{id:"SiteVersion",group:"New",owner:"Leeron",description:"Use site version when loading, saving, publishing, restoring local changes, etc.",dependencies:[],conflicts:[]},{id:"PinterestPinComponent",group:"New",owner:"Erez & Eitan",description:"New Pinterest pin button component",dependencies:["CustomPreviewBehavior"],conflicts:[]},{id:"EcomRepo",group:"New",owner:"Tanya",description:"Separate ecommerce repository from WixApps",dependencies:[],conflicts:[]},{id:"DraggableAreaChanges",group:"New",owner:"Leonid",description:"Pages panel - Change draggable area icon on mouse hover",dependencies:[],conflicts:[]},{id:"RemovePromotionToCreateFacebookPage",group:"New",owner:"Leonid (LeoniJJ for you)",description:"Remove the promotion to create a facebook page in the post-publish panel, for premium users",dependencies:[],conflicts:[]},{id:"EcomTax",group:"New",owner:"Tanya",description:"Tax support in shopping cart",dependencies:[],conflicts:[]},{id:"VKShare",group:"New",owner:"Roman, Guy",description:"New component for VK Share button",dependencies:["CustomPreviewBehavior"],conflicts:[],tags:["editor","viewer"]},{id:"MainPageHash",group:"New",owner:"guyr",description:"No hash for the main page of the site",dependencies:[],conflicts:[]},{id:"BackToEditor",group:"New",owner:"guyr",description:"new skin and locations for the preview mode state bar",dependencies:[],conflicts:[],tags:["editor"]},{id:"IntroVideoDialog",group:"New",owner:"guyr",description:"New intro html instead of current help video",dependencies:[],conflicts:[],tags:["editor"]},{id:"PostSignupUrlParam",group:"New",owner:"guyr",description:"Add context url param to post signup links from Wix landing pages",dependencies:[],conflicts:[]},{id:"TPAScript",group:"New",owner:"Roman",description:"Add Scripting for tpa",dependencies:[],conflicts:[],tags:["viewer","editor"]},{id:"EditorScripting",group:"New",owner:"Roman",description:"Add Scripting for editor components",dependencies:[],conflicts:[],tags:["editor","viewer"]},{id:"EditorRenderSiteFromJson",group:"New",owner:"Roman",description:"render the structure as JSON in editor preview",dependencies:[],conflicts:[],tags:["editor","viewer"]},{id:"EcomPremium",group:"New",owner:"Tanya",description:"Tell users that eCom is a premium feature",dependencies:[],conflicts:[]},{id:"Blog",group:"New",owner:"Nadav A, Tomer G",description:"Blog functionality added to editor",dependencies:["WixAppsPage"],conflicts:[]},{id:"FacebookShare",group:"New",owner:"Eitan & Galia",description:"FacebookShare component - share a wix website to facebook",dependencies:["CustomPreviewBehavior"],conflicts:[],tags:["viewer","editor"]},{id:"GetLikeUrl",group:"New",owner:"Leonid",description:"Preview site from dashboard was not worked when site had contain facebook-like component.",dependencies:[],conflicts:[]},{id:"AutoResizeEvent",group:"New",owner:"Jiri",description:"Fixes component resize event int wixapps/ResizableProxy",dependencies:[],conflicts:[]},{id:"MobileEcomViews",group:"New",owner:"Tanya",description:"New mobile views for product page and shopping cart",dependencies:["MobileZoom"],conflicts:[]},{id:"NoRedirectOnFirstSave",group:"New",owner:"Dany",description:"Avoid page redirect on first site save, (and Use new server api for first (full) save).",dependencies:[],conflicts:[],tags:["editor"]},{id:"SMMemberAccessLimit",group:"New",owner:"Nir Moav",description:"Limits the access to members that logged-in in the past, and access rights have changed in the meantime.",dependencies:[],conflicts:[],tags:["viewer"]},{id:"AdditionalInfo",group:"New",owner:"Leonid",description:"Pages Panel - sub pages indication",dependencies:[],conflicts:[]},{id:"MobileViewerQuickActions",group:"New",owner:"Sivan & Noam",description:"handle mobile quick actions after editor loading - requires server featrue toggle isMobileViewport:true",dependencies:[],conflicts:[],tags:["viewer"]},{id:"RefreshFrameOnTransition",group:"New",owner:"Lichtash",description:"Refresh HTMLComponent Iframe on page transition",dependencies:[],conflicts:[]},{id:"RenderPerf",group:"New",owner:"Jiri",description:"Improves performance of wixapps content rendering",dependencies:[],conflicts:[]},{id:"AutoPlayFix",group:"New",owner:"LeoniJ",description:"WOH-297",dependencies:[],conflicts:[]},{id:"SMOwnerLogoutFix",group:"New",owner:"Nir Moav",description:"SiteMemberManager Site Owner Logout Action fix #WOH-2108",dependencies:[],conflicts:[],tags:["viewer"]},{id:"StoreManagerPopupWidth",group:"New",owner:"Tanya",description:"changes the store manager window width",dependencies:[],conflicts:[]},{id:"WixAppsLayoutFixes",group:"New",owner:"Jiri",description:"Several fixes of the layout (the infamous flexbox)",dependencies:[],conflicts:[]},{id:"EcomPicsOnlyGallery",group:"New",owner:"Tanya",description:"adds new gallery view",dependencies:["WixAppsLayoutFixes"],conflicts:[]},{id:"SiteMembersCommon",group:"New",owner:"Nir Moav",description:"Common code for Site Members features.",dependencies:[],conflicts:[],tags:["viewer"]},{id:"SMPasswordPoundCharFix",group:"New",owner:"Nir Moav",description:"SiteMemberManager validation for Non-Ascii characters in password.",dependencies:["SiteMembersCommon"],conflicts:[],tags:["viewer"]},{id:"SMForgot_Password",group:"New",owner:"Nir",description:"Forgotten password reset on Site Members login.",dependencies:["SiteMembersCommon"],conflicts:[],tags:["viewer"]},{id:"SpanishPromotion",group:"New",owner:"Leonij",description:"SEO Wizard link in Spanish editor.",dependencies:[],conflicts:[]},{id:"HighlightCompPanel",group:"New",owner:"Tom B.",description:"Highlight component panel when clicking on Settings in FPP.",dependencies:[],conflicts:[]},{id:"biOnFirstSaveProvision",group:"New",owner:"LeoniJ",description:"added provision start/end events",dependencies:[],conflicts:[]},{id:"LinkedinFollow",group:"New",owner:"Mayah",description:"TPA Linkedin Follow",dependencies:[],conflicts:[],tags:["viewer","editor"]},{id:"SiteJumpFix",group:"New",owner:"Nir Moav",description:"A fix for the sites jumping 1px after loading. WOH-2638.",dependencies:[],conflicts:[],tags:["viewer"]},{id:"PageLoadReport",group:"New",owner:"Ido&Nadav&Alissa&Laufer",description:"add a very ugly page loading info report and send to BI",dependencies:[],conflicts:[]},{id:"LazyMasterPage",group:"New",owner:"Noam",description:"Load lazy the Footer and Header without blocking the pages load",dependencies:[],conflicts:[]},{id:"BetterPrefetch",group:"New",owner:"Dromy",description:"start prefetching 12s after site is loaded, only prefetch first 5 pages, and time between page prefetch is now 10s",dependencies:["JITPageLoader"],conflicts:[]},{id:"WixCheckoutPage",group:"New",owner:"Tanya",description:"proof-of-concept for the checkout page",dependencies:[],conflicts:[]},{id:"WixCheckoutPage",group:"Popup",owner:"Tanya",description:"proof-of-concept for the checkout page",dependencies:[],conflicts:[]},{id:"MaximumComponentHeight",group:"New",owner:"leonid",description:"Maximum default Component height changed to 5000",dependencies:[],conflicts:[],tags:["viewer","editor"]},{id:"ImageUploadBI",group:"New",owner:"Noamsi",description:"Add BI event for the Image upload flow",dependencies:[],conflicts:[],tags:["editor"]},{id:"TPA3DGallery",group:"New",owner:"Barak",description:"TPA 3D Gallery",dependencies:[],conflicts:[],tags:["viewer","editor"]},{id:"TPAArtifact",group:"New",owner:"Barak",description:"Move the TPA to new Artifact",dependencies:[],conflicts:[],tags:["viewer","editor"]},{id:"SiteAdressOpenHelp",group:"New",owner:"LeoniJ",description:"SiteAdressOpenHelp",dependencies:[],conflicts:[]},{id:"EcomExp1",group:"New",owner:"Tanya",description:"ecom experiment",dependencies:[],conflicts:[]},{id:"EcomExp2",group:"New",owner:"Tanya",description:"ecom experiment",dependencies:[],conflicts:[]},{id:"EcomExp3",group:"New",owner:"Tanya",description:"ecom experiment",dependencies:[],conflicts:[]},{id:"EcomExp4",group:"New",owner:"Tanya",description:"ecom experiment",dependencies:[],conflicts:[]},{id:"EcomExp5",group:"New",owner:"Tanya",description:"ecom experiment",dependencies:[],conflicts:[]},{id:"SettingsMenuSelectionFix",group:"New",owner:"Nir Moav",description:"Fix for WOH-2424 selection of items in the settings menu when switching and closing.",dependencies:[],conflicts:[],tags:["editor"]},{id:"StaticBlobUrl",group:"New",owner:"Noamsi",description:"Change the wix blob url to use the service topology blobUrl param",dependencies:[],conflicts:[],tags:["viewer","editor"]},{id:"BackgroundSRZ",group:"New",owner:"Sivan (for NirY)",description:"change backgrounds to srz instead of crp",dependencies:[],conflicts:[],tags:["viewer","editor"]},{id:"MobileBackgroundSize",group:"New",owner:"Sivan (for NirY)",description:"set maximum size of bg on mobile and tablet to 1000",dependencies:["BackgroundSRZ"],conflicts:[],tags:["viewer","editor"]},{id:"GooglemapEmbedded",group:"New",owner:"galiak",description:"Google Map with embedded iframe",dependencies:[],conflicts:[],tags:["viewer","editor"]},{id:"LinkRefData",group:"New",owner:"Nir Moav",description:"New links experiment using only Reference Data.",dependencies:[],conflicts:[],tags:["editor"]},{id:"FCommentOnAllPages",group:"New",owner:"Noamsi",description:"Fix who-145, allow facebook comment to be shown on all pages.",dependencies:[],conflicts:[],tags:["viewer","editor"]},{id:"FirstTimeVisitorEditorUIPreview",group:"New",owner:"Tomer Lichtash",description:"Adding a FirstTimeVisitor state for EditorUI",dependencies:[],conflicts:[]},{id:"MergeBackTitleInSidePanel",group:"New",owner:"LeoniJ",description:"Fix Japanese Language Keys.",dependencies:[],conflicts:[]},{id:"it",group:"run",owner:"Dany",description:"Enables Jasmine integration testing. (WOH-2715). [Permanent Experiment].",dependencies:[],conflicts:[],tags:["viewer","editor"]},{id:"GSkinButcher00",group:"New",owner:"Gush",description:"New skins: DoubleBorderScreen (WOH-1763), IronScreen (WOH-1532)",dependencies:[],conflicts:[],tags:["editor"]},{id:"SvgShapeComponent",group:"New",owner:"EitanR",description:"New SVG Shape component to support various shapes and figures",dependencies:[],conflicts:[]},{id:"CustomPreviewBehavior",group:"New",owner:"Eitan Rousso",description:"new trait to specify behavior which is specific to preview mode (non-public mode)",dependencies:[],conflicts:[]},{id:"NewSkinBatch060513",group:"New",owner:"galiak",description:"Includes: Horizontal & Vertical Iron Line (WOH-1780); Vintage Photo Frame (WOH-927)",dependencies:[],conflicts:[],tags:["editor"]},{id:"ImageLoadPerformance",group:"New",owner:"Noamsi",description:"Collect and Report Images loading performance",dependencies:[],conflicts:[],tags:["viewer"]},{id:"QuickActionsHideSubPagesOfHiddenParent",group:"New",owner:"Sivan",description:"If parent page is  hidden its sub pages should not be in the quick actions menu either",dependencies:["MobileViewerQuickActions"],conflicts:[],tags:["viewer"]},{id:"PreviewRefactor",group:"New",owner:"Alissa",description:"enable multiple privews",dependencies:[],conflicts:[]},{id:"Responsive1",group:"New",owner:"Roni",description:"Basic responsive algorithm, for conversion of sites to mobile sites",dependencies:[],conflicts:[]},{id:"GalleryFlick",group:"New",owner:"Noamsi",description:"Fix Slide Show Gallery Filckering issue",dependencies:[],conflicts:[],tags:["viewer"]},{id:"RemoveTwitterFeed",group:"New",owner:"Tagger",description:"Since Twitter deprecated the API we're working with, first of all, remove their feed",dependencies:[],conflicts:[]},{id:"PageDuplicateLinksFix",group:"New",owner:"Nir Moav",description:"A fix for duplicated pages with texts that have links, which change the original links. #WOH-1060.",dependencies:[],conflicts:[],tags:["editor"]},{id:"AddUserAgents",group:"New",owner:"Sivan",description:"Add user agents to mobile recognition.",dependencies:[],conflicts:[],tags:["viewer","editor"]},{id:"LazyPageBI",group:"New",owner:"Dromy",description:"Send different BI event on failure of Lazy page load",dependencies:[],conflicts:[]},{id:"QuickActionsMenus",group:"New",owner:"D. Wolf",description:"Build pages menu in a new way, as list, not select",dependencies:["MobileViewerQuickActions","QuickActionsHideSubPagesOfHiddenParent"],conflicts:[]},{id:"CustomSiteWidth",group:"New",owner:"Lichtash",description:"#WOH-1885 | Customizes Site Width from the Settings Panel",dependencies:[],conflicts:[]},{id:"LockComponent",group:"New",owner:"LeoniJ",description:"Lock elements in editor from changes",dependencies:[],conflicts:[]},{id:"WixAppsApplicationData",group:"New",owner:"Tanya",description:"Application variables - persistent data per application",dependencies:[],conflicts:[]},{id:"AddPageData_17_6_2013",group:"New",owner:"LeoniJ",description:"new add page data",dependencies:[],conflicts:[]},{id:"FixViewport",group:"New",owner:"Sivan",description:"disable scaling until page loads",dependencies:["AddUserAgents"],conflicts:[],tags:["viewer","editor"]},{id:"MobileSiteWidth",group:"New",owner:"sivan",description:"support mobile site width adjustments",dependencies:["FixViewport","MobileZoom"],conflicts:[],tags:["viewer","editor"]},{id:"DenisSkinPack",group:"New",owner:"Denis H",description:"Skin pack with 13 skins added",dependencies:[],conflicts:[]},{id:"BgImageStrip",group:"New",owner:"Michael",description:"new comp - strip with background image",dependencies:[],conflicts:[]},{id:"WixAppsContentResize",group:"New",owner:"Jiri",description:"Fixes incorrect resize of the AppPart comp WIXAPPS-1264",dependencies:[],conflicts:[]},{id:"DocumentMedia",group:"New",owner:"galiak",description:"Shortcut for Link -> Document, with document icon upload and document title display",dependencies:[],conflicts:[],tags:["viewer","editor"]},{id:"GSkinButcher01",group:"New",owner:"Gush",description:"New skins: GrangeFramePhoto (WOH-1760), ScotchTapeButton (WOH-1742)",dependencies:[],conflicts:[],tags:["editor"]},{id:"MobileEditor1",group:"New",owner:"tombigel",description:"Mobile editor first phase",dependencies:[],conflicts:[]},{id:"TinyMenu",group:"New",owner:"denisw",description:"Mobile viewer pages menu",dependencies:[],conflicts:[]},{id:"Miniposts",group:"New",owner:"nadav, tomr",description:"Miniposts functionality added to editor",dependencies:["Blog"],conflicts:[]},{id:"PostMediaLoad",group:"New",owner:"idoro",description:"Loads the private/public media in the editor at post deploy instead of init",dependencies:[],conflicts:[],tags:["editor"]},{id:"PageHeightFix",group:"New",owner:"Noamsi",description:"Fix page height to fit minimum height of last component without gaps",dependencies:[],conflicts:[],tags:["editor","viewer"]},{id:"AddBIonClosingDialog",group:"New",owner:"LeoniJ",description:"Add BI event when user closes some dialog",dependencies:[],conflicts:[],tags:["editor"]},{id:"SEOEscape",group:"New",owner:"Noamsi",description:"Allow escape charecters in the SEO Panel",dependencies:[],conflicts:[],tags:["editor","viewer"]},{id:"HideDragHandleFromPageContainer",group:"New",owner:"LeoniJ",description:"Hide drag handle from the page container",dependencies:[],conflicts:[],tags:["editor"]},{id:"safari5menufix",group:"New",owner:"shaik",description:"fix WOH-3061 : Menu buttons is not showing on older versions of Safari browser",dependencies:[],conflicts:[],tags:["viewer","editor"]}]),define.component("wysiwyg.common.components.InfoTip",function(a){var b=a;b.inherits("mobile.core.components.base.BaseComponent"),b.skinParts({content:{type:"htmlElement"}}),b.resources(["W.Utils"]),b.states({hidden:["hidden","visible"]}),b.binds(["initialize","_callTip","_showTip","_mouseOut","_mouseIn","_timerToClose","_closeToolTipCmd","_showToolTipCmd","_stayInWindowBounds"]),b.fields({_mouseInside:!1,_onCallerMouseMoveWasCalled:!1,_shouldShowTooltipAfterTimout:!1,_tipToShow:"",_defaultShowTimer:500,_showTimer:500}),b.methods({initialize:function(a,b,c){this.parent(a,b,c),this.tipNode=this.getViewNode(),this.tipNode.addEvent("click",this._handleEvent),this.tipNode.addEvent("mouseleave",this._mouseOut),this.tipNode.addEvent("mouseenter",this._mouseIn),this.tipNode.addEvent("mousedown",this._mouseDown),document.addEvent("keyup",this._mouseOut),this.setState("hidden")
},_closeToolTipCmd:function(){this._tipToShow="",this._hideToolTipTimeOut=setTimeout(function(){this._mouseInside||this._closeTip()}.bind(this),150)},_showToolTipCmd:function(a,b){this._shouldShowTooltipAfterTimout=!0,this._tipToShow=a.id,clearTimeout(this._hideToolTipTimeOut),window.setTimeout(function(){this._shouldShowTooltipAfterTimout&&this._tipToShow===a.id&&this._callTip(a,b)}.bind(this),this._showTimer)},_handleEvent:function(a){var b=a.target;b.get("href")&&a.preventDefault();var c=this.getLogic(),d=b.get("action");d&&c[d].bind(c)(b)},_setToolTipValues:function(a){this._skinParts.content.set("html",a)},_getToolTipCallerNode:function(a){return"element"==typeOf(a.source)?a.source:a.source.getViewNode()},_callTip:function(a,b){this._resetToolTip(),this._setToolTipValues(a.content),this._showTip(this._getToolTipCallerNode(b))},_resetToolTip:function(){this._skinParts.content.empty()},_showTip:function(a){var b=this.getViewNode(),c=this._getPosition(a,b);b.setStyles({top:c.y,left:c.x[0],right:c.x[1]}),this.removeState("hidden","hidden"),this._activateTimerToClose(b,a)},_activateTimerToClose:function(){this._numOfTimerCalls++,this.resources.W.Utils.callLater(this._closeTipByTimeout,null,this,3e3)},_closeTipByTimeout:function(){this._numOfTimerCalls--,0===this._numOfTimerCalls&&this._closeTip()},_timerToClose:function(){var a;this.onCallerMove=function(){this._onCallerMouseMoveWasCalled=!0,$(document.body).removeEvent("mousemove",this.onCallerMove)}.bind(this),$(document.body).addEvent("mousemove",this.onCallerMove),this.checkIfOut=function(){(this._mouseInside||!this._onCallerMouseMoveWasCalled)&&this.createTimer()}.bind(this),this.createTimer=function(){a=setTimeout(this.checkIfOut,3e3)},this.createTimer()},_getPosition:function(a,b){var c=a.getPosition(),d=a.getHeight(),e=a.getWidth(),f=c.y,g=c.x,h=b.getHeight(),i=b.getWidth(),j=g-i/2;this._top=f-h,this._left=j,this._right="auto",this._stayInWindowBounds(d,e,f,g,h);var k=0,l=0;if(b.offsetParent){var m=b.offsetParent.getPosition();k=m.y,l=m.x}return this._top=this._top-k,this._left=this._left-l,this._right=this._right+l,{x:[this._left,this._right],y:this._top}},_stayInWindowBounds:function(a,b,c,d,e){var f=window.innerWidth,g=window.innerHeight;if(this._top-document.body.getScroll().y<0){var h=c+e;h>g+document.body.getScroll().y+e&&(h=0>c?c:document.body.getScroll().y),this._top=h>0?h:0}this._left<0?this._left=d:this._left>f&&(this._left="auto",this._right=d+b)},_setState:function(a,b){a?this.setState(b):this.removeState(b)},_closeTip:function(){this._shouldShowTooltipAfterTimout=!1,this._onCallerMouseMoveWasCalled=!1,this.setState("hidden"),this.getViewNode().setStyles({top:0,left:0})},_mouseOut:function(){this._mouseInside=!1,this._closeTip()},_mouseIn:function(){this._mouseInside=!0},_mouseDown:function(a){a.stopPropagation()}})}),define.component("wysiwyg.viewer.components.inputs.NumberInput",function(a){var b=a;b.propertiesSchemaType("NumberInputProperties"),b.inherits("wysiwyg.viewer.components.inputs.TextInput"),b.fields({_origValue:null,_prevValue:null,_valueChanged:!0}),b.methods({initialize:function(a,b,c){this.parent(a,b,c)},_onAllSkinPartsReady:function(){this.parent(),this._origValue=this._getValue(),this._prevValue=this._origValue,this._skinParts.input.setAttribute("min",this.getComponentProperty("minValue")),this._skinParts.input.setAttribute("max",this.getComponentProperty("maxValue"))},_changeEventHandler:function(a){if(!a.code||W.Utils.isInputKey(a.code)){var b=this._getValue(),c=this._getValidValue();if(b&&b!=c&&this._valueChanged&&(this._valueChanged=!1,this.fireEvent("validationFailed",{evt:a,value:b,validValue:c})),c!=this._prevValue){this._prevValue=c,c=this.injects().Utils.convertToHtmlText(c);var d={value:c,origEvent:a,compLogic:this};this.fireEvent("inputChanged",d)}}},_fireBlur:function(a){this._setValidValue(),this.parent(a)},_fireKeyUp:function(a){"13"==a.code&&this._setValidValue(),this.parent(a)},_getValidValue:function(){var a=this._getValue();return a?a<this.getComponentProperty("minValue")?a=this.getComponentProperty("minValue"):a>this.getComponentProperty("maxValue")&&(a=this.getComponentProperty("maxValue")):a=this._origValue,a},_setValidValue:function(){var a=this._skinParts.input;a.set("value",this._getValidValue()),this._valueChanged=!0}})}),define.component("wysiwyg.common.components.inputs.OptionsListInput",function(a){var b=a;b.inherits("mobile.core.components.base.BaseComponent"),b.traits(["wysiwyg.viewer.components.traits.ValidationSettings"]),b.utilize(["wysiwyg.viewer.utils.ComponentSequencer"]),b.binds(["_onItemSelected"]),b.states({validity:["valid","invalid"]}),b.fields({_selectedItem:null}),b.dataTypes(["SelectableList"]),b.methods({initialize:function(a,b,c){this.parent(a,b,c),this._sequencer=new this.imports.ComponentSequencer,c&&(this._sequencer.resolveItem=function(){return{comp:c.compType,skin:c.compSkin}})},_onAllSkinPartsReady:function(){},_onDataChange:function(a,b,c){if("selected"==b){var d=this._getSelectedComponentByData(c[b]);this._changeSelectedItem(d)}this.parent(a,b,c)},_getSelectedComponentByData:function(a){var b=this.items.map(function(a){return a.$logic}),c=b.filter(function(b){return b.getDataItem()==a});return c&&c[0]},_preventRenderOnDataChange:function(a,b){return"selected"==b},_prepareForRender:function(){return this._sequencer.addEvent("productionFinished",function(a){this._onSequencerFinished(a),this.fireEvent("optionListInputReady",a)}.bind(this)),this._sequencer.createComponents(this.getViewNode(),this.getDataItem().get("items")),!0},_onSequencerFinished:function(a){this.items=a.elements,this.items.forEach(function(a){var b=a.getLogic();b.addEvent("itemSelected",this._onItemSelected),b.getDataItem()===this.getDataItem().get("selected")&&(this._selectedItem=b,this._selectedItem.setSelected(!0))}.bind(this))},_onItemSelected:function(a){if(!this._selectedItem||this._selectedItem!==a){var b=a.getDataItem();this.setValidationState(!0),this.getDataItem().set("selected",b),this.fireEvent("selectionChanged",b)}},_changeSelectedItem:function(a){a&&(this._selectedItem&&this._selectedItem.setSelected(!1),this._selectedItem=a,this._selectedItem.setSelected(!0))},setValidationState:function(a){this.setState(a?"valid":"invalid","validity"),this.parent(a)}})}),define.component("wysiwyg.viewer.components.inputs.TextInput",function(a){var b=a;b.inherits("mobile.core.components.base.BaseComponent"),b.traits(["wysiwyg.viewer.components.traits.ValidationSettings"]),b.binds(["_changeEventHandler","_fireBlur","_fireKeyUp"]),b.dataTypes(["Text"]),b.states({validation:["valid","invalid"]}),b.skinParts({input:{type:"htmlElement"},errorMessage:{type:"htmlElement"}}),b.methods({initialize:function(a,b,c){this.parent(a,b,c),this.addEvent(this.VALID_STATE_CHANGED_EVENT,function(a){this.setState(a?"valid":"invalid","validation")}.bind(this)),c=c||{},this._placeholder=c.placeholder||null,this._isPasswordField=c.passwordField||!1,this._label=c.label||""},_onAllSkinPartsReady:function(){var a=this._skinParts.input;a.set("value",this.getDataItem().get("text")),this.addEvent("inputChanged",function(a){this.getDataItem().set("text",a.value)}.bind(this)),this._listenToInput(),this._placeholder&&this._setPlaceholder(this._placeholder),this._isPasswordField&&a.set("type","password"),this.setLabel(this._label)},setError:function(a){this.setValidationState(!1),this._skinParts.errorMessage.set("text",a)},setLabel:function(a){this._skinParts.label&&this._skinParts.label.appendText(a,"top")},_setPlaceholder:function(a){this._skinParts.input.set("placeholder",a),window.Modernizr&&!window.Modernizr.input.placeholder&&this._placeholderPolyFill()},_placeholderPolyFill:function(){function a(a){var b=a.target;""===b.get("value")&&b.get("placeholder")&&(b.addClass("isPlaceholder"),b.set("value",b.get("placeholder")))}function b(a){var b=a.target;b.hasClass("isPlaceholder")&&(b.removeClass("isPlaceholder"),b.set("value",""))}this.hasPlaceholder||(this.hasPlaceholder=!0,this._skinParts.input.addEvent("focus",b),this._skinParts.input.addEvent("blur",a)),a({target:this._skinParts.input})},_changeEventHandler:function(a){if(!a.code||W.Utils.isInputKey(a.code)){var b=this._getValue();b=this.injects().Utils.convertToHtmlText(b);var c={value:b,origEvent:a,compLogic:this};this.fireEvent("inputChanged",c)}},_fireBlur:function(a){this.fireEvent(Constants.CoreEvents.BLUR,a)},_fireKeyUp:function(a){this.fireEvent(Constants.CoreEvents.KEY_UP,a)},_listenToInput:function(){this._skinParts.input.addEvent(Constants.CoreEvents.KEY_UP,this._changeEventHandler),this._skinParts.input.addEvent(Constants.CoreEvents.KEY_UP,this._fireKeyUp),this._skinParts.input.addEvent(Constants.CoreEvents.CUT,this._changeEventHandler),this._skinParts.input.addEvent(Constants.CoreEvents.PASTE,this._changeEventHandler),this._skinParts.input.addEvent(Constants.CoreEvents.CHANGE,this._changeEventHandler),this._skinParts.input.addEvent(Constants.CoreEvents.BLUR,this._fireBlur)},_stopListeningToInput:function(){this._skinParts.input.removeEvent(Constants.CoreEvents.KEY_UP,this._changeEventHandler),this._skinParts.input.removeEvent(Constants.CoreEvents.KEY_UP,this._fireKeyUp),this._skinParts.input.removeEvent(Constants.CoreEvents.CUT,this._changeEventHandler),this._skinParts.input.removeEvent(Constants.CoreEvents.PASTE,this._changeEventHandler),this._skinParts.input.removeEvent(Constants.CoreEvents.CHANGE,this._changeEventHandler),this._skinParts.input.removeEvent(Constants.CoreEvents.BLUR,this._fireBlur)},_getValue:function(){var a=this._skinParts.input,b="";return a.hasClass("isPlaceholder")||(b=a.get("value")),b},dispose:function(){this._stopListeningToInput(),this.parent()}})}),define.Class("wysiwyg.common.components.traits.LinkableComponent",function(a){var b=a;b.resources(["W.Utils","W.Viewer"]),b.binds(["_linkableComponentRender","_linkify","renderLinks","_showNavigationDisabledTooltip","_linkableComponentEditModeChanged"]),b.statics({linkType:{SMS:"SMS",CALL:"CALL",SKYPE:"SKYPE",MAP:"MAP",EMAIL:"EMAIL",FACEBOOK:"FACEBOOK",FLICKR:"FLICKR",BLOGGER:"BLOGGER",MYSPACE:"MYSPACE",LINKEDIN:"LINKEDIN",TWITTER:"TWITTER",TUMBLR:"TUMBLR",YOUTUBE:"YOUTUBE",VIMEO:"VIMEO",PAGE:"PAGE",FREE_LINK:"FREE_LINK",TEXT:"TEXT",DELICIOUS:"DELICIOUS",WEBSITE:"WEBSITE",DOCUMENT:"DOCUMENT",LOGIN:"LOGIN",ADMIN_LOGIN:"ADMIN_LOGIN"},linkTarget:{SAME_WINDOW:"_self",NEW_WINDOW:"_blank"}}),b.methods({initialize:function(){var a=this.resources.W.Utils.linkUtils;this.render&&this.NEW_BASE_COMP!==!0?(this._componentOriginalRender=this.render.bind(this),this.render=this._linkableComponentRender):this.NEW_BASE_COMP===!0&&(this.on(Constants.LifecycleSteps.RENDER,this,this._linkableComponentRender),this.on(Constants.EventDispatcher.Events.EXTERMINATING,this,this._exterminateLinkableComponent)),this._linkableComponentOnEditModeChanged=a.linkableComponentEditModeChanged.bind(this),this.injects().Commands.registerCommandListenerByName("WPreviewCommands.WEditModeChanged",this,this._linkableComponentOnEditModeChanged)},_exterminateLinkableComponent:function(){this.injects().Commands.unregisterListener(this)},_linkableComponentRender:function(){this._componentOriginalRender&&this._componentOriginalRender();var a=this.resources.W.Utils.linkUtils,b=this.getDataItem();a.renderLinks.call(this,b,this._skinParts.link),"PREVIEW"==this.resources.W.Viewer.getEditorMode()&&a.linkableComponentEditModeChanged.call(this,"PREVIEW",b,this._skinParts.link)},renderLinks:function(){var a=this.getDataItem(),b=a.get("href"),c=a.get("target");("same"==c||"self"==c)&&(c="_self",a.set("target","_self"));var d=a.get("linkType"),e=this._skinParts.link;this._linkify(d,e,b,c),this._NO_LINK_PROPAGATION&&this._disableLinkClickPropagation(e)},_disableLinkClickPropagation:function(a){a.addEvent("click",function(a){a.stopPropagation()})},_linkify:function(a,b,c,d){b&&(c&&""!==c?(b.set("href",c),b.setStyle("cursor","pointer"),this._setTarget(b,d),this.hasState("noLink","linkableComponent")&&this.removeState("noLink","linkableComponent")):(b.setStyle("cursor","default"),b.erase("href"),b.erase("target"),this.hasState("noLink","linkableComponent")&&this.setState("noLink","linkableComponent")),this._handleSpecialCases(a,b))},_handleSpecialCases:function(a,b){switch(b.removeEvents("click"),a){case this.linkType.LOGIN:b.addEvent("click",function(){if(window.animateForm){var a=this.getDataItem(),b=a.get("text");if(b){b=JSON.parse(b);var c=b.postLoginUrl,d=b.postSignupUrl,e=b.type,f="HTML",g=window.userApi?window.userApi.isSessionValid():!1;g?c&&(window.location.href=c):window.animateForm.callForm([d,c,e,f])}}}.bind(this));break;case this.linkType.ADMIN_LOGIN:b.setStyle("cursor","pointer"),b.addEvent("click",function(){this.injects().Commands.executeCommand("WViewerCommands.AdminLogin.Open")}.bind(this))}},_setTarget:function(a,b){a.set("target",b)},_linkableComponentEditModeChanged:function(a){if(this.getIsDisposed()!==!0){var b,c=!1,d=!1,e=this.getDataItem(),f=e.get("linkType"),g=e.get("target");g==this.linkTarget.SAME_WINDOW&&f==this.linkType.WEBSITE&&(c=!0),f==this.linkType.EMAIL&&(d=!0),b=this._skinParts.link,"PREVIEW"==a?c?this._bindPageLeaveWarningToLink(b):d&&(this._bindMailtoLinks(),this.renderLinks()):(b.removeEvents("click"),this.renderLinks())}},_bindMailtoLinks:function(){var a=this._skinParts.link;a.addEvent("click",this._temporaryDisableNavigationWarning)},_temporaryDisableNavigationWarning:function(){window.enableNavigationConfirmation=!1,setTimeout(function(){window.enableNavigationConfirmation=!0},50)},_bindPageLeaveWarningToLink:function(a){a.erase("href"),a.erase("target"),a.addEvent("click",function(a){a.preventDefault(),this._showNavigationDisabledTooltip()}.bind(this))},_showNavigationDisabledTooltip:function(){var a={component:this};this.injects().Commands.executeCommand("linkableComponent.navigateSameWindow",a,this)}})}),define.Class("wysiwyg.common.components.traits.SelectableButton",function(a){var b=a;b.inherits("wysiwyg.common.components.traits.SelectableOption"),b.methods({initialize:function(a,b,c){this.parent(a,b,c),this.addEvent("click",function(){this.fireEvent(this.ITEM_SELECTED_EVENT,this)}.bind(this))},setSelected:function(a){this._isSelected=a,a?this.setState("selected"):this.setState("up")}})}),define.Class("wysiwyg.common.components.traits.SelectableOption",function(a){var b=a;b.statics({ITEM_SELECTED_EVENT:"itemSelected"}),b.fields({_isSelected:!1}),b.methods({initialize:function(a,b,c){this.parent(a,b,c),this.getViewNode().addEvent("click",function(){this.fireEvent(this.ITEM_SELECTED_EVENT,this)}.bind(this))},setSelected:function(a){this._isSelected=a}})}),define.Class("wysiwyg.viewer.components.traits.ValidationSettings",function(a){var b=a;b.statics({VALID_STATE_CHANGED_EVENT:"validStateChanged"}),b.fields({_isValid:!0}),b.methods({_validationFunction:function(){return!0},initialize:function(a,b,c){this.parent(a,b,c),c.validationFunction&&this.setValidationFunction(c.validationFunction)},setValidationState:function(a){var b=this._isValid!==a;this._isValid=a,b&&this.fireEvent(this.VALID_STATE_CHANGED_EVENT,a)},setValidationFunction:function(a){this._validationFunction=a}})}),define.Class("wysiwyg.common.utils.TextMigrationDomHelper",function(a){var b=a;b.fields({_blockElementTags:["audio","dd","dt","li","video","address","article","aside","blockquote","details","div","dl","fieldset","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","menu","nav","ol","p","pre","section","table","ul","center","dir","noframes"]}),b.methods({renameNode:function(a,b){if(a.tagName.toLowerCase()==b.toLowerCase())return a;var c=new Element(b);a.attributes;var d=this.getAllAttributes(a);return d.forEach(function(a){c.setAttribute(a.name,a.value)}),this.moveChildren(a,c),a.parentNode&&a.parentNode.replaceChild(c,a),c},getAllAttributes:function(a){var b=a.attributes,c=[];if(b.length<20)c=this.collectionToArray(b);else{var d=a.getProperties("class","style","dir","href","background","action","src","data","align","alt","color","face","label","for","link","id","name","value");Object.forEach(d,function(a,b){b&&a&&c.push({name:b,value:a})})}return c},moveChildren:function(a,b){if(a!=b)for(var c;c=a.firstChild;)b.appendChild(a.removeChild(c))},collectionToArray:function(a){for(var b=Array.slice(a,0),c=0;c<b.length;c++){var d=b[c];d&&d.nodeType&&1===d.nodeType&&(b[c]=new Element(d))}return b},isBlockElement:function(a){var b=a.tagName&&a.tagName.toLowerCase();return this._blockElementTags.contains(b)},isOnlyWhiteSpace:function(a){return a.every(function(a){return"whitespace"===typeOf(a)})},isDomElement:function(a){return"element"===typeOf(a)},isTextNode:function(a){return"textnode"===typeOf(a)},hasBlockElementChildren:function(a){return a.getChildren().some(function(a){return this.isBlockElement(a)},this)},replaceElementWithItsChildren:function(a){var b=a.parentNode,c=this.collectionToArray(a.childNodes);c.each(function(c){b.insertBefore(c,a)},this),b.removeChild(a)},isElementHasAttributes:function(a){var b=this.getAllAttributes(a);if(!b)return!1;for(var c=0;c<b.length;c++){var d=b[c].value;if(d)return!0}return!1},removeClass:function(a,b){a.removeClass(b),a.getAttribute("class")||a.removeAttribute("class")}})}),define.Class("wysiwyg.common.utils.TextMigrationHandler",function(a){var b=a;b.utilize(["wysiwyg.common.utils.TextStylesMigration","wysiwyg.common.utils.TextSimpleFormatMigration"]),b.resources(["W.Data","W.Config","W.Theme"]),b.methods({initialize:function(){this._stylesMigration=new this.imports.TextStylesMigration,this._simpleMigration=new this.imports.TextSimpleFormatMigration;var a=this;this.resources.W.Config.isEditorMode()?this.resource.getResourceValue("W.Preview",function(b){b.getPreviewManagersAsync(a._initViewerManagers,a)}):this._initViewerManagers(this.resources.W)},_initViewerManagers:function(a){this._viewer={theme:a.Theme,data:a.Data}},migrateComponent:function(a){this._changeData(a),this._changeSkin(a);var b=a.getDataItem();return b&&b.get("text")?this.migrateText(b.get("text"),null,null):null},migrateText:function(a,b,c){if(b=b||"p",c=c||"font_8","string"!==typeOf(a))return null;if(""===a)return'<{0} class="{1}"></{0}>'.substitute([b,c]);var d=new Element("div");return d.set("html",a),this._stylesMigration.migrateElement(d,b,c),this._simpleMigration.migrateElement(d),d.get("html")},_changeData:function(a){var b=a.getDataItem().get("text"),c=this._viewer.data.addDataItemWithUniqueId("",{type:"StyledText",text:b,stylesMapId:"CK_EDITOR_PARAGRAPH_STYLES"}).dataObject;a.setDataItem(c)},_changeSkin:function(a){this._viewer.theme.getStyle("txtNew",function(b){a.setStyle(b)},"wysiwyg.viewer.skins.WRichTextNewSkin")}})}),define.Class("wysiwyg.common.utils.TextMigrationStylesHelper",function(a){var b=a;b.resources(["tags"]),b.methods({initialize:function(a,b){this._theme=a,this._domHelper=b},getMostCommonStyle:function(a){var b={};return a.forEach(function(a){var c=this.getElementStyleClass(a);b[c]=b[c]||0,b[c]+=a.get("text").length},this),this._getEntryWithMaxValue(b)},_getEntryWithMaxValue:function(a){var b=0,c=null;return Object.forEach(a,function(a,d){a>b&&(b=a,c=d)}),c},flattenStyledSpans:function(a){if(this.getElementStyleClass(a)&&this._flattenStylesInSpan(a),this._isContainStyleSpans(a)){var b=this.getStyledSpansRecursive(a,[]);b.forEach(this._flattenStylesInSpan,this)}},_flattenStylesInSpan:function(a){if(this._isContainStyleSpans(a))for(var b=a.clone(!1),c=this._domHelper.collectionToArray(a.childNodes),d=0;d<c.length;d++){var e=c[d];if(this.getElementStyleClass(e)||this._isContainStyleSpans(e)){var f=e.clone(!1),g=this._getStyledSpanWithItsParents(e,f);return f.firstChild&&b.adopt(f),b.inject(a,"before"),g.inject(a,"before"),this.flattenStyledSpans(g),this._flattenStylesInSpan(a),void 0}b.adopt(e)}},_getStyledSpanWithItsParents:function(a,b){if(this.getElementStyleClass(a))return a;for(var c=a.clone(!1),d=this._domHelper.collectionToArray(a.childNodes),e=0;e<d.length;e++){var f=d[e];if(this.getElementStyleClass(f)||this._isContainStyleSpans(f)){var g=f.clone(!1),h=this._getStyledSpanWithItsParents(f,g);return c.adopt(h),g.firstChild&&b.adopt(g),c}b.adopt(f)}return c},_isContainStyleSpans:function(a){return this._domHelper.isDomElement(a)&&a.getElements('span[class*="font_"]').length},getStyledSpansRecursive:function(a,b){if(this._domHelper.isDomElement(a)){var c=this.getElementStyleClass(a);c&&"span"===a.tagName.toLowerCase()?b.push(a):a.getChildren().each(function(a){b.concat(this.getStyledSpansRecursive(a,b))},this)}return b},isBlockContainUnstyledText:function(a){if(this._domHelper.isTextNode(a))return!0;if(this.getElementStyleClass(a))return!1;for(var b=this._domHelper.collectionToArray(a.childNodes),c=0;c<b.length;c++)if(this.isBlockContainUnstyledText(b[c]))return!0;return!1},getElementStyleClass:function(a){var b=a.classList;if(!b)return null;for(var c=0;c<b.length;c++)if(b[c].indexOf("font_")>-1)return b[c];return null},getStyleDelta:function(a,b){var c=a&&this._theme.getProperty(a),d=this._theme.getProperty(b),e={},f=["font-family","font-size","font-style","font-variant","font-weight","line-height"];return f.each(function(a){var b=this._createStyleKeyGetter(a);c&&c[b]()==d[b]()||(e[a]=d[b]())},this),e},_createStyleKeyGetter:function(a){var b=a.indexOf("-")+1,c="";return c=b>0?a.split("-").map(function(a){return a.charAt(0).toUpperCase()+a.slice(1)}).join(""):a.charAt(0).toUpperCase()+a.slice(1),c.contains("Font")&&"FontFamily"!==c&&(c=c.replace("Font","")),"get"+c},getColorDelta:function(a,b){var c=a&&this._theme.getProperty(a),d=this._theme.getProperty(b);if(!d)return null;var e=d.getColorReference();if(e){if(!c||!c.getColorReference()||c.getColorReference()!==e)return{isRef:!0,value:e}}else if(!c||c.getColorReference()||c.getColor()!==d.getColor())return{isRef:!1,value:d.getColor()};return null}})}),define.Class("wysiwyg.common.utils.TextSimpleFormatMigration",function(a){var b=a;b.utilize(["wysiwyg.common.utils.TextMigrationDomHelper","wysiwyg.common.utils.TextMigrationStylesHelper"]),b.statics({defaultStyleClass:"font_100"}),b.methods({initialize:function(){this._domHelper=new this.imports.TextMigrationDomHelper,this._styleHelper=new this.imports.TextMigrationStylesHelper},migrateElement:function(a){this._migrateBold(a),this._migrateItalic(a),this._migrateUnderline(a),this._migrateAlignRight(a),this._migrateAlignCenter(a),this._migrateJustify(a),this._migrateUl(a)},_migrateBold:function(a){var b=a.getElements('.bold"');this._removeClassAddTag(b,"bold","strong")},_migrateItalic:function(a){var b=a.getElements('.italic"');this._removeClassAddTag(b,"italic","em")},_migrateUnderline:function(a){var b=a.getElements('.underline"');this._removeClassAddTag(b,"underline","u")},_migrateAlignRight:function(a){var b=a.getElements('.alignRight"');this._removeClassAddInlineStyle(b,"alignRight","text-align","right")},_migrateAlignCenter:function(a){var b=a.getElements('.alignCenter"');this._removeClassAddInlineStyle(b,"alignCenter","text-align","center")},_migrateJustify:function(a){var b=a.getElements('.alignJustify"');this._removeClassAddInlineStyle(b,"alignJustify","text-align","justify")},_migrateUl:function(a){var b=a.getElements("ul, ol");b.each(function(a){this._styleHelper.getElementStyleClass(a)||a.addClass(this.defaultStyleClass)},this)},_removeClassAddTag:function(a,b,c){a.forEach(function(a){var d=new Element(c);this._domHelper.moveChildren(a,d),this._domHelper.removeClass(a,b),this._domHelper.isElementHasAttributes(a)||"span"!==a.nodeName.toLowerCase()?a.adopt(d):d.replaces(a)},this)},_removeClassAddInlineStyle:function(a,b,c,d){a.forEach(function(a){this._domHelper.removeClass(a,b),a.setStyle(c,d)},this)}})}),define.Class("wysiwyg.common.utils.TextStylesMigration",function(a){var b=a;b.utilize(["wysiwyg.common.utils.TextMigrationStylesHelper","wysiwyg.common.utils.TextMigrationDomHelper"]),b.resources(["W.Utils","W.Data","W.Config","W.Theme"]),b.fields({_changeableTagList:["h1","h2","h3","h4","h5","h6","p","div"],_deprecatedStyleClass:["font_1","font_10"]}),b.methods({initialize:function(){this._domHelper=new this.imports.TextMigrationDomHelper,this._styleMap=this.resources.W.Data.getDataByQuery("#CK_EDITOR_FONT_STYLES").get("items");var a=this;this.resources.W.Config.isEditorMode()?this.resource.getResourceValue("W.Preview",function(b){b.getPreviewManagersAsync(a._initViewerManagers,a)}):this._initViewerManagers(this.resources.W)},_initViewerManagers:function(a){this._viewer={theme:a.Theme,data:a.Data},this._stylesHelper=new this.imports.TextMigrationStylesHelper(a.Theme,this._domHelper)},migrateElement:function(a,b,c){var d=[],e=this._domHelper.collectionToArray(a.childNodes);e.forEach(function(a){if(this._domHelper.isBlockElement(a)){d.length>0&&(this._applyStyleOnElements(d,b,c),d=[]);var e=!this._changeableTagList.contains(a.tagName.toLowerCase())||this._domHelper.hasBlockElementChildren(a);e?this.migrateElement(a,b,c):this._applyStyleOnBlock(a,b,c)}else d.push(a)},this),d.length>0&&this._applyStyleOnElements(d,b,c)},_applyStyleOnElements:function(a,b,c){if(!this._domHelper.isOnlyWhiteSpace(a)){var d=new Element("p");d.inject(a[0],"before"),d.adopt(a),this._applyStyleOnBlock(d,b,c)}},_applyStyleOnBlock:function(a,b,c){if(0===a.childNodes.length)return LOG.reportError(wixErrors.TEXT_MIGRATION_EMPTY_BLOCK_ELEMENT,"TextStylesMigration","_applyStyleOnBlock"),void 0;this._stylesHelper.flattenStyledSpans(a);var d=null;if(this._stylesHelper.isBlockContainUnstyledText(a)){var e=this._replaceBlockWithDefaultTag(a,b,c),f=this._stylesHelper.getStyledSpansRecursive(e,[]);this._removeStyleClassesReplaceWithInline(null,f)}else d=this._moveStyleClassToBlockParentElement(a),d&&this._moveInlineStyleFromOriginalElementToBlockParentElement(a,d);this._verifyNoStyledSpans(a,d)},_verifyNoStyledSpans:function(a,b){var c=a.getElements('span[class*="font_"]');c.length&&(LOG.reportError(wixErrors.TEXT_MIGRATION_MISSED_STYLED_SPANS,"TextStylesMigration","_applyStyleOnBlock",a.outerHTML),this._removeStyleClassesReplaceWithInline(b,c))},_replaceBlockWithDefaultTag:function(a,b,c){if(!b||!c)return LOG.reportError(wixErrors.TEXT_MIGRATION_DEFAULT_VALUES_NOT_PROVIDED,"TextStylesMigration","_replaceBlockWithDefaultTag"),void 0;if(!a||a.tagName!==b||!a.hasClass(c)){var d=this._domHelper.renameNode(a,b);return d.addClass(c),d}},_moveStyleClassToBlockParentElement:function(a){var b=this._stylesHelper.getStyledSpansRecursive(a,[]),c=this._stylesHelper.getMostCommonStyle(b),d=null;if(c){var e=this._replaceDeprecatedStyleIfNeeded(c);return e!=c&&(d=c,c=e),a.addClass(c),this._removeStyleClassesReplaceWithInline(c,b),d&&this._addFontSizeOnBlockIfNeeded(a,c,d),c}return null},_replaceDeprecatedStyleIfNeeded:function(a){return this._isStyleDeprecated(a)?this.getReplacingStyle(a):a},_addFontSizeOnBlockIfNeeded:function(a,b,c){var d=this._viewer.theme.getProperty(c).getSize(),e=this._viewer.theme.getProperty(b).getSize();e>d&&a.setStyle("font-size",d)},getReplacingStyle:function(){return"font_8"},_isStyleDeprecated:function(a){return this._deprecatedStyleClass.contains(a)},_removeStyleClassesReplaceWithInline:function(a,b){b.map(function(b){var c=this._stylesHelper.getElementStyleClass(b);c==a?0===b.childNodes.length?b.destroy():this._removeStyleFromSpan(b,a):(this._domHelper.removeClass(b,c),0===b.getProperty("class").length&&b.removeAttribute("class"),this._setStyleOverrides(a,c,b))},this)},_removeStyleFromSpan:function(a,b){a.removeClass(b),this._domHelper.isElementHasAttributes(a)||this._domHelper.replaceElementWithItsChildren(a)},_setStyleOverrides:function(a,b,c){var d=this._stylesHelper.getStyleDelta(a,b),e=c;Object.forEach(d,function(a,b){e.setStyle(b,a)});var f=this._stylesHelper.getColorDelta(a,b);f&&(f.isRef?e.addClass(f.value):e.setStyle("color",f.value))},_moveInlineStyleFromOriginalElementToBlockParentElement:function(a,b){var c,d=this._viewer.theme.getProperty(b),e="core.utils.css.Font"===d.getOriginalClassName();return e&&(c=d.getLineHeight()),c&&(a.setStyle("line-height",c),this._createWrapperSpanWithBlockLineHeight(a,c),a=this._setBlockElementTagAccordingToStyle(a,b)),a},_createWrapperSpanWithBlockLineHeight:function(a,b){var c=document.createElement("span");c.setStyle("line-height",b),this._domHelper.moveChildren(a,c),a.appendChild(c)},_setBlockElementTagAccordingToStyle:function(a,b){var c=this._styleMap[b].seoTag;return this._domHelper.renameNode(a,c)}})}),define.Class("wysiwyg.common.managers.LayoutManager",function(a){var b=a;b.utilize(["wysiwyg.common.managers.classdata.Anchor"]),b.inherits("bootstrap.managers.BaseManager"),b.fields({LOCK_THRESHOLD:70,DEFAULT_MARGIN:10,SUGGEST_ANCHOR_MARGIN:20,FLAG_DIRTY_TOP:1,FLAG_DIRTY_BOTTOM:2}),b.binds(["_getAnchoredY","_getAnchoredH"]),b.resources(["W.Utils","W.Viewer"]),b.methods({initialize:function(){this._AnchorClass=this.imports.Anchor,this._isReady=!0,this._changedByHGroup=[],this._emptyArr=[]},setSavedAnchor:function(a){this._savedAnchors=a},attachSavedAnchors:function(a){this._addMissingAnchors();for(var b in this._savedAnchors)if(this._savedAnchors[b]){var c=$(b);if(a&&!a.contains(c))continue;c&&c.getLogic&&0===c.getLogic().getAnchors().length&&this.attachSavedAnchorsToComponent(c.getLogic(),this._savedAnchors[b])&&delete this._savedAnchors[b]}},_addMissingAnchors:function(){this._savedAnchors||(this._savedAnchors={}),this._savedAnchors.SITE_PAGES&&0!=this._savedAnchors.SITE_PAGES.length||(this._savedAnchors.SITE_PAGES=[{distance:0,locked:!0,originalValue:0,targetComponent:"PAGES_CONTAINER",type:"BOTTOM_PARENT"}]),this._savedAnchors.PAGES_CONTAINER&&0!=this._savedAnchors.PAGES_CONTAINER.length||(this._savedAnchors.PAGES_CONTAINER=[{distance:10,locked:!0,originalValue:0,targetComponent:"SITE_FOOTER",type:"BOTTOM_TOP"}])},attachSavedAnchorsToComponent:function(a,b){for(var c,d=[],e=[],f=0;f<b.length;f++)c=this.deserializeAnchor(b[f],a),c.type==c.ANCHOR_LOCK_BOTTOM?e.push(c):d.push(c);if(this._setComponentAnchors(a,d),e.length>0){var g=new this._AnchorClass;for(g.distance=0,g.originalValue=0,g.topToTop=0,g.type=g.ANCHOR_LOCK_BOTTOM,g.fromComp=a,g.toComp=a,e.unshift(g),f=0;f<e.length;f++)e[f].toComp.setHorizontalGroup(e)}},_setComponentAnchors:function(a,b){var c=a.getAnchors();a.setAnchors(b),this._notifyComponentAnchorsChanged(a,b,c)},_notifyComponentAnchorsChanged:function(a,b,c){var d=this.serializeAnchors(c),e=this.serializeAnchors(b);this.resources.W.Utils.areObjectsEqual(d,e)||this.fireEvent("updateAnchors",{data:{changedComponentIds:[a.getComponentId()],oldAnchors:d,newAnchors:e,sender:"layoutmanager"}})},serializeAnchors:function(a){var b=[],c=this;return a.each(function(a){b.push(c.serializeAnchor(a))}),b},serializeAnchor:function(a){var b={};return b.type=a.type,b.targetComponent=a.toComp.getComponentId(),b.locked=a.locked,b.distance=a.distance,b.topToTop=a.topToTop,b.originalValue=a.originalValue,b},deserializeAnchors:function(a,b){var c=[],d=this;return a.each(function(a){c.push(d.deserializeAnchor(a,b))}),c},deserializeAnchor:function(a,b){var c=new this._AnchorClass;return c.distance=a.distance||0,c.topToTop=a.topToTop||0,c.originalValue=a.originalValue||0,c.type=a.type,c.toComp=$(a.targetComponent).getLogic(),c.fromComp=b,c.locked=a.locked||!1,c},reportResize:function(a){var b;if(!a||0===a.length)throw new Error("Invalid changed elements");for(this._updateAnchors(a[0],a,!1),b=0;b<a.length;b++)this._updateChildAnchors(a[b]);var c=this._getAndClearChangedByHGroup();for(b=0;b<c.length;b++)this._updateChildAnchors(c[b]),this._updateAnchors(c[0],[c[0]],!1);var d={type:"componentResize",data:{changedElements:a}};this._reportElementsSize(d.data.changedElements),this.fireEvent(d.type,d)},_reportElementsSize:function(a){for(var b=0;b<a.length;b++)this.notifyPositionChanged(a[b],"updateSize")},reportMove:function(a){if(!a||0===a.length)throw new Error("Invalid changed elements");for(var b=0;b<a.length;b++)this.notifyPositionChanged(a[b],"updatePosition");this._updateAnchors(a[0],a,!1);var c=this._getAndClearChangedByHGroup();
for(b=0;b<c.length;b++)this._updateAnchors(c[0],[c[0]],!1);var d={type:"componentMove",data:{changedElements:a}};this.fireEvent(d.type,d)},notifyPositionChanged:function(a,b){var c=a.getLastCoordinates(),d=a.getCurrentCoordinates(),e=a.getLastDimensions(),f=a.getCurrentDimensions(),g=[a.getComponentId()],h=g.map(function(a){return this.resources.W.Utils.getComponentLogicFromDom(a)}.bind(this));if(h[0]){var i=this._getSiblingsYSortedArray(h[0]),j=i.map(function(a){return a.getComponentId()}.bind(this)),k={data:{changedComponentIds:g,ySortedElementIds:j,oldCoordinates:c,newCoordinates:d,oldDimensions:e,newDimensions:f}};this.resources.W.Utils.areObjectsEqual(d,c)&&this.resources.W.Utils.areObjectsEqual(f,e)||this.fireEvent(b,k)}},reportReparent:function(a,b,c,d){if(!a||0===a.length)throw new Error("Invalid changed elements");this._updateChildAnchors(b),this._updateAnchors(a[0],a,!1);var e=a[0].getParentComponent(),f=e.getChildComponents().map(function(a){return a.getLogic()}),g=a.map(function(a){return a.getComponentId()}),h=d?"showOnAllPagesChange":"scopeChangeWithinPage",i={type:"reparentComponent",data:{subType:h,changedComponentIds:g,oldState:{parentId:b._compId,children:c},newState:{parentId:e._compId,children:f}}};this.fireEvent(i.type,i)},reportDeleteComponent:function(a){this._updateChildAnchors(a)},reportResizeStart:function(a){this._getAndClearChangedByHGroup();var b={type:"componentResizeStart",data:a};this.fireEvent(b.type,b)},deleteSavedAnchorsById:function(a){this._savedAnchors&&this._savedAnchors[a]&&delete this._savedAnchors[a]},getOptionalBottomLocks:function(a){var b,c,d,e=[],f=[],g=a.getViewNode().getParent().getChildren("[comp]"),h=a.getHorizontalGroup();if(h){for(c=0,d=h.length;d>c;++c){var i=h[c];i.toComp!=a&&(e.push({locked:!0,target:i.toComp}),f.push(i.toComp))}b=h.slice(0)}for(c=0,d=g.length;d>c;++c){var j=g[c],k=j.getLogic&&j.getLogic();if(k&&k!=a&&-1===f.indexOf(k)&&!this._isHorizontalOverlap(a,k)&&this._isVerticalOverlap(a,k)&&k.allowHeightLock())if(b){var l=new this._AnchorClass;l.fromComp=b[0].fromComp,l.toComp=k,b.push(l),this._isValidHGroup(b)&&e.push({locked:!1,target:k}),b.pop(l)}else e.push({locked:!1,target:k})}return e},toggleHGroup:function(a,b,c){var d,e,f=a.getHorizontalGroup(),g=b.getHorizontalGroup();if(c){for(var h=0;h<f.length;h++)f[h].toComp===b&&(b.setHorizontalGroup(null),f.splice(h,1));if(1===f.length)return a.setHorizontalGroup(null),void 0;d=f}else f&&g?(f.combine(g),d=f):g?(e=new this._AnchorClass,e.type=e.ANCHOR_LOCK_BOTTOM,e.fromComp=g[0].fromComp,e.toComp=a,g.push(e),d=g):f?(e=new this._AnchorClass,e.type=e.ANCHOR_LOCK_BOTTOM,e.fromComp=f[0].fromComp,e.toComp=b,f.push(e),d=f):(d=[],e=new this._AnchorClass,e.type=e.ANCHOR_LOCK_BOTTOM,e.fromComp=a,e.toComp=a,d.push(e),e=new this._AnchorClass,e.type=e.ANCHOR_LOCK_BOTTOM,e.fromComp=a,e.toComp=b,d.push(e));this._updateHGroup(d)},_updateHGroup:function(a){for(var b=0;b<a.length;b++){var c=a[b];c.toComp.setHorizontalGroup(a),c.fromComp=a[0].fromComp,c.distance=this._getBottomDiff(c.fromComp,c.toComp),c.topToTop=c.toComp.getY()-c.fromComp.getY()}},_clearHGroup:function(a){for(var b=0;b<a.length;b++)a[b].toComp.setHorizontalGroup(null)},_isValidHGroup:function(a){var b;for(b=0;b<a.length;b++)if(a[b].toComp.getIsDisposed()||!a[b].toComp.allowHeightLock())return!1;var c=a.slice();for(c.sort(function(a,b){var c=a.toComp.getX(),d=b.toComp.getX();return c===d?0:c>d?1:-1}),b=0;b<c.length-1;b++)if(c[b].toComp.getX()+c[b].toComp.getWidth()>=c[b+1].toComp.getX())return!1;var d=a[0].toComp.getViewNode().getParent(),e=Number.MAX_VALUE,f=-Number.MAX_VALUE;for(b=0;b<a.length;b++){if(a[b].toComp.getIsDisposed())return!1;if(a[b].toComp.getViewNode().getParent()!=d)return!1;var g=a[b].toComp.getY(),h=a[b].toComp.getPhysicalHeight()+g;e=Math.min(h,e),f=Math.max(g,f)}return e>f},_getBottomDiff:function(a,b){return b.getY()+b.getPhysicalHeight()-a.getY()-a.getPhysicalHeight()},_validateCommonParent:function(a,b){if(0!==a.length){var c;c=b?b.getViewNode().getParent():a[0].getViewNode().getParent();var d=function(a){return c!==a.getViewNode().getParent()};if(a.some(d))throw new Error("Invalid elements scope")}},_getSiblingsYSortedArray:function(a){var b=a.getViewNode().getParent().getChildren("[comp]");return b.some(function(a){return!a.getLogic})?[]:b.sort(function(a,b){var c=a.getLogic().getY(),d=b.getLogic().getY();return c===d?0:c>d?1:-1}).map(function(a){return a.getLogic()})},_isHorizontalOverlap:function(a,b){var c=a.getX(),d=c+a.getWidth(),e=b.getX(),f=e+b.getWidth();return!(c>f||e>d)},_isVerticalOverlap:function(a,b){var c=a.getY(),d=c+a.getPhysicalHeight(),e=b.getY(),f=e+b.getPhysicalHeight();return!(c>f||e>d)},_clearReverseAnchorsByScope:function(a,b){for(var c=a.length-1;c>-1;c--){var d=a[c];b?d.type==d.ANCHOR_BOTTOM_PARENT&&a.splice(c,1):d.type!=d.ANCHOR_BOTTOM_PARENT&&a.splice(c,1)}},_updateAnchors:function(a,b,c){this._validateCommonParent(b,a);var d,e,f,g=this._getSiblingsYSortedArray(a),h=[],i=[],j=g.length,k=null;for(f=0;f<g.length;f++)h[f]={},this._clearReverseAnchorsByScope(g[f].getReverseAnchors(),!1),g[f].getHorizontalGroup()&&(g[f].getHorizontalGroup().$hGroupDirty=!0);var l=a.getParentComponent();for(l&&this._clearReverseAnchorsByScope(l.getReverseAnchors(),!0),d=j-1;d>=0;d--){var m=g[d];this._updateOrClearHGroup(m.getHorizontalGroup()),i[d]=m.getAnchors();var n=[],o=!1;if(m.isAnchorable().from.allow){for(e=d+1;j>e;e++){var p=g[e];p.isAnchorable()&&p.isAnchorable().to.allow&&(k=null,!h[d][e]&&this._isHorizontalOverlap(m,p)&&(-1===b.indexOf(m)&&-1===b.indexOf(p)&&(k=this._findAnchorToComp(i[d],p)),k=k||this._createToTopAnchor(m,p),h[d][e]=!0,k.type==k.ANCHOR_BOTTOM_TOP&&(o=!0,this._mergeSets(h[d],h[e])),k.type==k.ANCHOR_TOP_TOP&&m.isAnchorable().to.allow&&m.isAnchorable().to.allowBottomBottom!==!1&&this._checkAndAddBottomAnchor(p,m),n.push(k)))}o||l&&l.isAnchorable().to.allow&&(k=null,-1!==b.indexOf(m)||c||(k=this._findAnchorToComp(i[d],l)),k||(k=this._createToParentAnchor(m,l)),n.push(k))}this._setComponentAnchors(m,n)}},_updateOrClearHGroup:function(a){a&&a.$hGroupDirty&&(delete a.$hGroupDirty,this._isValidHGroup(a)?this._updateHGroup(a):this._clearHGroup(a))},_setAnchorableIsLocked:function(a){var b=a.fromComp,c=a.toComp;a.locked=b.isAnchorable().from.lock==Constants.BaseComponent.AnchorLock.NEVER||c.isAnchorable().to.lock==Constants.BaseComponent.AnchorLock.NEVER?!1:b.isAnchorable().from.lock==Constants.BaseComponent.AnchorLock.ALWAYS||c.isAnchorable().to.lock==Constants.BaseComponent.AnchorLock.ALWAYS?!0:a.distance<=this.LOCK_THRESHOLD},_setAnchorableDistance:function(a,b){var c=a.fromComp,d=a.toComp;void 0!==c.isAnchorable().from.distance?b=c.isAnchorable().from.distance:void 0!==d.isAnchorable().to.distance&&(b=d.isAnchorable().to.distance),a.distance=b},_createToParentAnchor:function(a,b){var c=a.getY(),d=a.getPhysicalHeight(),e=b.getInlineContentContainer().getSize().y,f=new this._AnchorClass;return f.type=f.ANCHOR_BOTTOM_PARENT,f.fromComp=a,f.toComp=b,this._setAnchorableDistance(f,e-c-d),this._setAnchorableIsLocked(f),f.topToTop=c,f.originalValue=e,f},_createToTopAnchor:function(a,b){var c=a.getY(),d=b.getY(),e=a.getPhysicalHeight(),f=b.getPhysicalHeight(),g=new this._AnchorClass;return g.fromComp=a,g.toComp=b,d+f>c+e&&d>c+e/2?(g.type=g.ANCHOR_BOTTOM_TOP,this._setAnchorableDistance(g,d-c-e)):(g.type=g.ANCHOR_TOP_TOP,this._setAnchorableDistance(g,d-c)),this._setAnchorableIsLocked(g),g.topToTop=d-c,g.originalValue=d,g},_checkAndAddBottomAnchor:function(a,b){var c=b.getY(),d=a.getY(),e=b.getPhysicalHeight(),f=a.getPhysicalHeight();if(c+e>d+f){var g=new this._AnchorClass;g.type=g.ANCHOR_BOTTOM_BOTTOM,g.fromComp=a,g.toComp=b,this._setAnchorableDistance(g,c+e-d-f),g.locked=g.distance<=this.LOCK_THRESHOLD,g.topToTop=d-c,g.originalValue=e;var h=[];h=h.concat(a.getAnchors()),a.addAnchor(g),this._notifyComponentAnchorsChanged(a,a.getAnchors(),h)}},_getAnchoredY:function(a){switch(a.type){case a.ANCHOR_BOTTOM_TOP:var b=a.fromComp.getPhysicalHeight(),c=a.fromComp.getY()+b;return c+=a.locked?a.distance:this.DEFAULT_MARGIN,Math.max(c,a.fromComp.getY()+b/2);case a.ANCHOR_TOP_TOP:return a.fromComp.getY()+a.distance}},_getAnchoredH:function(a){var b=a.fromComp.getPhysicalHeight(),c=a.fromComp.getY()+b;return a.locked?c+=a.distance:this.resources.W.Viewer.isPageComponent(a.toComp.getOriginalClassName())||(c+=this.DEFAULT_MARGIN),a.type==a.ANCHOR_BOTTOM_BOTTOM?c-=a.toComp.getY():a.type==a.ANCHOR_BOTTOM_PARENT&&a.toComp.getInlineContentContainer&&this._isInlineContentNonZeroSize(a.toComp)&&(c+=this._getContainerMarginHeight(a)),c},_isInlineContentNonZeroSize:function(a){return a.getInlineContentContainer().getSize().y>0},_getContainerMarginHeight:function(a){var b=a.toComp;return b.getPhysicalHeight()-b.getInlineContentContainer().getSize().y},enforceAnchors:function(a,b,c,d){if(0!==a.length&&null!==a[0].getViewNode().getParent()){this._validateCommonParent(a);var e=a[0].getParentComponent();d=d||this._getSiblingsYSortedArray(a[0]);var f;if(0!==d.length&&this._validateComponentsRendered(d)){for(f=0;f<a.length;f++)a[f].$layoutDirtyFlag=b?this.FLAG_DIRTY_TOP:this.FLAG_DIRTY_BOTTOM;var g=[];for(f=0;f<d.length;f++){if(g[f]||(g[f]=0),g[f]++,g[f]>20)return this.resources.W.Utils.debugTrace("Layout Manager","enforceAnchors","infinite loop"),this._enforceParentIfNeeded(e),void 0;if(d[f].$tempIndex=f,d[f].$layoutDirtyFlag){for(var h=Number.MAX_VALUE,i=d[f],j=0;j<i.getAnchors().length;j++)h=Math.min(this._enforceSingleAnchor(i.getAnchors()[j],c),h);i.getHorizontalGroup()&&(h=Math.min(this._enforceHGroup(i),h)),delete i.$layoutDirtyFlag,f>h&&(f=h-1)}}for(f=0;f<d.length;f++)delete d[f].$tempIndex,delete d[f].$layoutDirtyFlag;this._enforceParentIfNeeded(e)}else for(f=0;f<a.length;f++)delete a[f].$layoutDirtyFlag}},_enforceParentIfNeeded:function(a){a&&a.$layoutDirtyFlag===this.FLAG_DIRTY_BOTTOM&&this.enforceAnchors([a])},_validateComponentsRendered:function(a){for(var b=0;b<a.length;b++)if(0===a[b].getPhysicalHeight())return!1;return!0},_validateNodesRendered:function(a){for(var b=[],c=0;c<a.length;c++){if(!a[c].getLogic)return!1;b.push(a[c].getLogic())}return this._validateComponentsRendered(b)},validateAnchorTargetsRendered:function(a){for(var b=0;b<a.length;b++)if(!a[b].toComp.isRendered())return!1;return!0},_getContainerContentHeight:function(a){for(var b=0,c=a.getChildComponents(),d=0,e=0;e<c.length;e++)c[e]&&c[e].getLogic&&(d=this._getCompBottom(c[e].getLogic())),b=Math.max(d,b);return b},_getCompBottom:function(a){var b=a.getY(),c=a.getPhysicalHeight();return Math.max(b+c,0)},_getComponentContentHeight:function(a){var b=0;return b=a.getChildComponents&&this._validateNodesRendered(a.getChildComponents())?this._getContainerContentHeight(a):a.getMinPhysicalHeight()},getComponentMinResizeHeight:function(a){if(a.getHorizontalGroup()){var b=this._findAnchorToComp(a.getHorizontalGroup(),a);return this.getHGroupMinBottom(a.getHorizontalGroup())-a.getY()+b.distance}if(a.getChildComponents){var c=this._getContainerContentHeight(a);return a.getInlineContentContainer&&(c=c+a.getPhysicalHeight()-a.getInlineContentContainer().getSize().y),c}return 0},getComponentMinDragY:function(a,b){b||(b=this._emptyArr);for(var c=0,d=0;d<a.getReverseAnchors().length;d++){var e=a.getReverseAnchors()[d];if(!b.contains(e.fromComp))if(e.type==e.ANCHOR_BOTTOM_TOP){var f=this._getCompBottom(e.fromComp);c=Math.max(f,c)}else e.type==e.ANCHOR_TOP_TOP&&(c=Math.max(e.fromComp.getY(),c))}return c},getHGroupMinBottom:function(a){if(a.length<2)return 0;for(var b=-Number.MAX_VALUE,c=0;c<a.length;c++){var d=a[c];b=Math.max(this._getComponentContentHeight(d.toComp)-d.distance+d.toComp.getY(),b)}return b},getHGroupMinY:function(a){if(a.length<2)return 0;for(var b=-Number.MAX_VALUE,c=0;c<a.length;c++){var d=a[c];b=Math.max(this.getComponentMinDragY(d.toComp)-d.topToTop,b)}return b},_enforceHGroup:function(a){var b,c,d=Number.MAX_VALUE,e=a.getHorizontalGroup(),f=this._findAnchorToComp(e,a);if(!f)return Number.MAX_VALUE;if(a.$layoutDirtyFlag==this.FLAG_DIRTY_TOP){var g=this.getHGroupMinY(a.getHorizontalGroup()),h=Math.max(g,f.toComp.getY()-f.topToTop);for(d=Math.min(this._setHGroupPartY(f.fromComp,h),d),c=0;c<a.getHorizontalGroup().length;c++){b=a.getHorizontalGroup()[c];var i=b.fromComp.getY()+b.topToTop;d=Math.min(this._setHGroupPartY(b.toComp,i),d)}}var j=this.getHGroupMinBottom(a.getHorizontalGroup()),k=Math.max(j-f.fromComp.getY(),f.toComp.getY()+f.toComp.getPhysicalHeight()-f.distance-f.fromComp.getY());for(d=Math.min(this._setHGroupPartHeight(f.fromComp,k),d),c=0;c<a.getHorizontalGroup().length;c++){b=a.getHorizontalGroup()[c];var l=b.fromComp.getY()+b.fromComp.getPhysicalHeight()+b.distance-b.toComp.getY();d=Math.min(this._setHGroupPartHeight(b.toComp,l),d)}return d},_setHGroupPartHeight:function(a,b){var c=a.getPhysicalHeight();return c!=b&&(b=b-a.getExtraPixels().bottom-a.getExtraPixels().top,a.setHeight(b),a.$layoutDirtyFlag=this.FLAG_DIRTY_BOTTOM,this._changedByHGroup.include(a),void 0!==a.$tempIndex)?a.$tempIndex:Number.MAX_VALUE},_setHGroupPartY:function(a,b){var c=a.getY();return c!=b&&(a.setY(b),a.$layoutDirtyFlag=this.FLAG_DIRTY_TOP,this._changedByHGroup.include(a),void 0!==a.$tempIndex)?a.$tempIndex:Number.MAX_VALUE},_updateChildAnchors:function(a){if(a&&a.getChildComponents){var b=a.getChildComponents();if(!this._validateNodesRendered(b))return;b.length>0?this._updateAnchors(b[0].getLogic(),[],!0):this._clearReverseAnchorsByScope(a.getReverseAnchors(),!0)}},_getAndClearChangedByHGroup:function(){var a=this._changedByHGroup;return this._changedByHGroup=[],a},_enforceSingleAnchor:function(a,b){return a.type==a.ANCHOR_TOP_TOP&&a.fromComp.$layoutDirtyFlag===this.FLAG_DIRTY_BOTTOM?Number.MAX_VALUE:a.type==a.ANCHOR_BOTTOM_PARENT||a.type==a.ANCHOR_BOTTOM_BOTTOM?this._enforceFromBottomTypeAnchor(a):this._enforceToTopTypeAnchor(a,b)},_enforceToTopTypeAnchor:function(a,b){var c=a.toComp,d=this._getAnchoredY(a),e=c.getY(),f=-Number.MAX_VALUE;return a.type!=a.ANCHOR_BOTTOM_TOP||a.locked||(f=a.originalValue),b||c.setY(c.getY()<d?d:this._getMaxAnchoredY(c,f)),e!==c.getY()&&(c.$layoutDirtyFlag=this.FLAG_DIRTY_TOP),Number.MAX_VALUE},_enforceFromBottomTypeAnchor:function(a){var b=a.toComp,c=b.getPhysicalHeight(),d=this._getAnchoredH(a),e=d;return a.toComp.layoutMinHeight?e=a.toComp.layoutMinHeight():a.locked||b.isSiteSegment()||(e=a.originalValue),b.setHeight(d>c?d:this._getMaxAnchoredH(b,e)),c!==b.getHeight()&&(b.$layoutDirtyFlag=this.FLAG_DIRTY_BOTTOM,a.type==a.ANCHOR_BOTTOM_BOTTOM)?b.$tempIndex:Number.MAX_VALUE},_getMaxAnchoredH:function(a,b){b||(b=-Number.MAX_VALUE);var c=this._getAnchoredH,d=b;return a.getReverseAnchors().forEach(function(b){if(b.type==b.ANCHOR_BOTTOM_PARENT||b.type==b.ANCHOR_BOTTOM_BOTTOM){var e=c(b);b.locked||a.isSiteSegment()||(e=Math.max(e,b.originalValue)),d=Math.max(e,d)}}.bind(this)),d},_getMaxAnchoredY:function(a,b){var c=this._getAnchoredY,d=b;return a.getReverseAnchors().forEach(function(a){if(a.type==a.ANCHOR_BOTTOM_TOP||a.type==a.ANCHOR_TOP_TOP){var b=c(a);d=Math.max(b,d)}}),d},_findAnchorToComp:function(a,b){for(var c=0;c<a.length;c++)if(a[c].toComp===b)return a[c]},_mergeSets:function(a,b){for(var c in b)a[c]=!0},isReady:function(){return this._isReady},clone:function(a){return this.parent(a)},_getRenderModifiers:function(){var a=this.resources.W.Viewer._siteStructureData;return a?a.get("renderModifiers")||{}:{}},appendSavedAnchor:function(a){this._savedAnchors?Object.append(this._savedAnchors,a):this.setSavedAnchor(a)}})}),define.Class("wysiwyg.managers.WCookiesManager",function(a){var b=a;b.inherits("bootstrap.managers.BaseManager"),b.methods({_initializeExtra:function(){},setCookieParam:function(a,b){var c,d=this.getCookie(a);if(d){if(this.getCookieParams(a).indexOf(b)>=0)return;c=a+"="+d+","+b}else c=a+"="+b;var e=this.writeCookie(c);return e},getCookieParams:function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b)){var f=e.substring(b.length,e.length);return f.split(",")}}return[]},removeCookieParam:function(a,b){var c=this.getCookieParams(a);if(0!==c.length&&void 0!==c.length){var d=c.indexOf(b);if(!(0>d)){c.splice(d,1);var e=a+"="+c.toString();return this.writeCookie(e)}}},removeCookie:function(a){this.writeCookie(a+"=")},writeCookie:function(a,b,c,d){var e;if(b)e=new Date((new Date).getTime()+b);else{var f=new Date;f.setYear((new Date).getFullYear()+1),e=f}return a+=";expires="+e.toGMTString(),a+=";path="+(d||"/"),c&&(a+=";domain="+c),document.cookie=a,a},getCookie:function(a){if(document.cookie)for(var b=document.cookie.split(/;\s*/),c=0,d=b.length;d>c;c++){var e=b[c],f=a+"=";if(0===e.indexOf(f))return e.substring(f.length,e.length)}return!1},isReady:function(){return!0},clone:function(a){return this.parent(a)}})}),define.Class("wysiwyg.common.managers.WViewManager",function(a){var b=a;b.inherits("core.managers.viewmanager.ViewManagerBase"),b.utilize(["wysiwyg.managers.appdata.AppDataHandler"]),b.binds(["_fireScreenResizeEvent","_onSiteReady","_onPageNavigation","_setDocumentTitle","_notifySiteReadyForThumbnail"]),b.resources(["W.Utils","W.TPA","W.Commands"]),b.statics({SCREEN_RESIZE_EVENT:"ScreenResize"}),b.methods({initialize:function(){this.parent(),this._isPageScrollToTopEnabled=!1,this.initScreenResizeEventPropagation(),this._registerCommands(),this.addHeightChangeCallback(function(){return W.Layout.getComponentMinResizeHeight(this.getSiteNode().getLogic())}.bind(this))},setSite:function(a,b,c){this.parent(a,b,c);var d=this._siteNode.getElement("#SITE_PAGES");d&&d.getProperty("comp")&&(this._pageGroupComp=d,this._pageGroupComp.addEvent("pageTransitionEnded",this._onPageNavigation));var e=$(document.body);this.getPreviewMode()?e.setStyle("overflow","hidden"):(e.setStyle("overflow-y","scroll"),e.setStyle("overflow-x","auto"))},setAdData:function(a){this._adData=a},getAdData:function(){return this._adData},_onPageNavigation:function(a){this._setDocumentTitle(a),this.resources.W.Commands.executeCommand("WViewerCommands.MediaZoom.Close"),this.fireEvent("pageTransitionEnded",a)},getSiteTitleSEO:function(){return window.rendererModel.siteTitleSEO},isPremiumUser:function(){var a=window.rendererModel;return a&&a.premiumFeatures?a.premiumFeatures.length>0:!1},_setDocumentTitle:function(a){var b="",c=W.Viewer.getPagesData()[a],d=c.get("pageTitleSEO")||"",e=c.get("title")||"",f=W.Viewer.getSiteTitleSEO()||"",g=W.Viewer.isHomePage(a);d?b=d:(b=f,g||(b+=b?" | ":"",b+=e)),b&&(document.title=b)},_updateDocWidth:function(){var a=this._siteStructureData,b=a.get("renderModifiers"),c=this.injects().Utils.getQueryParam("siteWidth");if(c)return this._docWidth=parseInt(c,10),b.siteWidth=this._docWidth,a.markDataAsDirty(),void 0;if(b&&b.siteWidth)return this._docWidth=b.siteWidth,void 0;switch(window.rendererModel.applicationType){case"HtmlFacebook":this._docWidth="520";break;case"HtmlWeb":this._docWidth="980";break;default:this._docWidth=980}},_pageTransition:function(a){this._currentPageId=a,this._pageGroupComp?this._pageGroupComp.getLogic().gotoPage(a):this.parent(a)},getDocWidth:function(){return this._docWidth||this._updateDocWidth(),this._docWidth},initScreenResizeEventPropagation:function(){$(window).addEvent("resize",this._fireScreenResizeEvent)},indexPages:function(a){var b=this._siteNode.getElement(a);if(!b)return this.resources.W.Utils.callLater(this.indexPages,[a],this,10);var c={},d=[];this._getPageElements(b).each(function(a){var b=a.get("id")||this.resources.W.Utils.getUniqueId("page");c[b]=a,a.addClass("sitePage");var e=a.get("dataQuery");d.push(e)}.bind(this)),d=this._fixPagesOrderByNewMenuData(d);var e=this._siteStructureData.getData().pages;e=e||[];var f;for(f=0;f<e.length;++f){var g=e[f],h=d.indexOf(g);-1!=h&&(d.splice(h,1),d.splice(f,0,g))}var i=W.Data.isDataChange();this._siteStructureData.set("pages",d),(void 0===this._siteStructureData.get("mainPage")||""===this._siteStructureData.get("mainPage"))&&this._siteStructureData.set("mainPage",d[0]),i&&W.Data.flagDataChange(),this._pages=c},_getPageElements:function(a){var b="[comp=mobile.core.components.Page],[comp=core.components.Page]";return a.getElements(b)},isPageComponent:function(a){return"mobile.core.components.Page"===a||"core.components.Page"===a},getPages:function(){return this._pages},getLinkablePagesData:function(){return this._pagesData},_fixPagesOrderByNewMenuData:function(a){if(W.Data.isDataAvailable("#MAIN_MENU")){var b,c=W.Data.getDataByQuery("#MAIN_MENU"),d=c.getAllItems(),e=d.length;for(b=0;e>b;b++){var f=d[b],g=f.get("refId"),h=$$("[dataquery="+g+"]");0===h.length}d=c.getAllItems(),a=d.map(function(a){return a.get("refId")})}return a},_fireScreenResizeEvent:function(){this.fireEvent(this.SCREEN_RESIZE_EVENT)},_onSiteReady:function(){this.parent(),W.Layout.attachSavedAnchors(),this._fireScreenResizeEvent(),this.getSiteNode()&&this.getSiteNode().getLogic&&this.siteHeightChanged(),this.resources.W.Utils.callLater(this._notifySiteReadyForThumbnail)},_notifySiteReadyForThumbnail:function(){"true"===this.resources.W.Utils.getQueryParam("siteReadyAlert");var a=this.resources.W.Utils.getQueryParam("siteReadyPost");if(a){var b=new Request.JSON({url:a});b.post({siteReady:!0})}},getSiteHeight:function(){return this._siteHeight},setAdHeight:function(a){this._adHeight=a},addHeightChangeCallback:function(a){this._heightChangeCallbacks=this._heightChangeCallbacks||[],this._heightChangeCallbacks.push(a)},_getHeightFromCallback:function(){if(!this._heightChangeCallbacks)return 0;var a,b=0;for(a=0;a<this._heightChangeCallbacks.length;a++)b+=this._heightChangeCallbacks[a]();return b},siteHeightChanged:function(a){this.getSiteNode().getLogic().flushPhysicalHeightCache(),this._siteHeight=this._getHeightFromCallback(),this.fireEvent("resize",this._siteHeight),a||this.getSiteNode().getLogic().setHeight(this._siteHeight),this._postHeightMessage()},_postHeightMessage:function(){var a=parent.postMessage?parent:parent.document.postMessage?parent.document:void 0;a&&"undefined"!=typeof a&&a.postMessage(this._siteHeight,"*")},addOrientationEvent:function(){},getPageGroup:function(){return this._siteNode.getElement("#SITE_PAGES").getLogic()},_registerCommands:function(){var a=this.resources.W.Commands;a.registerCommandAndListener("WViewerCommands.AdminLogin.Open",this,this._openAdminLogin),a.registerCommandAndListener("WViewerCommands.AdminLogin.Close",this,this._closeAdminLogin),a.registerCommandListenerByName("WPreviewCommands.WEditModeChanged",this,this._onEditModeChanged),a.registerCommandAndListener("WViewerCommands.OpenZoom",this,this.setZoomData),a.registerCommandAndListener("WViewerCommands.SiteMembers.Open",this,this._openSiteMembersPopup),a.registerCommandAndListener("WViewerCommands.SiteMembers.Close",this,this._closeSiteMembersPopup),a.registerCommandAndListener("WViewerCommands.PasswordLogin.Open",this,this._openPasswordLogin),a.registerCommandAndListener("WViewerCommands.PasswordLogin.Close",this,this._closePasswordLogin)},_openAdminLogin:function(a){a||(a={}),a.clazz="wysiwyg.viewer.components.AdminLogin",a.dataItem=W.Data.createDataItem({type:"Text"}),this._openPasswordLogin(a)},_closeAdminLogin:function(){this._closePasswordLogin()},removeMediaZoom:function(){this._mediaZoom&&(this._mediaZoom.removeFromDOM(),delete this._mediaZoom)},_setMediaZoomDataInner:function(a){a.mediaList?this._mediaZoom.getLogic().setGallery(a.mediaList,a.currentIndex):a.imageData&&this._mediaZoom.getLogic().setImage(a.imageData)},enterFullScreenMode:function(){if(!this._isFullScreen){var a=this.getPreviewMode()?$(window.parent.document.body):$(document.body);this._originalBodyOverflow=a.getStyle("overflow"),a.setStyle("overflow","hidden"),this._isFullScreen=!0}},exitFullScreenMode:function(){if(this._isFullScreen){this._currentPageId?this._setUrlHashToPage(this._currentPageId):this.goToHomePage();var a=this.getPreviewMode()?$(window.parent.document.body):$(document.body);a.setStyle("overflow",this._originalBodyOverflow),this._isFullScreen=!1}},_onHashChange:function(a){if(a=a||{},this.isSiteReady()){var b=a.newHash;"zoom"==b||W.Data.isDataAvailable("#"+b)?this._handleValidHashChange(a):this._changePageFromHash(b)}},_onHashDataItemIdChange:function(a,b){var c=b.getType&&b.getType();return this._isPageDataType(c)&&a?(this._changePageFromHash(a),void 0):("Image"===c?this.resources.W.Commands.executeCommand("WViewerCommands.OpenZoom",{item:"#"+b.get("id"),getDisplayerDivFunction:this.getDefaultGetZoomDisplayerFunction("Image")},this):"PermaLink"==c&&"ListsApps"==b.get("appType")&&W.Apps.openPermaLink(b),void 0)},_isPageDataType:function(a){return"Page"===a},_onPageExtraDataChange:function(a,b,c){var d=this._getPageDataFromHash(b);if(this.resources.W.TPA.setPageState(b,a),!c){var e=d.get("tpaApplicationId"),f=this.resources.W.TPA.getComponentRegistrar().getSection(e);f&&f._updateIframe(!0)}},_setUrlHashToPage:function(a){var b=this._pagesData[a];if(b){var c=this.resources.W.TPA.getPageState(a);this.resources.W.Utils.hash.setHash(a,b.get("pageUriSEO"),c)}},getAppDataHandler:function(){return this._appDataHandler||(this._appDataHandler=new this.imports.AppDataHandler),this._appDataHandler},_handleValidHashChange:function(a){var b=a.newHash,c=a.extData,d=a.isIdChanged,e=a.isExtDataChanged,f=a.silent,g=this._zoomComp&&this._zoomComp.getLogic&&this._zoomComp.getLogic().isZoomOpened();d&&!f&&b&&("zoom"==b&&(b=c.split("/")[1]),W.Data.getDataByQuery("#"+b,function(a){this._onHashDataItemIdChange(b,a)}.bind(this)),a.isForSureAfterChange&&LOG.reportPageEvent(window.location.href)),e&&(g?this._zoomComp.getLogic().showZoomImage():this._onPageExtraDataChange(c,b,f))},getDefaultGetZoomDisplayerFunction:function(a){return"Image"==a?function(a,b,c){var d=this._getZoomDisplayerCompSettings();this.injects().Components.createComponent(d.comp,d.skin,a,{maxWidth:b.x,maxHeight:b.y},null,function(a){c(a.getViewNode())})}.bind(this):void 0},_getZoomDisplayerCompSettings:function(){return{comp:"wysiwyg.viewer.components.MediaZoomDisplayer",skin:"wysiwyg.viewer.skins.displayers.MediaZoomDisplayerSkin"}},getDefaultGetHashPartsFunction:function(a){return"Image"==a?function(a,b){W.Data.getDataItem(a,function(a){b({id:"zoom",title:a.get("title"),extData:this.getCurrentPageId()+"/"+a.get("id")})}.bind(this))}.bind(this):void 0},setZoomData:function(a){this._initZoomIfNeeded(function(b){this._zoomComp=b.getViewNode(),this._setZoomDataInner(a)}.bind(this))},removeZoomElement:function(){this._zoomComp&&(this._zoomComp.removeFromDOM(),delete this._zoomComp)},_setZoomDataInner:function(a){a.itemsList?this._zoomComp.getLogic().setGallery(a.itemsList,a.currentIndex,a.getDisplayerDivFunction,a.getHashPartsFunction,a.extraParams):a.item&&this._zoomComp.getLogic().setImage(a.item,a.getDisplayerDivFunction,a.getHashPartsFunction)},_initZoomIfNeeded:function(a){if(this._zoomComp)a&&a(this._zoomComp.getLogic());else{var b=this._getZoomCompSettings();this._zoomComp=W.Components.createComponent(b.comp,b.skin,null,null,function(a){a.getViewNode().insertInto(this._siteNode)}.bind(this),a)}},_getZoomCompSettings:function(){return{comp:"wysiwyg.viewer.components.MediaZoom",skin:"wysiwyg.viewer.skins.MediaZoomSkin"}},_openSiteMembersPopup:function(a){this.injects().SiteMembers.openSiteMembersPopup(a)},_closeSiteMembersPopup:function(){this.injects().SiteMembers.closeSiteMembersPopup()},_openPasswordLogin:function(a){if(!this._passwordLogin){var b=a&&a.args,c=a&&a.clazz||"wysiwyg.viewer.components.PasswordLogin",d=a&&a.dataItem||null;W.Components.createComponent(c,"wysiwyg.viewer.skins.PasswordLoginSkin",d,b,function(){},function(a){this._passwordLogin=a;var b=a.getViewNode();b.setStyle("opacity","0"),a.getViewNode().insertInto(this._siteNode),a.centerDialog(),new Fx.Tween(b,{duration:"short",link:"ignore"}).start("opacity","1.0")}.bind(this))}},_closePasswordLogin:function(){if(this._passwordLogin){var a=this._passwordLogin.getViewNode(),b=new Fx.Tween(a,{duration:"short",link:"ignore"}),c=function(){b.removeEvent("complete",c),a.removeFromDOM(),delete this._passwordLogin}.bind(this);b.addEvent("complete",c),b.start("opacity","0.0")}},_changePageFromHash:function(a){var b=this._getPageDataFromHash(a);if(null!==b){var c=b.get("id");c!=this._currentPageId&&this._checkRequireLogin(b,function(){c&&this._pageTransition(c)}.bind(this))}},goToPage:function(a,b){if(b)return this.parent(a),void 0;var c=this._pagesData[a];this._checkRequireLogin(c,function(){this.goToPage(a,!0)}.bind(this))},getPageData:function(a){return this._pagesData[a]},getSiteName:function(){return window.rendererModel.siteName||""},_checkRequireLogin:function(a,b){var c=this.isPublicMode()||"PREVIEW"==this.getEditorMode(),d=a.get("pageSecurity"),e=a.get("id"),f=this._getFallbackPage(e),g=!f;if(c&&d.requireLogin&&!this.injects().SiteMembers.isLoggedIn()&&!this._isProtectedPageValidated(e)){var h="",i=a.get("pageUriSEO"),j=this.resources.W.Utils.hash.getHashPartsString(e,i,h);this.injects().SiteMembers.openSiteMembersPopup({disableCancel:g,hashRedirectTo:"#"+j,openedByPageSecurity:!0,authCallback:function(a){this._onAuthCallback(a,e,f,b)}.bind(this)})}else c&&d.passwordDigest&&!this._isProtectedPageValidated(e)?this.resources.W.Commands.executeCommand("WViewerCommands.PasswordLogin.Open",{args:{digestedPassword:d.passwordDigest,disableCancel:g,authCallback:function(a){this._onAuthCallback(a,e,f,b)}.bind(this)}}):b()},_onAuthCallback:function(a,b,c,d){a.authResponse?(this._setPageValidated(b),d()):a.data&&a.data.cancel&&(c?location.hash=c:location.reload())},_getFallbackPage:function(a){var b=this.injects().Viewer.getCurrentPageId(),c=!!b,d=W.Data.getDataMap().SITE_STRUCTURE.get("mainPage");return d=d?d.replace("#",""):"",c?b:a!=d?d:null},_setPageValidated:function(a){this._validatedPages||(this._validatedPages={}),this._validatedPages[a]=!0},setPageAsNotValidated:function(a){this._validatedPages||(this._validatedPages={}),this._validatedPages[a]=!1},_isProtectedPageValidated:function(a){return this._validatedPages&&this._validatedPages[a]},clone:function(a){return this.parent(a)}})}),define.Class("wysiwyg.managers.appdata.AppDataHandler",function(a){var b=a,c=null;b.methods({getOriginalAppsData:function(){return c},getAppsData:function(){return window.rendererModel||(window.rendererModel={}),window.rendererModel.clientSpecMap||(window.rendererModel.clientSpecMap={}),c||(c=Object.clone(window.rendererModel.clientSpecMap)),window.rendererModel.clientSpecMap},registerAppData:function(a){this.getAppsData()[a.applicationId]=a},getAppData:function(a){return this.getAppsData()[a]||{}},getAppDataByAppDefinitionId:function(a){var b=this.getAppsData(),c={};return Object.filter(b,function(b){return b.appDefinitionId===a?(c=b,!0):void 0}),c},getWidgetData:function(a,b){var c=this.getAppData(a).widgets||{};return c[b]||{}},getSiteMembersData:function(){var a=Object.filter(this.getAppsData(),function(a){return a&&a.type&&"sitemembers"==a.type.toLowerCase()}),b=Object.values(a);return b&&b.length>0?b[0]:null},getWidgetProperty:function(a,b,c){return this.getWidgetData(a,b)[c]},getLargestApplicationId:function(){var a=this.getAppsData(),b=0;for(var c in a)a.hasOwnProperty(c)&&(c=parseInt(c,10),c>b&&(b=c));return b}})}),define.Class("wysiwyg.common.managers.classdata.Anchor",function(a){var b=a;b.fields({ANCHOR_TOP_TOP:"TOP_TOP",ANCHOR_BOTTOM_TOP:"BOTTOM_TOP",ANCHOR_BOTTOM_BOTTOM:"BOTTOM_BOTTOM",ANCHOR_BOTTOM_PARENT:"BOTTOM_PARENT",ANCHOR_LOCK_BOTTOM:"LOCK_BOTTOM",type:"BOTTOM_TOP",distance:0,topToTop:0,locked:!1,fromComp:null,toComp:null,originalValue:0/0})}),define.dataSchema("AudioPlayer",{uri:{type:"string","default":""},autoPlay:{type:"Boolean","default":!1},loop:{type:"Boolean","default":!1},visible:{type:"Boolean","default":!0},volume:{type:"number","default":100},title:{type:"string","default":""},description:{type:"string","default":""},icon_uri:{type:"string","default":""},originalFileName:{type:"string","default":""}}),define.dataSchema("Boolean",{value:"boolean"}),define.dataSchema("ContactForm",{toEmailAddress:"string",bccEmailAddress:"string"}),define.dataSchema("EbayItemsBySeller",{sellerId:"string",registrationSite:"string"}),define.dataSchema("EditorSettings",{palletsFilterTags:"array",fontsFilterTags:"array",pagesFilterTags:"array"}),define.dataSchema("FlashComponent",{"extends":"Link",title:"string",uri:"string",description:"string",height:"number",width:"number",placeHolderImage:"ref"}),define.dataSchema("FlickrBadgeWidget",{userId:{type:"string","default":"74009459@N07"},userName:"string",tag:"string",imageCount:{type:"number","default":3},whichImages:{type:"string","default":"latest"},imageSize:{type:"string","default":"t"},layoutOrientation:{type:"string","default":"v"}}),define.dataSchema("GeoMap",{address:{type:"string","default":"10 West 18th St. New york, NY 10011"},latitude:{type:"number","default":"40.73"},longitude:{type:"number","default":"-74"},addressInfo:{type:"string","default":"Wix Lounge NYC"}}),define.dataSchema("HomePageLogin",{postLoginUrl:{type:"string","default":"http://www.wix.com",description:"some amazing description"},postSignUpUrl:{type:"string","default":"http://www.wix.com",description:"some amazing description"},startWith:{type:"string","enum":["login","createUser"],"default":"login",description:"some amazing description"}}),define.dataSchema("HtmlComponent",{sourceType:"string",url:"string"}),define.dataSchema("list",{items:"array"}),define.dataSchema("MenuData",{menuButton:"ref",pages:"ref"}),define.dataSchema("PayPalButton",{merchantID:{type:"string","default":"",description:"some amazing description"}}),define.dataSchema("PermaLink",{appType:{type:"string","enum":["ListsApps","ThirdPartyApps"]},dataItemRef:"ref",mutableSeoTitle:"string",correctPermaLinkRef:"ref"}),define.dataSchema("SelectOption",{value:"string",text:"string",enabled:{type:"boolean","default":"true"},description:"string"}),define.dataSchema("SelectableList",{items:{type:"refList",description:"a list of data items or data queries to select from","default":[]},selected:{type:"ref",description:"the selected data item/query","default":null}}),define.dataSchema("SiteButton",{"extends":"Link",label:{type:"string","default":"MY BUTTON"}}),define.dataSchema("SoundCloudWidget",{url:{type:"string","default":""},showArtWork:{type:"Boolean","default":!0},autoPlay:{type:"Boolean","default":!1},embedSource:{type:"string","default":""}}),define.dataSchema("StyledText",{text:"string",stylesMapId:"string"}),define.dataSchema("Table",{items:"refList",header:"refList",footer:"refList"}),define.dataSchema("Video",{videoId:"string",videoType:"string"}),define.dataSchema("WixHomepageMenu",{menuDataSource:{type:"string","enum":["topMenu","bottomMenu"],"default":"topMenu",description:"some amazing description"}}),define.dataSchema("ButtonProperties",{align:{type:"string","enum":["left","center","right"],"default":"center",description:"alignment of the menu"},margin:{type:"number","default":0,description:"text left and right margins"}}),define.dataSchema("ComboBoxInputProperties",{hasPrompt:{type:"boolean","default":!1,description:"Display prompt in combo"},promptText:{type:"string","default":"",description:"The text that will be displayed in the prompt"},promptValue:{type:"number","default":-1,description:"Data of prompt option"}}),define.dataSchema("EbayItemsBySellerProperties",{headerImage:{type:"string","enum":["0","2","3","4","5","6","7","8","9","10","11"],"default":0,description:"The widget's header"}}),define.dataSchema("FlashComponentProperties",{displayMode:{type:"string","enum":["original","fit","stretch"],"default":"original",description:"displayMode of the movie"}}),define.dataSchema("GalleryExpandProperties",{expandEnabled:{type:"boolean","default":!0},goToLinkText:{type:"string","default":"Go to link"},galleryImageOnClickAction:{type:"string","default":"unset","enum":["disabled","zoomMode","goToLink"]}}),define.dataSchema("GoogleMapProperties",{showZoom:{type:"boolean","default":!0,description:"show zoom control"},showPosition:{type:"boolean","default":!0,description:"show position control"},showStreetView:{type:"boolean","default":!0,description:"show Street View control"},showMapType:{type:"boolean","default":!0,description:"show map type control"},mapDragging:{type:"boolean","default":!0,description:"show map type control"},mapType:{type:"string","enum":["ROADMAP","TERRAIN","SATELLITE","HYBRID"],"default":"ROADMAP",description:"show zoom control"}}),define.dataSchema("HorizontalMenuProperties",{alignButtons:{type:"string","enum":["left","center","right"],"default":"center",description:"alignment of the menu buttons"},alignText:{type:"string","enum":["left","center","right"],"default":"center",description:"alignment of the menu buttons' text"},sameWidthButtons:{type:"boolean","default":!1,description:"Keep buttons the same size"},moreButtonLabel:{type:"string","default":"More",description:'Label to use for "more button"'},moreItemHeight:{type:"number","default":15,description:"height of items in the more menu"},stretchButtonsToMenuWidth:{type:"boolean","default":!0,description:""}}),define.dataSchema("LayoutProperties",{x:{type:"number","default":0,description:"x position"},y:{type:"number","default":0,description:"y position"},w:{type:"number","default":100,description:"width"},h:{type:"number","default":100,description:"height"},anchors:{type:"array",description:"list of anchors"}}),define.dataSchema("LinkBarProperties",{gallery:{type:"string","default":"clipart",description:"gallery type (photos, icons, backgrounds, etc..)"},iconSize:{type:"number","default":30,description:"Icon Size",minimum:16,maximum:128},spacing:{type:"number","default":5,description:"Spacing",minimum:1,maximum:50},bgScale:{type:"number","default":1,description:"Background scale",minimum:0,maximum:2},orientation:{type:"string","enum":["HORIZ","VERT"],"default":"HORIZ",description:"Orientation"}}),define.dataSchema("MatrixGalleryProperties",{"extends":"GalleryExpandProperties",imageMode:{type:"string","default":"clipImage","enum":["clipImage","flexibleWidthFixed"]},numCols:{type:"number","default":3,description:"Number of columns",minimum:1,maximum:10},maxRows:{type:"number","default":2,description:"Maximum number of rows",minimum:1,maximum:10},incRows:{type:"number","default":2,description:"Row number increase",minimum:1,maximum:10},margin:{type:"number","default":15,description:"Margin around each item",minimum:0,maximum:250}}),define.dataSchema("NumberInputProperties",{minValue:{type:"number","default":0,description:"minimum allowed value"},maxValue:{type:"number","default":999,description:"maximum allowed value"}}),define.dataSchema("PageGroupProperties",{transition:{type:"string","enum":["none","swipeHorizontalFullScreen","swipeVerticalFullScreen","crossfade","outIn"],"default":"slide",description:"page transition"}}),define.dataSchema("PaginatedGridGalleryProperties",{"extends":"GalleryExpandProperties",imageMode:{type:"string","default":"clipImage","enum":["clipImage"]},numCols:{type:"number","default":3,description:"Number of columns",minimum:1,maximum:10},maxRows:{type:"number","default":3,description:"Maximum number of rows",minimum:1,maximum:10},margin:{type:"number","default":0,description:"Margin around each item",minimum:0,maximum:250},transition:{type:"string","default":"seq_crossFade_All","enum":["none","seq_crossFade_All","seq_shrink_All","swipe_horiz_All","swipe_vert_All","seq_random"]},transDuration:{type:"number",minimum:0,maximum:5,"default":1,description:"Duration of the transition in sec"},autoplayInterval:{type:"number","default":3,minimum:0,maximum:30,description:"Autplay interval"},autoplay:{type:"boolean","default":!1,description:""},showAutoplay:{type:"boolean","default":!0,description:""},showNavigation:{type:"boolean","default":!0,description:""},showCounter:{type:"boolean","default":!0,description:""}}),define.dataSchema("PayPalButtonProperties",{buttonType:{type:"string","enum":["buy","donate"],"default":"buy",description:"buy or donate button"},itemName:{type:"string","default":"",description:"some amazing description"},itemID:{type:"string","default":"",description:"some amazing description"},organizationName:{type:"string","default":"",description:"some amazing description"},organizationID:{type:"string","default":"",description:"some amazing description"},amount:{type:"string","default":"",description:"some amazing description"},currencyCode:{type:"string","enum":["USD","GBP","NIS"],"default":"USD",description:"Currency Code"},target:{type:"string","enum":["_self","_blank"],"default":"_blank",description:"Currency Code"},showCreditCards:{type:"boolean","default":!0,description:"Show credit card symbols"},smallButton:{type:"boolean","default":!1,description:"use small button"}}),define.dataSchema("ButtonProperties",{align:{type:"string","enum":["left","center","right"],"default":"center",description:"alignment of the menu"},margin:{type:"number","default":0,description:"text left and right margins"}}),define.dataSchema("SlideShowGalleryProperties",{"extends":"GalleryExpandProperties",imageMode:{type:"string","default":"clipImage","enum":["clipImage","flexibleHeight"]},transition:{type:"string","enum":["none","swipeVertical","swipeHorizontal","crossfade","outIn"],"default":"swipeHorizontal",description:"Transition between items of the gallery"},autoplayInterval:{type:"number","default":"5",minimum:0,maximum:30,description:"Autplay interval"},autoplay:{type:"boolean","default":!1,description:""},transDuration:{type:"number",minimum:0,maximum:5,"default":1,description:"Duration of the transition in sec"},bidirectional:{type:"boolean","default":!0,description:"Decides whether the transition direction reflects Prev/Next"},reverse:{type:"boolean","default":!1,description:"If bidirectional, inverts the direction of transitions"},showAutoplay:{type:"boolean","default":!0,description:""},showNavigation:{type:"boolean","default":!0,description:""},showCounter:{type:"boolean","default":!0,description:""}}),define.dataSchema("SliderGalleryProperties",{"extends":"GalleryExpandProperties",imageMode:{type:"string","default":"clipImage","enum":["clipImage","flexibleWidth"]},margin:{type:"number","default":15,description:"Margin around each item",minimum:0,maximum:250},maxSpeed:{type:"number","default":"5",minimum:1,maximum:30,description:"Speed"},aspectRatio:{type:"number",minimum:.1,maximum:3,"default":1,description:""},aspectRatioPreset:{type:"string","enum":["16:9","4:3","1:1","3:4","9:16"],"default":"4:3"},loop:{type:"boolean","default":!0,description:""},showCounter:{type:"boolean","default":!0,description:""}}),define.dataSchema("TableComponentProperties",{minHeight:{type:"number","default":void 0,description:"minimum allowed value"}}),define.dataSchema("TwitterFeedProperties",{numOfTweets:{type:"number","default":"5",description:"Number of tweets in feed"},subject:{type:"string","default":"What's being said about...",description:"subject line"},title:{type:"string","default":"Me...",description:"title line"}}),define.dataSchema("VideoProperties",{autoplay:{type:"boolean","default":!1,description:"video autoplay on load"},loop:{type:"boolean","default":!1,description:"play video in a loop"},showinfo:{type:"boolean","default":!1,description:"show video title and author"},lightTheme:{type:"boolean","default":!1,description:"show video with light theme"},showControls:{type:"string","enum":["always_show","always_hide","temp_show"],"default":"always_show",description:"show / hide controls"}}),define.dataSchema("WFacebookCommentProperties",{numPosts:{type:"number","default":2,minimum:0,maximum:10,description:"the number of posts display by default"},width:{type:"number","default":"555",description:"the width of the plugin, in pixels"},colorScheme:{type:"string","enum":["light","dark"],"default":"light",description:"the color scheme of the plugin"}}),define.dataSchema("WFacebookLikeProperties",{layout:{type:"string","enum":["standard","button_count","box_count"],"default":"standard",description:"the layout of the button"},send:{type:"boolean","default":!1,description:"enable/disable the send button"},show_faces:{type:"boolean","default":!1,description:"show the faces of your friends that liked this item"},width:{type:"string","default":"225",description:"the width of the Like button"},action:{type:"string","enum":["like","recommend"],"default":"like",description:" the verb to display on the button. Options: *like*, *recommend*"},font:{type:"string","enum":["helvetica","arial","lucida grande","segoe ui","tahoma","trebuchet ms","verdana"],"default":"helvetica",description:"the font to display in the button"},colorScheme:{type:"string","enum":["light","dark"],"default":"light",description:"the color scheme for the like button"}}),define.dataSchema("WGooglePlusOneProperties",{size:{type:"string","enum":["small","medium","standard","tall"],"default":"standard",description:"The button size to render"},annotation:{type:"string","enum":["none","bubble","inline"],"default":"inline",description:"The annotation to display next to the button."},width:{type:"string","default":"",description:"If annotation is set to *inline*, the width in pixels to use for the button and its inline annotation. If omitted, a button and its inline annotation use 450px."}}),define.dataSchema("WPhotoProperties",{displayMode:{type:"string","enum":["fill","full","stretch","fitWidth","fitWidthStrict","fitHeightStrict"],"default":"fill",description:"displayMode of the photo"}}),define.dataSchema("WTwitterFollowProperties",{showCount:{type:"boolean","default":!0,description:"Followers count display"},showScreenName:{type:"boolean","default":!0,description:"Show screen name"},textColor:{type:"hexcolor","default":"",description:"HEX color code for the text color"},linkColor:{type:"hexcolor","default":"",description:"HEX color code for the Username link color"},width:{type:"number","default":"100",description:"width of the Follow Button"},dataLang:{type:"string","enum":["en","fr","de","it","es","ko","ja"],"default":"en",description:"The language for the Tweet Button"}}),define.dataSchema("WTwitterTweetProperties",{dataCount:{type:"string","enum":["none","horizontal","vertical"],"default":"horizontal",description:"Count box position"},dataLang:{type:"string","enum":["en","fr","de","it","es","ko","ja"],"default":"en",description:"The language for the Tweet Button"}}),define.experiment.newClass("wysiwyg.common.utils.AutoPlay.NBC_SlideShowGallery.New",function(a){var b=a;
b.inherits("bootstrap.managers.events.EventDispatcher"),b.resources(["W.Utils"]),b.statics({AUTOPLAY_EVENT:"autoPlayEvent",AUTOPLAY_STATE:{PAUSE:0,PLAY:1}}),b.methods({initialize:function(a){this._currentState=this.AUTOPLAY_STATE.PAUSE,this._delayTime=a||5e3,this._callLaterIndex=-1},play:function(){this._currentState===this.AUTOPLAY_STATE.PAUSE&&(this._currentState=this.AUTOPLAY_STATE.PLAY,this._startTimer())},pause:function(){this._currentState===this.AUTOPLAY_STATE.PLAY&&(this._currentState=this.AUTOPLAY_STATE.PAUSE,this.resources.W.Utils.clearCallLater(this._callLaterIndex))},setDelay:function(a){this._delayTime=1e3*a},getAutoPlayState:function(){return this._currentState},_startTimer:function(){this._callLaterIndex=this.resources.W.Utils.callLater(this._onTimer,null,this,this._delayTime)},_onTimer:function(){this._isPlaying()&&(this.trigger(this.AUTOPLAY_EVENT,this),this._startTimer())},isPlaying:function(){return this._isPlaying()},_isPlaying:function(){return this._currentState===this.AUTOPLAY_STATE.PLAY}})}),define.Class("wysiwyg.common.utils.PageConfiguration",function(a){var b=a;b.fields({_config:{},_pageData:null}),b.methods({initialize:function(a,b){this._pageData=a,this._config=Object.merge(this._config,b)},canBeDeleted:function(){return this._config.canBeDeleted},canBeDuplicated:function(){return this._config.canBeDuplicated},showSeoSettings:function(){return this._config.showSeoSettings},isHidden:function(){return this._config.hasOwnProperty("isHidden")?this._config.isHidden:this._pageData.hidePage},canBeHidden:function(){return this._config.canBeHidden},canBeReordered:function(){return this._config.canBeReordered},canHaveChildren:function(){return this._config.canHaveChildren},canBeAddedFromMenu:function(){return this._config.canBeAddedFromMenu},canBeSetAsHomePage:function(){return this._config.canBeSetAsHomePage},showBasicSettings:function(){return this._config.showBasicSettings},isAppPage:function(){return"AppPage"===this._pageData.type},getPageIcon:function(){return this._config.pageIcon}})}),define.Class("wysiwyg.common.utils.PageConfigurationFactory",function(a){var b=a;b.utilize(["wysiwyg.common.utils.PageConfiguration"]),b.resources(["W.Utils"]),b.fields({_pageConfigMap:{},_pageTypeMap:{}}),b.methods({initialize:function(){this._defaultConfig={type:this.imports.PageConfiguration,options:{canBeDeleted:!0,canBeDuplicated:!0,showSeoSettings:!0,canBeHidden:!0,canBeReordered:!0,canHaveChildren:!0,canBeAddedFromMenu:!0,canBeSetAsHomePage:!0,showBasicSettings:!0,pageIcon:null}}},registerConfig:function(a,b){if(b=Object.merge({},this._defaultConfig,b),this._pageConfigMap.hasOwnProperty(a)){if(!this._areEqualConfigs(b.options,this._pageConfigMap[a].options))throw"PageConfigurationFactory:: cannot register different configurations for the same page type ["+a+"]."}else this._pageConfigMap[a]=b},getConfig:function(a){var b=this._pageTypeMap[a.type];if(!b)throw"PageConfigurationFactory:: cannot resolve key getter function for page type ["+a.type+"].";var c=b(a),d=this._pageConfigMap[c];if(!d)throw"PageConfigurationFactory:: configuration not found for page type ["+c+"].";return new d.type(a,d.options)},registerPageType:function(a,b){if(this._pageTypeMap.hasOwnProperty(a))throw"PageConfigurationFactory:: cannot register different getter methods for the same page type ["+a+"].";this._pageTypeMap[a]=b},_areEqualConfigs:function(a,b){var c=Object.keys(a),d=Object.keys(b);if(c.length!=d.length)return!1;for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!==b[f])return!1}return!0}})}),define.Const("TransitionTypes",{SWIPE_HORIZONTAL:"swipeHorizontal",SWIPE_HORIZONTAL_FULLSCREEN:"swipeHorizontalFullScreen",SWIPE_VERTICAL:"swipeVertical",SWIPE_VERTICAL_FULLSCREEN:"swipeVerticalFullScreen",CROSS_FADE:"crossfade",SHRINK_FADE:"shrinkfade",OUT_IN:"outIn",NONE:"none"}),define.dataSchema("map",{templates:"object"}),define.dataItem.multi({CK_EDITOR_FONT_STYLES:{type:"map",metaData:{isPreset:!0,isHidden:!1,description:"",isPersistent:!1},items:{font_0:{seoTag:"h1",label:"FONT_0_LABEL"},font_1:{seoTag:"h2",label:"FONT_1_LABEL"},font_2:{seoTag:"h2",label:"FONT_2_LABEL"},font_3:{seoTag:"h3",label:"FONT_3_LABEL"},font_4:{seoTag:"h4",label:"FONT_4_LABEL"},font_5:{seoTag:"h5",label:"FONT_5_LABEL"},font_6:{seoTag:"h6",label:"FONT_6_LABEL"},font_7:{seoTag:"p",label:"FONT_7_LABEL"},font_8:{seoTag:"p",label:"FONT_8_LABEL"},font_9:{seoTag:"p",label:"FONT_9_LABEL"},font_10:{seoTag:"p",label:"FONT_10_LABEL"}}}}),define.Class("external_apis.flickr.FlickrAPI",function(a){var b=a;b.fields({_apiKey:"0f1c119e0c156ac4b80052270d0a3202",_apiURL:"http://api.flickr.com/services/rest/?format=json",_callback:void 0}),b.methods({getUserID:function(a,b){var c;c={method:"flickr.people.findByUsername",username:a},this._callback=b,this._call(c,function(a){var c,d;c="fail"!=a.stat,d=a.message,c===!0?b(c,a.user.id):b(c,d)})},getTags:function(a,b){var c;c={method:"flickr.tags.getListUser",user_id:a},this._callback=b,this._call(c,function(a){var c,d;d="fail"!=a.stat,c=a.message,d===!0?b(d,a.who.tags.tag):b(d,c)})},_call:function(a,b){a.api_key=this._apiKey;var c=new Request.JSONP({url:this._apiURL,callbackKey:"jsoncallback",data:a,onComplete:b,timeout:5e3,onFailure:this._handleTimeout});c.send()},_handleTimeout:function(){this._callback&&this._callback(!1,"Failed connecting to Flickr. Please try again in a few minutes.")}})});